:root {
  --rose: #ffd3e1;
  --rose-deep: #f07aa6;
  --blood: #8b1d3d;
  --wine: #5a0d1c;
  --ink: #2b0b10;
  --noir: #12070b;
  --gold: #f3c97a;
  --ivory: #fff6f9;
  --paper: #fff9fb;
  --shadow: rgba(30, 10, 18, 0.18);
}

* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  color: var(--ink);
  font-family: "Cormorant Garamond", serif;
  background:
    radial-gradient(circle at 8% 12%, rgba(255, 255, 255, 0.9), transparent 40%),
    radial-gradient(circle at 92% 18%, rgba(255, 226, 238, 0.66), transparent 44%),
    radial-gradient(circle at 14% 86%, rgba(255, 214, 229, 0.58), transparent 40%),
    radial-gradient(circle at 86% 88%, rgba(246, 198, 220, 0.48), transparent 44%),
    linear-gradient(160deg, #fff6fa 0%, #f5c9db 48%, #eba8c2 100%);
  min-height: 100vh;
  position: relative;
  overflow-x: hidden;
  --motion-lift: 4px;
  --motion-tag-lift: 3px;
  --motion-sticker-scale: 1.08;
  --motion-orb-scale: 1.14;
  --motion-mark-scale: 1.2;
  --motion-timeline-scale: 1.08;
  --motion-wave-min: 8px;
  --motion-wave-max: 22px;
  --motion-sticker-duration: 2.8s;
  --motion-preview-icon-duration: 2.9s;
  --motion-orb-duration: 2.8s;
  --motion-mark-duration: 2.4s;
  --motion-doodle-duration: 3s;
  --motion-timeline-duration: 3.2s;
  --motion-tag-duration: 3s;
  --motion-wave-duration: 1.1s;
  --motion-wax-duration: 1.6s;
  --motion-envelope-duration: 3.2s;
  --motion-orbit-duration: 3.6s;
  --motion-accent-duration: 2.8s;
  --motion-glow-duration: 2.3s;
  --motion-ring-duration: 8s;
  --motion-track-card-duration: 1.8s;
  --motion-track-eq-duration: 1s;
  --motion-track-glow-duration: 1.6s;
  --motion-polaroid-duration: 0.55s;
  --motion-room-duration: 0.55s;
  --motion-icon-glow-duration: 1.8s;
  --motion-bg-speed: 34s;
  --motion-bg-speed-alt: 46s;
  --motion-bg-shift: 260px;
  --motion-bg-shift-alt: 300px;
}

body.motion-soft {
  --motion-lift: 2px;
  --motion-tag-lift: 1px;
  --motion-sticker-scale: 1.03;
  --motion-orb-scale: 1.06;
  --motion-mark-scale: 1.08;
  --motion-timeline-scale: 1.03;
  --motion-wave-min: 7px;
  --motion-wave-max: 14px;
  --motion-sticker-duration: 4.2s;
  --motion-preview-icon-duration: 4.4s;
  --motion-orb-duration: 4.6s;
  --motion-mark-duration: 3.2s;
  --motion-doodle-duration: 4.8s;
  --motion-timeline-duration: 5.2s;
  --motion-tag-duration: 4.8s;
  --motion-wave-duration: 1.8s;
  --motion-wax-duration: 2.4s;
  --motion-envelope-duration: 4.8s;
  --motion-orbit-duration: 5.4s;
  --motion-accent-duration: 4.8s;
  --motion-glow-duration: 4s;
  --motion-ring-duration: 13s;
  --motion-track-card-duration: 2.8s;
  --motion-track-eq-duration: 1.45s;
  --motion-track-glow-duration: 2.5s;
  --motion-polaroid-duration: 0.75s;
  --motion-room-duration: 0.8s;
  --motion-icon-glow-duration: 2.8s;
  --motion-bg-speed: 52s;
  --motion-bg-speed-alt: 68s;
  --motion-bg-shift: 260px;
  --motion-bg-shift-alt: 300px;
}

body.motion-normal {
  --motion-lift: 4px;
  --motion-tag-lift: 3px;
  --motion-sticker-scale: 1.08;
  --motion-orb-scale: 1.13;
  --motion-mark-scale: 1.17;
  --motion-timeline-scale: 1.07;
  --motion-wave-min: 8px;
  --motion-wave-max: 20px;
  --motion-sticker-duration: 2.5s;
  --motion-preview-icon-duration: 2.7s;
  --motion-orb-duration: 2.7s;
  --motion-mark-duration: 2.2s;
  --motion-doodle-duration: 2.8s;
  --motion-timeline-duration: 3s;
  --motion-tag-duration: 2.8s;
  --motion-wave-duration: 1s;
  --motion-wax-duration: 1.4s;
  --motion-envelope-duration: 3s;
  --motion-orbit-duration: 3.3s;
  --motion-accent-duration: 2.6s;
  --motion-glow-duration: 2.1s;
  --motion-ring-duration: 7.4s;
  --motion-track-card-duration: 1.6s;
  --motion-track-eq-duration: 0.9s;
  --motion-track-glow-duration: 1.4s;
  --motion-polaroid-duration: 0.5s;
  --motion-room-duration: 0.5s;
  --motion-icon-glow-duration: 1.7s;
  --motion-bg-speed: 28s;
  --motion-bg-speed-alt: 40s;
  --motion-bg-shift: 260px;
  --motion-bg-shift-alt: 300px;
}

body.motion-impact {
  --motion-lift: 6px;
  --motion-tag-lift: 5px;
  --motion-sticker-scale: 1.14;
  --motion-orb-scale: 1.2;
  --motion-mark-scale: 1.3;
  --motion-timeline-scale: 1.13;
  --motion-wave-min: 8px;
  --motion-wave-max: 26px;
  --motion-sticker-duration: 1.8s;
  --motion-preview-icon-duration: 2s;
  --motion-orb-duration: 2s;
  --motion-mark-duration: 1.6s;
  --motion-doodle-duration: 2.1s;
  --motion-timeline-duration: 2.4s;
  --motion-tag-duration: 2.2s;
  --motion-wave-duration: 0.75s;
  --motion-wax-duration: 1.1s;
  --motion-envelope-duration: 2s;
  --motion-orbit-duration: 1.9s;
  --motion-accent-duration: 1.8s;
  --motion-glow-duration: 1.25s;
  --motion-ring-duration: 5.5s;
  --motion-track-card-duration: 1.1s;
  --motion-track-eq-duration: 0.62s;
  --motion-track-glow-duration: 0.9s;
  --motion-polaroid-duration: 0.42s;
  --motion-room-duration: 0.4s;
  --motion-icon-glow-duration: 1.1s;
  --motion-bg-speed: 14s;
  --motion-bg-speed-alt: 20s;
  --motion-bg-shift: 260px;
  --motion-bg-shift-alt: 300px;
}

body::before {
  content: "";
  position: fixed;
  inset: -24%;
  pointer-events: none;
  background:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='260' height='260' viewBox='0 0 260 260'><g fill='none' stroke='%23c76590' stroke-width='2.25' stroke-linecap='round' stroke-linejoin='round' opacity='0.7'><path d='m40 48 9-10 8 8M85 48l-9-10-8 8'/><path d='M38 54a24 24 0 0 1 48 0v10a24 24 0 0 1-48 0z'/><circle cx='53' cy='62' r='1.9' fill='%23c76590' stroke='none'/><circle cx='71' cy='62' r='1.9' fill='%23c76590' stroke='none'/><path d='M56 70c4 3 8 3 12 0'/><ellipse cx='173' cy='46' rx='7' ry='13'/><ellipse cx='189' cy='46' rx='7' ry='13'/><circle cx='181' cy='74' r='21'/><circle cx='174' cy='72' r='1.8' fill='%23c76590' stroke='none'/><circle cx='188' cy='72' r='1.8' fill='%23c76590' stroke='none'/><path d='M176 80c3 3 7 3 10 0'/><circle cx='68' cy='172' r='22'/><circle cx='51' cy='154' r='8'/><circle cx='85' cy='154' r='8'/><circle cx='61' cy='170' r='1.8' fill='%23c76590' stroke='none'/><circle cx='75' cy='170' r='1.8' fill='%23c76590' stroke='none'/><path d='M63 178c3 3 7 3 10 0'/><ellipse cx='188' cy='200' rx='14' ry='10'/><circle cx='173' cy='183' r='4.3'/><circle cx='183' cy='178' r='4.3'/><circle cx='193' cy='178' r='4.3'/><circle cx='203' cy='183' r='4.3'/></g></svg>") 0 0 / 260px 260px repeat,
    radial-gradient(circle at 22% 18%, rgba(255, 255, 255, 0.22), transparent 52%),
    radial-gradient(circle at 78% 74%, rgba(255, 255, 255, 0.18), transparent 58%);
  mix-blend-mode: normal;
  opacity: 0.72;
  filter: saturate(1.08) contrast(1.03);
  z-index: 0;
  will-change: transform;
  transform: translate3d(0, 0, 0);
  animation: pageBackgroundFlowA var(--motion-bg-speed) linear infinite;
}

body::after {
  content: "";
  position: fixed;
  inset: -24%;
  pointer-events: none;
  background:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='300' height='300' viewBox='0 0 300 300'><g fill='none' stroke='%23d6789f' stroke-width='2.1' stroke-linecap='round' stroke-linejoin='round' opacity='0.62'><path d='m56 72 10-12 10 8M110 72l-10-12-10 8'/><circle cx='83' cy='94' r='24'/><circle cx='74' cy='93' r='1.8' fill='%23d6789f' stroke='none'/><circle cx='92' cy='93' r='1.8' fill='%23d6789f' stroke='none'/><path d='M76 102c4 4 9 4 13 0'/><circle cx='216' cy='84' r='20'/><circle cx='208' cy='82' r='1.7' fill='%23d6789f' stroke='none'/><circle cx='223' cy='82' r='1.7' fill='%23d6789f' stroke='none'/><path d='M214 90h6l-3 4z' fill='%23d6789f' stroke='none'/><circle cx='98' cy='218' r='22'/><circle cx='80' cy='201' r='7'/><circle cx='116' cy='201' r='7'/><circle cx='90' cy='217' r='1.8' fill='%23d6789f' stroke='none'/><circle cx='106' cy='217' r='1.8' fill='%23d6789f' stroke='none'/><path d='M93 225c4 3 8 3 11 0'/><ellipse cx='230' cy='218' rx='13' ry='9'/><circle cx='216' cy='202' r='4'/><circle cx='225' cy='198' r='4'/><circle cx='235' cy='198' r='4'/><circle cx='244' cy='202' r='4'/></g></svg>") 130px 112px / 300px 300px repeat,
    radial-gradient(circle at 50% 20%, rgba(255, 255, 255, 0.45), transparent 60%);
  opacity: 0.62;
  filter: saturate(1.08) contrast(1.02);
  z-index: 0;
  will-change: transform;
  transform: translate3d(0, 0, 0);
  animation: pageBackgroundFlowB var(--motion-bg-speed-alt) linear infinite;
}

@keyframes pageBackgroundFlowA {
  0% {
    transform: translate3d(0, 0, 0);
  }
  100% {
    transform: translate3d(var(--motion-bg-shift), var(--motion-bg-shift), 0);
  }
}

@keyframes pageBackgroundFlowB {
  0% {
    transform: translate3d(0, 0, 0);
  }
  100% {
    transform: translate3d(calc(var(--motion-bg-shift-alt) * -1), var(--motion-bg-shift-alt), 0);
  }
}

body.intro-lock {
  overflow: hidden;
}

body.modal-lock {
  overflow: hidden;
}

.page-letter-hidden {
  opacity: 0;
  pointer-events: none;
  transform: translateY(20px) scale(0.98);
}

.page {
  max-width: 1120px;
  margin: 0 auto;
  padding: 40px 20px 80px;
  transition: opacity 0.8s ease, transform 0.8s ease;
  position: relative;
  z-index: 1;
}

.top-routes {
  position: sticky;
  top: 14px;
  z-index: 12;
  margin-bottom: 14px;
}

.top-routes-shell {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 10px;
  border-radius: 20px;
  border: 1px solid rgba(167, 40, 75, 0.3);
  background:
    radial-gradient(circle at 12% 12%, rgba(255, 255, 255, 0.92), transparent 48%),
    linear-gradient(160deg, rgba(255, 247, 251, 0.94), rgba(247, 217, 230, 0.86));
  box-shadow: 0 16px 28px rgba(120, 32, 58, 0.16);
  backdrop-filter: blur(6px);
}

.top-route-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 7px;
  min-height: 38px;
  padding: 7px 12px;
  border-radius: 999px;
  border: 1px solid rgba(167, 40, 75, 0.26);
  background: rgba(255, 247, 251, 0.95);
  color: rgba(88, 24, 48, 0.92);
  font-family: "Cinzel", serif;
  font-size: 0.82rem;
  letter-spacing: 0.04em;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, color 0.2s ease;
}

.top-route-btn .icon-glyph {
  width: 13px;
  height: 13px;
}

.top-route-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 18px rgba(120, 32, 58, 0.2);
  border-color: rgba(167, 40, 75, 0.38);
}

.top-route-btn.active {
  border-color: rgba(255, 230, 241, 0.85);
  background: linear-gradient(135deg, #de497b, #7a1735);
  color: rgba(255, 247, 252, 0.98);
  box-shadow: 0 12px 22px rgba(122, 23, 53, 0.3);
}

.top-route-btn.active .icon-glyph {
  filter: drop-shadow(0 1px 2px rgba(255, 235, 245, 0.4));
}

.page-hidden {
  opacity: 0;
  transform: translateY(20px);
}

.page-reveal {
  opacity: 1;
  transform: translateY(0);
}

h1,
h2,
h3 {
  font-family: "Cinzel", serif;
  margin: 0 0 16px;
  letter-spacing: 0.02em;
}

p {
  margin: 0 0 12px;
  font-size: 1.1rem;
}

.icon-glyph {
  width: 1em;
  height: 1em;
  display: block;
  flex: none;
}

.section {
  margin-top: 40px;
  padding: 34px;
  background: rgba(255, 250, 252, 0.96);
  border: 1px solid rgba(212, 74, 111, 0.35);
  border-radius: 24px;
  box-shadow: 0 24px 60px rgba(120, 32, 58, 0.18);
  position: relative;
  overflow: hidden;
}

.section::before {
  content: "";
  position: absolute;
  inset: 12px;
  border: 1px dashed rgba(212, 74, 111, 0.22);
  border-radius: 18px;
  pointer-events: none;
}

.section::after {
  content: "";
  position: absolute;
  left: 30px;
  right: 30px;
  top: 16px;
  height: 6px;
  background: radial-gradient(circle, rgba(244, 180, 202, 0.9), transparent 60%);
  opacity: 0.9;
}

.section-carousel {
  position: relative;
  margin: 34px auto 0;
  width: min(980px, 100%);
  display: grid;
  gap: 16px;
  padding: 20px 16px 14px;
  border-radius: 30px;
  border: 1px solid rgba(212, 74, 111, 0.34);
  background:
    radial-gradient(circle at 10% 8%, rgba(255, 255, 255, 0.78), transparent 36%),
    radial-gradient(circle at 88% 18%, rgba(255, 224, 236, 0.64), transparent 42%),
    repeating-linear-gradient(0deg, rgba(167, 44, 82, 0.05) 0 1px, transparent 1px 14px),
    linear-gradient(180deg, rgba(255, 245, 250, 0.92), rgba(245, 213, 227, 0.82));
  box-shadow:
    0 24px 54px rgba(120, 32, 58, 0.16),
    inset 0 1px 0 rgba(255, 255, 255, 0.75);
  overflow: hidden;
}

.section-carousel-particles {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.95;
}

.section-carousel::before {
  content: "";
  position: absolute;
  inset: 10px;
  border-radius: 24px;
  border: 1px dashed rgba(212, 74, 111, 0.24);
  pointer-events: none;
}

.section-carousel::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 4% 86%, rgba(214, 86, 129, 0.18) 0 10px, transparent 12px),
    radial-gradient(circle at 96% 14%, rgba(214, 86, 129, 0.16) 0 10px, transparent 12px);
}

.section-carousel-head {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 18px;
  position: relative;
  z-index: 1;
}

.section-carousel-head-text {
  display: grid;
  gap: 8px;
  max-width: 620px;
}

.section-carousel-stamp {
  display: inline-flex;
  width: fit-content;
  padding: 4px 12px;
  border-radius: 999px;
  border: 1px solid rgba(189, 58, 96, 0.38);
  background: rgba(255, 242, 248, 0.88);
  color: rgba(127, 25, 54, 0.88);
  font-family: "Cinzel", serif;
  font-size: 0.64rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  box-shadow: 0 8px 16px rgba(166, 40, 76, 0.14);
}

.section-carousel-title {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 12px;
  margin: 0;
  font-size: clamp(1.48rem, 2.35vw, 2rem);
  color: #4a0f1e;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  text-shadow: 0 2px 0 rgba(255, 245, 250, 0.8);
}

.section-carousel-title::before,
.section-carousel-title::after {
  content: "❦";
  color: rgba(169, 43, 83, 0.54);
  font-size: 0.72em;
  text-shadow: 0 6px 10px rgba(125, 30, 58, 0.16);
}

.section-carousel-head p {
  margin: 0;
  color: rgba(66, 18, 30, 0.72);
  font-size: 1.02rem;
}

.section-carousel-divider {
  display: flex;
  align-items: center;
  gap: 9px;
  margin-top: 2px;
  width: min(360px, 100%);
}

.divider-line {
  height: 1px;
  flex: 1;
  background: linear-gradient(90deg, rgba(123, 22, 50, 0), rgba(123, 22, 50, 0.4), rgba(123, 22, 50, 0));
}

.divider-mark {
  width: 10px;
  height: 10px;
  border-radius: 2px;
  border: 1.5px solid rgba(181, 41, 82, 0.75);
  transform: rotate(45deg);
  box-shadow: 0 5px 10px rgba(128, 23, 53, 0.2);
  animation: carouselMarkBlink var(--motion-mark-duration) ease-in-out infinite;
}

.section-carousel-actions {
  display: flex;
  align-items: center;
  gap: 12px;
  position: relative;
  z-index: 1;
}

.section-carousel-actions::before {
  content: "";
  width: 7px;
  height: 7px;
  border-radius: 2px;
  background: rgba(175, 38, 80, 0.5);
  transform: rotate(45deg);
  display: inline-block;
  margin-right: 2px;
}

.carousel-arrow {
  position: relative;
  width: 46px;
  height: 46px;
  border-radius: 999px;
  border: 1px solid rgba(123, 22, 50, 0.42);
  background: linear-gradient(165deg, rgba(255, 251, 253, 0.97), rgba(248, 223, 235, 0.96));
  color: var(--blood);
  font-size: 1.4rem;
  cursor: pointer;
  display: grid;
  place-items: center;
  box-shadow:
    0 12px 20px rgba(123, 22, 50, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.88);
  transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

.carousel-arrow:hover {
  transform: translateY(-1px) scale(1.03);
  box-shadow: 0 14px 24px rgba(123, 22, 50, 0.28);
}

.carousel-arrow::after {
  content: "";
  position: absolute;
  top: 8px;
  right: 10px;
  width: 5px;
  height: 5px;
  border-radius: 1px;
  background: rgba(184, 50, 90, 0.45);
  transform: rotate(45deg);
}

.carousel-arrow:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  box-shadow: none;
}

.carousel-arrow:focus-visible {
  outline: 2px solid var(--gold);
  outline-offset: 3px;
}

.section-card-track {
  position: relative;
  overflow: hidden;
  padding: 4px 2px 8px;
  z-index: 1;
}

.section-card-track::after {
  content: "";
  position: absolute;
  inset: -30%;
  background:
    radial-gradient(circle at 30% 30%, rgba(255, 214, 230, 0.6), transparent 55%),
    radial-gradient(circle at 70% 40%, rgba(255, 244, 214, 0.45), transparent 60%),
    radial-gradient(circle at 50% 70%, rgba(255, 198, 217, 0.5), transparent 60%);
  opacity: 0;
  pointer-events: none;
}

.section-card-track.is-shifting::after {
  animation: lovePulse 0.6s ease;
}

.section-card-row {
  display: flex;
  width: 100%;
  transition: transform 0.65s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.25s ease, filter 0.25s ease;
  will-change: transform;
}

.section-card-row.is-shifting {
  opacity: 0;
  filter: blur(8px);
}

.section-card {
  appearance: none;
  flex: 0 0 100%;
  min-width: 100%;
  width: 100%;
  border: 1px solid rgba(212, 74, 111, 0.35);
  border-radius: 24px;
  background: linear-gradient(135deg, rgba(255, 252, 253, 0.98), rgba(255, 232, 244, 0.92));
  padding: 22px;
  min-height: clamp(230px, 33vh, 320px);
  box-shadow: 0 18px 42px rgba(120, 32, 58, 0.16);
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(0, 1.02fr);
  gap: 18px;
  text-align: left;
  cursor: pointer;
  position: relative;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  color: inherit;
  font: inherit;
}

.section-card::before {
  content: "";
  position: absolute;
  inset: 10px;
  border: 1px dashed rgba(212, 74, 111, 0.22);
  border-radius: 18px;
  pointer-events: none;
}

.section-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 22px 48px rgba(120, 32, 58, 0.2);
}

.section-card:focus-visible {
  outline: 2px solid var(--gold);
  outline-offset: 4px;
}

.section-card.active {
  border-color: var(--card-accent);
  box-shadow: 0 22px 50px rgba(120, 32, 58, 0.22);
}

.section-card-main {
  display: flex;
  gap: 14px;
  align-items: flex-start;
}

.section-card-icon {
  width: 48px;
  height: 48px;
  border-radius: 14px;
  display: grid;
  place-items: center;
  color: #fff;
  background: var(--card-accent, #c92c55);
  box-shadow: 0 12px 20px rgba(123, 22, 50, 0.3);
}

.section-card-icon-glyph {
  width: 22px;
  height: 22px;
}

.section-card.active .section-card-icon {
  animation: iconGlow var(--motion-icon-glow-duration) ease-in-out infinite;
}

.section-card-text {
  display: grid;
  gap: 8px;
  align-content: center;
}

.section-card-text h3 {
  margin: 6px 0 8px;
  font-size: 1.42rem;
}

.section-card-eyebrow {
  font-size: 0.75rem;
  letter-spacing: 0.24em;
  text-transform: uppercase;
  color: rgba(90, 13, 28, 0.65);
}

.section-card-text p {
  margin: 0 0 10px;
  color: rgba(43, 11, 16, 0.75);
  font-size: 0.98rem;
}

.section-card-theme {
  display: inline-flex;
  align-items: center;
  width: fit-content;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px dashed rgba(123, 22, 50, 0.3);
  background: rgba(255, 247, 251, 0.88);
  color: rgba(92, 17, 38, 0.88);
  font-size: 0.7rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  font-family: "Cinzel", serif;
}

.section-card-stickers {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.section-card-stickers span {
  width: 24px;
  height: 24px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  background: rgba(255, 255, 255, 0.82);
  border: 1px solid rgba(199, 78, 120, 0.28);
  box-shadow: 0 8px 14px rgba(120, 32, 58, 0.16);
  animation: stickerDrift var(--motion-sticker-duration) ease-in-out infinite;
  animation-delay: var(--sticker-delay, 0s);
  color: rgba(120, 28, 57, 0.9);
}

.section-card-stickers .icon-glyph {
  width: 13px;
  height: 13px;
}

.section-card-cta {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 5px 11px;
  border-radius: 999px;
  border: 1px solid rgba(123, 22, 50, 0.3);
  font-family: "Cinzel", serif;
  font-size: 0.74rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--blood);
  background: rgba(255, 255, 255, 0.7);
}

.section-card-preview {
  width: 100%;
  height: clamp(200px, 30vh, 284px);
  min-height: 200px;
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid rgba(212, 74, 111, 0.2);
  box-shadow: inset 0 0 24px rgba(212, 74, 111, 0.2);
  position: relative;
  background: rgba(255, 255, 255, 0.7);
}

.section-card-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.6s ease;
}

.section-card-preview::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(120deg, rgba(255, 255, 255, 0.05), rgba(201, 44, 85, 0.08));
  opacity: 0.4;
}

.section-card:hover .section-card-preview img {
  transform: scale(1.06);
}

.section-card-love-tag {
  display: inline-flex;
  align-items: center;
  width: fit-content;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 0.72rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: #8b1d3d;
  border: 1px solid rgba(201, 44, 85, 0.32);
  background: rgba(255, 243, 248, 0.9);
  box-shadow: 0 8px 14px rgba(166, 40, 76, 0.14);
}

.section-card-timeline {
  background:
    radial-gradient(circle at 10% 18%, rgba(255, 245, 222, 0.9), transparent 42%),
    radial-gradient(circle at 88% 18%, rgba(248, 222, 231, 0.62), transparent 44%),
    linear-gradient(135deg, rgba(255, 251, 246, 0.98), rgba(247, 233, 239, 0.94));
}

.section-card-timeline .section-card-icon {
  background: linear-gradient(150deg, #8b1d3d, #5d0d21);
}

.section-card-timeline .section-card-theme {
  background: rgba(255, 244, 226, 0.9);
}

.section-card-timeline .section-card-text h3::after {
  content: " ✦";
  color: rgba(146, 33, 67, 0.62);
}

.section-card-music {
  background:
    radial-gradient(circle at 12% 18%, rgba(255, 237, 198, 0.86), transparent 42%),
    radial-gradient(circle at 84% 82%, rgba(252, 227, 236, 0.74), transparent 48%),
    linear-gradient(125deg, rgba(255, 251, 241, 0.98), rgba(249, 232, 238, 0.93));
}

.section-card-music .section-card-icon {
  background: linear-gradient(150deg, #d7882f, #a55f14);
}

.section-card-music .section-card-theme {
  background: rgba(255, 243, 212, 0.92);
}

.section-card-music .section-card-text h3::after {
  content: " ♫";
  color: rgba(174, 106, 23, 0.78);
}

.section-card-gallery {
  background:
    radial-gradient(circle at 14% 14%, rgba(255, 230, 242, 0.84), transparent 40%),
    radial-gradient(circle at 88% 22%, rgba(226, 247, 245, 0.65), transparent 42%),
    linear-gradient(140deg, rgba(255, 250, 252, 0.98), rgba(238, 239, 249, 0.92));
}

.section-card-gallery .section-card-icon {
  background: linear-gradient(150deg, #b13a7c, #7d1f59);
}

.section-card-gallery .section-card-theme {
  background: rgba(246, 236, 255, 0.86);
}

.section-card-gallery .section-card-text h3::after {
  content: " ✿";
  color: rgba(158, 45, 113, 0.72);
}

.section-card-puzzle {
  background:
    radial-gradient(circle at 12% 82%, rgba(245, 221, 232, 0.74), transparent 42%),
    radial-gradient(circle at 88% 14%, rgba(223, 234, 255, 0.62), transparent 44%),
    linear-gradient(145deg, rgba(255, 249, 251, 0.98), rgba(233, 238, 248, 0.92));
}

.section-card-puzzle .section-card-icon {
  background: linear-gradient(150deg, #3f2247, #23102a);
}

.section-card-puzzle .section-card-theme {
  background: rgba(238, 237, 255, 0.84);
}

.section-card-puzzle .section-card-text h3::after {
  content: " ✧";
  color: rgba(85, 45, 106, 0.76);
}

.section-card-letter {
  background:
    radial-gradient(circle at 15% 12%, rgba(255, 255, 255, 0.94), transparent 48%),
    linear-gradient(145deg, rgba(255, 251, 253, 0.98), rgba(255, 227, 241, 0.94));
}

.section-card-letter::after {
  content: "✦";
  position: absolute;
  right: 84px;
  top: 8px;
  color: rgba(171, 45, 83, 0.52);
  font-size: 0.82rem;
}

.section-card-letter .section-card-icon {
  background: linear-gradient(160deg, #db3f75, #991d43);
  border: 1px solid rgba(255, 231, 240, 0.82);
}

.section-card-wax-ribbon {
  position: absolute;
  right: 28px;
  top: 26px;
  width: 92px;
  height: 15px;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(141, 32, 63, 0.2), rgba(207, 82, 121, 0.55), rgba(141, 32, 63, 0.2));
  filter: blur(0.2px);
  transform: rotate(7deg);
  z-index: 5;
  pointer-events: none;
}

.section-card-wax-seal {
  position: absolute;
  right: 22px;
  top: 8px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: 2px double rgba(255, 232, 242, 0.92);
  background: radial-gradient(circle at 32% 30%, #dc4c7e, #8b1f42 74%);
  color: rgba(255, 238, 245, 0.98);
  display: grid;
  place-items: center;
  font-family: "Cinzel", serif;
  font-size: 0.58rem;
  letter-spacing: 0.08em;
  line-height: 1;
  box-shadow:
    0 10px 16px rgba(109, 23, 49, 0.28),
    inset 0 1px 0 rgba(255, 255, 255, 0.28);
  z-index: 6;
  pointer-events: none;
  transition: transform 0.32s ease, box-shadow 0.32s ease, filter 0.32s ease;
}

.section-card-letter:hover .section-card-wax-seal,
.section-card-letter.active .section-card-wax-seal {
  transform: rotate(8deg) scale(1.08);
  box-shadow:
    0 14px 22px rgba(109, 23, 49, 0.32),
    inset 0 1px 0 rgba(255, 255, 255, 0.34);
  filter: saturate(1.08);
  animation: waxSealPulse var(--motion-wax-duration) ease-in-out infinite;
}

.section-card-letter .section-card-eyebrow {
  color: rgba(135, 30, 61, 0.78);
}

.section-card-letter .section-card-text h3 {
  color: #6a1230;
}

.section-card-letter .section-card-text h3::after {
  content: "";
  display: inline-block;
  width: 18px;
  height: 2px;
  margin-left: 10px;
  vertical-align: middle;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(190, 54, 93, 0.72), rgba(190, 54, 93, 0));
}

.section-card-letter .section-card-text p {
  color: rgba(70, 16, 29, 0.78);
}

.section-card-preview.is-letter {
  border-color: rgba(201, 44, 85, 0.3);
  box-shadow:
    inset 0 0 0 1px rgba(255, 255, 255, 0.68),
    inset 0 -28px 34px rgba(149, 33, 66, 0.16),
    0 14px 30px rgba(120, 32, 58, 0.18);
}

.section-card-preview.is-letter img {
  filter: sepia(0.12) saturate(1.08) contrast(1.04);
}

.section-card-preview.is-letter::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 15% 22%, rgba(255, 255, 255, 0.38), transparent 40%),
    radial-gradient(circle at 82% 82%, rgba(255, 186, 212, 0.4), transparent 42%);
  pointer-events: none;
  z-index: 1;
}

.section-card-preview-orb {
  position: absolute;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  border: 1px solid rgba(255, 227, 240, 0.88);
  background: radial-gradient(circle at 35% 35%, rgba(255, 246, 250, 0.95), rgba(217, 106, 145, 0.65));
  box-shadow: 0 8px 16px rgba(125, 25, 53, 0.3);
  pointer-events: none;
  z-index: 3;
  animation: cardOrbFloat var(--motion-orb-duration) ease-in-out infinite;
}

.section-card-preview-orb.h1 {
  left: 12px;
  top: 12px;
}

.section-card-preview-orb.h2 {
  right: 16px;
  top: 14px;
  animation-delay: 0.5s;
}

.section-card-preview-orb.h3 {
  right: 24px;
  bottom: 14px;
  animation-delay: 1s;
}

.section-card-preview-ribbon {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 54px;
  background: linear-gradient(180deg, rgba(189, 41, 83, 0), rgba(148, 26, 58, 0.58));
  pointer-events: none;
  z-index: 2;
}

.section-card-preview-note {
  position: absolute;
  left: 12px;
  bottom: 11px;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255, 232, 242, 0.84);
  background: rgba(120, 20, 46, 0.55);
  color: rgba(255, 241, 248, 0.98);
  font-size: 0.66rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  z-index: 3;
}

.section-card-preview-note::before {
  content: "";
  display: inline-block;
  width: 9px;
  height: 6px;
  margin-right: 6px;
  border: 1px solid rgba(255, 239, 247, 0.9);
  border-radius: 1px;
  vertical-align: middle;
  transform: translateY(-1px);
}

.section-card-preview-icons {
  position: absolute;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  z-index: 3;
  right: 10px;
  bottom: 10px;
  pointer-events: none;
}

.section-card-preview-icons span {
  width: 26px;
  height: 26px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  background: rgba(255, 255, 255, 0.85);
  border: 1px solid rgba(184, 77, 119, 0.3);
  box-shadow: 0 8px 14px rgba(120, 32, 58, 0.2);
  animation: stickerDrift var(--motion-preview-icon-duration) ease-in-out infinite;
  animation-delay: var(--sticker-delay, 0s);
  color: rgba(119, 31, 72, 0.88);
}

.section-card-preview-icons .icon-glyph {
  width: 14px;
  height: 14px;
}

.section-card-preview-icons-timeline {
  left: 10px;
  right: auto;
  top: 10px;
  bottom: auto;
}

.section-card-preview-icons-music {
  left: 10px;
  right: auto;
}

.section-card-preview-icons-gallery {
  top: 10px;
  bottom: auto;
}

.section-card-preview-icons-puzzle span {
  border-style: dashed;
}

@keyframes stickerDrift {
  0%,
  100% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(calc(var(--motion-lift) * -1)) scale(var(--motion-sticker-scale));
  }
}

@keyframes cardOrbFloat {
  0%,
  100% {
    transform: translateY(0) scale(1);
    opacity: 0.75;
  }
  50% {
    transform: translateY(calc(var(--motion-lift) * -1)) scale(var(--motion-orb-scale));
    opacity: 1;
  }
}

@keyframes carouselMarkBlink {
  0%,
  100% {
    transform: rotate(45deg) scale(1);
    opacity: 0.55;
  }
  50% {
    transform: rotate(45deg) scale(var(--motion-mark-scale));
    opacity: 1;
  }
}

@keyframes waxSealPulse {
  0%,
  100% {
    transform: rotate(8deg) scale(1.08);
  }
  50% {
    transform: rotate(4deg) scale(1.14);
  }
}

.section-indicator {
  position: relative;
  z-index: 1;
  text-align: center;
  font-family: "Cinzel", serif;
  letter-spacing: 0.3em;
  font-size: 0.75rem;
  color: rgba(90, 13, 28, 0.6);
}

.section-indicator span:first-child {
  color: var(--blood);
  font-weight: 600;
}

.intro {
  position: fixed;
  inset: 0;
  z-index: 50;
  display: grid;
  place-items: center;
  overflow: hidden;
  background: #12090d;
}

.intro-photo {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  background: #0f0a0c;
  overflow: hidden;
}

.intro-photo::before {
  content: "";
  position: absolute;
  inset: -8%;
  background-image: var(--cover-url);
  background-size: cover;
  background-position: center;
  filter: blur(18px) brightness(0.5) saturate(1.05);
  transform: scale(1.1);
}

.intro-reel {
  position: relative;
  z-index: 2;
  width: min(92vw, 1100px);
  height: min(74vh, 640px);
}

.reel-slide {
  position: absolute;
  inset: 0;
  opacity: 0;
  transform: scale(1);
}

.reel-slide::before {
  content: "";
  position: absolute;
  inset: -6%;
  background-image: var(--slide-url);
  background-size: cover;
  background-position: center;
  filter: blur(16px) brightness(0.55) saturate(1.1);
  transform: scale(1.08);
}

.reel-slide img {
  position: relative;
  z-index: 1;
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 18px;
  filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.45));
}

.reel-caption {
  position: absolute;
  left: 18px;
  bottom: 18px;
  z-index: 2;
  padding: 10px 14px;
  border-radius: 12px;
  background: rgba(12, 8, 10, 0.6);
  color: #fdf2f6;
  display: grid;
  gap: 4px;
  min-width: 240px;
}

.reel-title {
  font-family: "Cinzel", serif;
  font-size: 0.95rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.reel-date {
  font-size: 0.95rem;
  color: rgba(255, 255, 255, 0.8);
}

.intro-hearts {
  position: absolute;
  inset: 0;
  z-index: 3;
  pointer-events: none;
}

.heart {
  position: absolute;
  --size: 18px;
  width: var(--size);
  height: var(--size);
  background: #f6a8c1;
  transform: rotate(45deg) scale(0);
  opacity: 0;
  border-radius: 2px;
  filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.35));
}

.heart::before,
.heart::after {
  content: "";
  position: absolute;
  width: var(--size);
  height: var(--size);
  background: inherit;
  border-radius: 50%;
}

.heart::before {
  top: calc(var(--size) * -0.5);
  left: 0;
}

.heart::after {
  left: calc(var(--size) * -0.5);
  top: 0;
}

.intro-stars {
  position: absolute;
  inset: 0;
  z-index: 3;
  pointer-events: none;
}

.shooting-stars {
  position: absolute;
  inset: 0;
  z-index: 3;
  pointer-events: none;
}

.star {
  position: absolute;
  --size: 16px;
  width: var(--size);
  height: var(--size);
  background: rgba(255, 218, 112, 1);
  clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
  opacity: 0;
  transform: scale(0.2) rotate(0deg);
  filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.45));
}

.shooting-star {
  position: absolute;
  width: 200px;
  height: 3px;
  background: linear-gradient(90deg, rgba(255, 232, 170, 0), rgba(255, 232, 170, 0.9), rgba(255, 232, 170, 0));
  opacity: 0;
  transform: translateX(-40px) translateY(0) rotate(-15deg);
  filter: drop-shadow(0 0 12px rgba(255, 232, 170, 0.85));
  top: var(--shoot-top);
  left: var(--shoot-left);
}

.intro-vignette {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at center, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.8));
}

.curtain {
  position: absolute;
  top: 0;
  width: 55%;
  height: 100%;
  background:
    linear-gradient(90deg, rgba(0, 0, 0, 0.35), transparent 30%),
    repeating-linear-gradient(90deg, rgba(123, 15, 29, 0.9) 0 16px, rgba(83, 10, 20, 0.95) 16px 32px);
  box-shadow: 0 0 40px rgba(0, 0, 0, 0.6);
  transition: transform 1.4s ease;
}

.curtain-left {
  left: 0;
  border-right: 1px solid rgba(255, 255, 255, 0.1);
}

.curtain-right {
  right: 0;
  border-left: 1px solid rgba(255, 255, 255, 0.1);
}

.intro-card {
  position: relative;
  z-index: 2;
  background: rgba(255, 244, 247, 0.92);
  border-radius: 18px;
  padding: 28px 34px;
  text-align: center;
  max-width: 420px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
  border: 1px solid rgba(184, 134, 11, 0.4);
  display: grid;
  gap: 12px;
  transition: transform 0.8s ease, opacity 0.8s ease;
  opacity: 0;
  transform: translateY(20px) scale(0.98);
}

.intro-card h1 {
  margin: 0;
  font-size: 2.3rem;
  color: var(--blood);
}

.intro-card p {
  margin: 0;
}

.intro-button {
  gap: 10px;
}

.flower {
  width: 28px;
  height: 28px;
  display: inline-block;
  transform: rotate(-10deg);
  transition: transform 0.3s ease;
}

.flower .petal {
  fill: #f6b3c9;
  opacity: 0.9;
  transform-origin: 32px 32px;
  transform: scale(0.35);
}

.flower .flower-center {
  fill: #f7d67a;
  transform: scale(0.2);
  transform-origin: 32px 32px;
}

.intro.ready .intro-card {
  animation: card-enter 1.1s ease forwards;
}

.intro.ready .intro-photo {
  animation: none;
}

.intro.ready .intro-photo::before {
  animation: photo-pan 18s ease-in-out infinite;
}

.intro.ready .intro-card .button {
  animation: button-pulse 2.6s ease-in-out infinite;
}

.intro.open .curtain-left {
  transform: translateX(-105%);
  transition-delay: 0.6s;
}

.intro.open .curtain-right {
  transform: translateX(105%);
  transition-delay: 0.6s;
}

.intro.open .intro-card {
  animation: card-exit 0.45s ease forwards;
  pointer-events: none;
}

.intro.open .reel-slide {
  animation: reel-fade 3s ease-in-out forwards;
  animation-delay: var(--delay);
}

.intro.open .intro-hearts .heart {
  animation: heart-float 6s ease-in-out forwards;
  animation-delay: var(--delay);
}

.intro.open .intro-stars .star {
  animation: star-float 6s ease-in-out forwards;
  animation-delay: var(--delay);
}

.intro.open .shooting-star {
  animation: shooting-star 1.4s ease-in-out forwards;
  animation-delay: var(--shoot-delay);
}


.intro.open .flower {
  animation: bloom-spin 0.9s ease forwards;
}


.intro.open .flower .petal {
  animation: petal-open 0.8s ease forwards;
}

.intro.open .flower .petal.p1 { animation-delay: 0.05s; }
.intro.open .flower .petal.p2 { animation-delay: 0.12s; }
.intro.open .flower .petal.p3 { animation-delay: 0.18s; }
.intro.open .flower .petal.p4 { animation-delay: 0.25s; }
.intro.open .flower .petal.p5 { animation-delay: 0.32s; }
.intro.open .flower .petal.p6 { animation-delay: 0.38s; }

.intro.open .flower .flower-center {
  animation: center-pop 0.6s ease forwards 0.2s;
}

@keyframes card-enter {
  0% {
    opacity: 0;
    transform: translateY(26px) scale(0.98);
  }
  60% {
    opacity: 1;
    transform: translateY(-6px) scale(1.01);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes card-exit {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(20px) scale(0.98);
  }
}

@keyframes heart-float {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.2) rotate(45deg);
  }
  30% {
    opacity: 1;
    transform: translateY(-12px) scale(0.8) rotate(45deg);
  }
  100% {
    opacity: 0;
    transform: translateY(-160px) scale(1.05) rotate(45deg);
  }
}

@keyframes star-float {
  0% {
    opacity: 0;
    transform: translateY(10px) scale(0.2) rotate(0deg);
  }
  40% {
    opacity: 1;
    transform: translateY(-20px) scale(0.9) rotate(90deg);
  }
  100% {
    opacity: 0;
    transform: translateY(-140px) scale(1.1) rotate(180deg);
  }
}

@keyframes shooting-star {
  0% {
    opacity: 0;
    transform: translateX(-60px) translateY(0) rotate(-15deg);
  }
  15% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: translateX(240px) translateY(40px) rotate(-15deg);
  }
}

@keyframes reel-fade {
  0% {
    opacity: 0;
    transform: scale(1.02);
  }
  20% {
    opacity: 1;
  }
  80% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: scale(1.05);
  }
}

@keyframes bloom-spin {
  0% {
    transform: scale(0.85) rotate(-20deg);
  }
  60% {
    transform: scale(1.15) rotate(6deg);
  }
  100% {
    transform: scale(1) rotate(0deg);
  }
}

@keyframes petal-open {
  0% {
    opacity: 0;
    transform: scale(0.3);
  }
  70% {
    opacity: 1;
    transform: scale(1.15);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes center-pop {
  0% {
    transform: scale(0.2);
  }
  80% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes button-pulse {
  0%,
  100% {
    box-shadow: 0 12px 20px rgba(107, 15, 26, 0.35);
    transform: translateY(0);
  }
  50% {
    box-shadow: 0 16px 28px rgba(107, 15, 26, 0.5);
    transform: translateY(-2px);
  }
}

@keyframes photo-pan {
  0% {
    transform: scale(1.08) translateX(0);
  }
  50% {
    transform: scale(1.1) translateX(-2%);
  }
  100% {
    transform: scale(1.08) translateX(0);
  }
}

.eyebrow {
  text-transform: uppercase;
  letter-spacing: 0.35em;
  font-size: 0.75rem;
  color: var(--wine);
}

.section-head {
  display: grid;
  gap: 6px;
  margin-bottom: 18px;
}

.section-head p {
  color: rgba(43, 11, 16, 0.75);
  margin: 0;
}

.hero {
  display: grid;
  gap: 30px;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  align-items: center;
  background:
    radial-gradient(circle at 20% 20%, rgba(255, 230, 238, 0.8), transparent 55%),
    linear-gradient(135deg, rgba(255, 245, 249, 0.98), rgba(244, 200, 216, 0.92));
  position: relative;
}

.hero::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='70' height='70' viewBox='0 0 24 24'><path fill='%23f07aa6' d='M12 21s-8-5.6-8-10a5 5 0 0 1 9-3 5 5 0 0 1 9 3c0 4.4-8 10-8 10z'/></svg>");
  background-size: 140px 140px;
  opacity: 0.06;
  pointer-events: none;
}

.hero-content {
  display: grid;
  gap: 14px;
  position: relative;
  z-index: 1;
}

.hero-title {
  font-size: 3rem;
  color: var(--blood);
  margin-bottom: 6px;
}

.hero-subtitle {
  font-size: 1.2rem;
  color: #3a0b12;
  max-width: 44ch;
}

.hero-actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.hero-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.hero-tags span {
  padding: 6px 14px;
  background: rgba(139, 29, 61, 0.1);
  color: var(--blood);
  border-radius: 999px;
  font-size: 0.95rem;
  font-family: "Cinzel", serif;
  position: relative;
}

.hero-tags span::before {
  content: "";
  width: 7px;
  height: 7px;
  border-radius: 2px;
  background: rgba(139, 29, 61, 0.6);
  transform: rotate(45deg);
  display: inline-block;
  margin-right: 8px;
}

.hero-photo {
  display: grid;
  gap: 12px;
  justify-items: center;
  position: relative;
  z-index: 1;
}

.photo-frame {
  position: relative;
  width: min(320px, 80vw);
  aspect-ratio: 3 / 4;
  background: #fff;
  border-radius: 28px;
  padding: 14px;
  box-shadow: 0 24px 60px rgba(120, 32, 58, 0.25);
  transform: rotate(-2deg);
}

.photo-frame img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 20px;
  background: #f8e8ef;
}

.photo-stamp {
  position: absolute;
  right: -12px;
  bottom: -12px;
  width: 86px;
  height: 86px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #c62e56, #7f1632);
  color: #fff1f6;
  display: grid;
  place-items: center;
  font-family: "Cinzel", serif;
  font-size: 1.1rem;
  letter-spacing: 0.08em;
  box-shadow: 0 16px 26px rgba(120, 32, 58, 0.4);
  border: 4px double rgba(255, 240, 247, 0.8);
}

.photo-note {
  font-family: "Great Vibes", cursive;
  font-size: 1.8rem;
  color: var(--wine);
}

.signature {
  font-family: "Great Vibes", cursive;
  font-size: 2.2rem;
  color: var(--wine);
}

.letter-section {
  text-align: center;
  background:
    radial-gradient(circle at 20% 16%, rgba(255, 229, 195, 0.54), transparent 46%),
    radial-gradient(circle at 82% 18%, rgba(255, 214, 229, 0.56), transparent 50%),
    linear-gradient(170deg, rgba(255, 251, 243, 0.98), rgba(250, 223, 206, 0.93));
  border-color: rgba(126, 53, 71, 0.42);
  padding: clamp(26px, 4vw, 36px) clamp(16px, 3vw, 28px) clamp(22px, 3vw, 30px);
  display: grid;
  gap: 12px;
  isolation: isolate;
}

.letter-section::before {
  inset: 12px;
  border: 1px solid rgba(126, 53, 71, 0.34);
  border-radius: 20px;
  background:
    radial-gradient(circle at 26% 24%, rgba(255, 255, 255, 0.55), transparent 44%),
    radial-gradient(circle at 72% 76%, rgba(255, 241, 208, 0.4), transparent 52%);
  opacity: 0.86;
}

.letter-section::after {
  left: clamp(20px, 8vw, 62px);
  right: clamp(20px, 8vw, 62px);
  top: 14px;
  height: 7px;
  background: linear-gradient(90deg, rgba(126, 53, 71, 0), rgba(126, 53, 71, 0.6), rgba(126, 53, 71, 0));
  opacity: 0.85;
}

.letter-section .section-head {
  text-align: center;
  margin-bottom: 2px;
  position: relative;
  z-index: 1;
  gap: 8px;
}

.letter-kicker {
  justify-self: center;
  display: inline-flex;
  align-items: center;
  gap: 7px;
  padding: 5px 12px;
  border-radius: 999px;
  border: 1px solid rgba(152, 62, 84, 0.36);
  background: rgba(255, 250, 236, 0.92);
  color: rgba(107, 31, 49, 0.86);
  font-family: "Cinzel", serif;
  font-size: 0.66rem;
  text-transform: uppercase;
  letter-spacing: 0.18em;
}

.letter-section .section-head h2 {
  margin: 0;
  font-size: clamp(1.84rem, 4.3vw, 2.45rem);
  line-height: 1.05;
  color: #5f1734;
}

.letter-section .section-head p {
  max-width: 640px;
  margin: 0 auto;
  color: rgba(76, 25, 37, 0.78);
}

.letter-curtain {
  position: absolute;
  top: -72px;
  width: clamp(104px, 15vw, 150px);
  height: clamp(170px, 24vw, 230px);
  border-radius: 0 0 88px 88px;
  background:
    repeating-linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.12) 0 9px,
      rgba(255, 255, 255, 0) 9px 20px
    ),
    linear-gradient(90deg, rgba(120, 24, 48, 0.94), rgba(164, 44, 81, 0.95) 50%, rgba(120, 24, 48, 0.94));
  box-shadow:
    inset 0 -24px 36px rgba(52, 8, 20, 0.28),
    0 18px 26px rgba(73, 15, 29, 0.3);
  opacity: 0.56;
  z-index: 0;
  pointer-events: none;
  transform-origin: center top;
  animation: letterCurtainSway calc(var(--motion-ring-duration) + 1.6s) ease-in-out infinite;
}

.letter-curtain::after {
  content: "";
  position: absolute;
  left: 18%;
  right: 18%;
  bottom: 18px;
  height: 11px;
  border-radius: 999px;
  background: rgba(245, 203, 125, 0.7);
}

.letter-curtain-left {
  left: -58px;
  --curtain-angle: -8deg;
}

.letter-curtain-right {
  right: -58px;
  --curtain-angle: 8deg;
  animation-delay: 0.55s;
}

.letter-shimmer {
  position: absolute;
  inset: 6px;
  border-radius: 22px;
  pointer-events: none;
  z-index: 0;
  background: linear-gradient(120deg, transparent 28%, rgba(255, 255, 255, 0.32) 50%, transparent 74%);
  transform: translateX(-42%);
  animation: letterShimmerDrift calc(var(--motion-bg-speed-alt) * 0.24) ease-in-out infinite;
}

.letter-vibes {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  position: relative;
  z-index: 1;
}

.letter-vibes span {
  display: inline-flex;
  align-items: center;
  gap: 7px;
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid rgba(151, 66, 84, 0.34);
  background: linear-gradient(145deg, rgba(255, 251, 241, 0.95), rgba(245, 222, 200, 0.93));
  color: rgba(96, 27, 47, 0.86);
  font-size: 0.82rem;
  letter-spacing: 0.05em;
  box-shadow: 0 9px 14px rgba(120, 32, 58, 0.14);
  animation: letterChipFloat var(--motion-tag-duration) ease-in-out infinite;
}

.letter-vibes .icon-glyph {
  width: 13px;
  height: 13px;
}

.letter-royal-bar {
  justify-self: center;
  display: inline-flex;
  align-items: center;
  gap: 9px;
  padding: 6px 15px;
  border-radius: 999px;
  background: linear-gradient(140deg, rgba(111, 24, 47, 0.9), rgba(145, 40, 67, 0.94));
  border: 1px solid rgba(250, 224, 170, 0.42);
  color: #fff2dc;
  font-family: "Cinzel", serif;
  font-size: 0.67rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  box-shadow: 0 12px 20px rgba(91, 20, 39, 0.25);
  position: relative;
  z-index: 1;
}

.letter-royal-mark {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  background: rgba(248, 208, 118, 0.9);
  color: rgba(102, 29, 44, 0.88);
  box-shadow: inset 0 0 0 1px rgba(105, 30, 47, 0.2);
}

.letter-royal-mark .icon-glyph {
  width: 12px;
  height: 12px;
}

.letter-vibes span:nth-child(2),
.letter-vibes span:nth-child(5) {
  animation-delay: 0.28s;
}

.letter-vibes span:nth-child(3),
.letter-vibes span:nth-child(6) {
  animation-delay: 0.56s;
}

.letter-vibes span:nth-child(4) {
  animation-delay: 0.84s;
}

.letter-launcher {
  width: min(620px, 94vw);
  margin: 10px auto 0;
  border: 1px solid rgba(130, 56, 76, 0.36);
  border-radius: 26px;
  background:
    radial-gradient(circle at 50% -8%, rgba(255, 247, 227, 0.74), transparent 62%),
    linear-gradient(165deg, rgba(255, 247, 237, 0.98), rgba(242, 205, 183, 0.9));
  padding: 34px 18px 24px;
  display: grid;
  place-items: center;
  gap: 11px;
  position: relative;
  cursor: pointer;
  overflow: visible;
  isolation: isolate;
  box-shadow:
    inset 0 0 0 1px rgba(255, 255, 255, 0.72),
    0 28px 42px rgba(105, 24, 44, 0.22);
  transition: transform 0.35s ease, box-shadow 0.35s ease, border-color 0.35s ease;
}

.letter-launcher::before {
  content: "";
  position: absolute;
  inset: 8px;
  border: 1px dashed rgba(130, 56, 76, 0.3);
  border-radius: 20px;
  pointer-events: none;
  z-index: 0;
  animation: letterRingSpin var(--motion-ring-duration) linear infinite;
}

.letter-launcher::after {
  content: "";
  position: absolute;
  left: 16%;
  right: 16%;
  bottom: 14px;
  height: 1px;
  pointer-events: none;
  background: linear-gradient(90deg, rgba(118, 41, 61, 0), rgba(118, 41, 61, 0.62), rgba(118, 41, 61, 0));
}

.letter-launcher-glow {
  position: absolute;
  left: 20%;
  right: 20%;
  bottom: 26px;
  height: 34px;
  border-radius: 999px;
  background: radial-gradient(ellipse at center, rgba(114, 19, 43, 0.32), rgba(114, 19, 43, 0));
  filter: blur(5px);
  pointer-events: none;
  animation: letterGlowPulse var(--motion-glow-duration) ease-in-out infinite;
}

.letter-launcher-orbit {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
}

.letter-orbit-item {
  position: absolute;
  width: 34px;
  height: 34px;
  border-radius: 12px;
  display: grid;
  place-items: center;
  background: linear-gradient(155deg, rgba(255, 252, 244, 0.95), rgba(247, 221, 202, 0.94));
  border: 1px solid rgba(141, 58, 79, 0.32);
  box-shadow: 0 10px 16px rgba(104, 23, 42, 0.18);
  color: rgba(112, 32, 54, 0.9);
  animation: letterOrbitFloat var(--motion-orbit-duration) ease-in-out infinite;
}

.letter-orbit-item .icon-glyph {
  width: 15px;
  height: 15px;
}

.letter-orbit-item-1 {
  left: 6%;
  top: 13%;
  animation-delay: 0s;
}

.letter-orbit-item-2 {
  left: 29%;
  top: 4%;
  animation-delay: 0.2s;
}

.letter-orbit-item-3 {
  right: 29%;
  top: 4%;
  animation-delay: 0.4s;
}

.letter-orbit-item-4 {
  right: 6%;
  top: 13%;
  animation-delay: 0.6s;
}

.letter-orbit-item-5 {
  right: 7%;
  bottom: 18%;
  animation-delay: 0.8s;
}

.letter-orbit-item-6 {
  right: 30%;
  bottom: 7%;
  animation-delay: 1s;
}

.letter-orbit-item-7 {
  left: 30%;
  bottom: 7%;
  animation-delay: 1.2s;
}

.letter-orbit-item-8 {
  left: 7%;
  bottom: 18%;
  animation-delay: 1.4s;
}

.letter-launcher-envelope {
  position: relative;
  width: min(390px, 78vw);
  height: 212px;
  border-radius: 24px;
  overflow: hidden;
  z-index: 2;
  box-shadow: 0 16px 26px rgba(100, 24, 44, 0.2);
  animation: letterEnvelopeBreathe var(--motion-envelope-duration) ease-in-out infinite;
}

.letter-launcher-back {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background:
    radial-gradient(circle at 50% 26%, rgba(255, 248, 226, 0.54), transparent 44%),
    linear-gradient(150deg, #ffe3cb, #efc4a8);
  border: 1px solid rgba(163, 92, 74, 0.35);
  box-shadow: inset 0 0 24px rgba(157, 83, 63, 0.22);
}

.letter-launcher-fold {
  position: absolute;
  inset: 0;
  clip-path: polygon(0 0, 50% 58%, 100% 0, 100% 100%, 0 100%);
  background: linear-gradient(145deg, rgba(236, 170, 145, 0.88), rgba(221, 132, 120, 0.92));
  border: 1px solid rgba(157, 74, 77, 0.3);
}

.letter-launcher-parchment {
  position: absolute;
  left: 50%;
  top: 19%;
  transform: translateX(-50%);
  width: 74%;
  height: 58%;
  border-radius: 16px;
  border: 1px solid rgba(157, 105, 64, 0.38);
  background: linear-gradient(180deg, rgba(255, 247, 225, 0.99), rgba(245, 219, 182, 0.95));
  box-shadow:
    inset 0 0 0 1px rgba(255, 255, 255, 0.56),
    0 10px 16px rgba(98, 55, 35, 0.16);
  padding: 13px 14px;
  display: grid;
  align-content: center;
  justify-items: start;
  gap: 7px;
  z-index: 2;
  animation: letterParchmentHover calc(var(--motion-envelope-duration) * 0.9) ease-in-out infinite;
}

.letter-parchment-title {
  font-family: "Cinzel", serif;
  font-size: 0.75rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: rgba(102, 42, 41, 0.9);
}

.letter-parchment-line {
  width: 100%;
  height: 2px;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(137, 72, 56, 0.62), rgba(137, 72, 56, 0.16));
}

.letter-parchment-line.short {
  width: 66%;
}

.letter-launcher-seal {
  position: absolute;
  bottom: 14px;
  left: 50%;
  transform: translateX(-50%);
  width: 74px;
  height: 74px;
  border-radius: 50%;
  display: inline-grid;
  place-items: center;
  align-content: center;
  gap: 2px;
  font-family: "Cinzel", serif;
  color: #fff5e5;
  background: radial-gradient(circle at 30% 30%, #cf4f73, #751533);
  border: 3px double rgba(255, 241, 216, 0.92);
  box-shadow: 0 14px 24px rgba(92, 20, 40, 0.34);
  z-index: 3;
  animation: letterSealBounce calc(var(--motion-envelope-duration) * 0.82) ease-in-out infinite;
}

.letter-launcher-seal .icon-glyph {
  width: 16px;
  height: 16px;
}

.letter-launcher-seal small {
  display: block;
  font-size: 0.62rem;
  letter-spacing: 0.18em;
  line-height: 1;
}

.letter-launcher-title {
  font-family: "Cinzel", serif;
  text-transform: uppercase;
  letter-spacing: 0.22em;
  font-size: 0.82rem;
  color: rgba(92, 24, 42, 0.9);
}

.letter-launcher-caption {
  font-size: 0.9rem;
  color: rgba(72, 19, 31, 0.72);
  margin: 0;
}

.letter-launcher:hover {
  transform: translateY(-5px) scale(1.01);
  box-shadow:
    inset 0 0 0 1px rgba(255, 255, 255, 0.75),
    0 32px 44px rgba(99, 22, 41, 0.28);
  border-color: rgba(130, 56, 76, 0.5);
}

.letter-launcher:hover .letter-orbit-item {
  animation-duration: calc(var(--motion-orbit-duration) * 0.8);
}

.letter-launcher:hover .letter-launcher-envelope {
  animation-duration: calc(var(--motion-envelope-duration) * 0.7);
}

.letter-courtline {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  position: relative;
  z-index: 1;
}

.letter-courtline span {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 5px 11px;
  border-radius: 999px;
  border: 1px solid rgba(135, 61, 79, 0.26);
  background: rgba(255, 250, 240, 0.9);
  color: rgba(94, 29, 49, 0.82);
  font-size: 0.76rem;
  letter-spacing: 0.03em;
  box-shadow: 0 7px 12px rgba(105, 27, 46, 0.11);
  animation: letterCourtPulse calc(var(--motion-tag-duration) * 1.1) ease-in-out infinite;
}

.letter-courtline .icon-glyph {
  width: 12px;
  height: 12px;
}

.letter-courtline span:nth-child(2) {
  animation-delay: 0.3s;
}

.letter-courtline span:nth-child(3) {
  animation-delay: 0.6s;
}

.letter-note {
  margin: 0;
  color: rgba(76, 24, 36, 0.75);
  font-size: 0.95rem;
  position: relative;
  z-index: 1;
}

.letter-accents {
  display: inline-flex;
  justify-self: center;
  align-items: center;
  gap: 10px;
  position: relative;
  z-index: 1;
}

.letter-accent {
  width: 26px;
  height: 26px;
  border-radius: 10px;
  display: grid;
  place-items: center;
  background: linear-gradient(150deg, rgba(255, 250, 240, 0.95), rgba(249, 225, 203, 0.94));
  border: 1px solid rgba(141, 59, 81, 0.27);
  box-shadow: 0 8px 12px rgba(105, 25, 45, 0.13);
  color: rgba(112, 30, 56, 0.9);
  animation: letterAccentPulse var(--motion-accent-duration) ease-in-out infinite;
}

.letter-accent .icon-glyph {
  width: 12px;
  height: 12px;
}

.letter-accent-2,
.letter-accent-4 {
  animation-delay: 0.3s;
}

.letter-accent-3,
.letter-accent-5 {
  animation-delay: 0.6s;
}

.letter-doodles {
  display: inline-flex;
  justify-self: center;
  align-items: center;
  gap: 10px;
  position: relative;
  z-index: 1;
}

.letter-doodles span {
  width: 30px;
  height: 30px;
  border-radius: 10px;
  display: grid;
  place-items: center;
  background: linear-gradient(150deg, rgba(255, 255, 246, 0.93), rgba(247, 225, 205, 0.92));
  border: 1px solid rgba(148, 64, 83, 0.3);
  box-shadow: 0 8px 13px rgba(104, 27, 44, 0.14);
  animation: doodleFloat var(--motion-doodle-duration) ease-in-out infinite;
  color: rgba(111, 31, 56, 0.9);
}

.letter-doodles .icon-glyph {
  width: 14px;
  height: 14px;
}

.letter-doodles span:nth-child(2),
.letter-doodles span:nth-child(4) {
  animation-delay: 0.3s;
}

.letter-doodles span:nth-child(3),
.letter-doodles span:nth-child(5) {
  animation-delay: 0.6s;
}

.letter-doodles span:nth-child(6) {
  animation-delay: 0.9s;
}

.letter-doodles span:nth-child(7) {
  animation-delay: 1.2s;
}

@keyframes letterChipFloat {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(calc(var(--motion-tag-lift) * -1));
  }
}

@keyframes letterCourtPulse {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(calc(var(--motion-tag-lift) * -0.7));
  }
}

@keyframes letterRingSpin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes letterGlowPulse {
  0%,
  100% {
    transform: scale(1);
    opacity: 0.78;
  }
  50% {
    transform: scale(1.12);
    opacity: 1;
  }
}

@keyframes letterOrbitFloat {
  0%,
  100% {
    transform: translateY(0) rotate(0deg) scale(1);
  }
  50% {
    transform: translateY(calc(var(--motion-lift) * -0.8)) rotate(5deg) scale(var(--motion-sticker-scale));
  }
}

@keyframes letterEnvelopeBreathe {
  0%,
  100% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(calc(var(--motion-lift) * -0.4)) scale(1.02);
  }
}

@keyframes letterParchmentHover {
  0%,
  100% {
    transform: translateX(-50%) translateY(0);
  }
  50% {
    transform: translateX(-50%) translateY(-3px);
  }
}

@keyframes letterSealBounce {
  0%,
  100% {
    transform: translateX(-50%) scale(1);
  }
  50% {
    transform: translateX(-50%) translateY(-2px) scale(1.08);
  }
}

@keyframes letterAccentPulse {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

@keyframes doodleFloat {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(calc(var(--motion-lift) * -1));
  }
}

@keyframes letterCurtainSway {
  0%,
  100% {
    transform: rotate(var(--curtain-angle)) translateY(0);
  }
  50% {
    transform: rotate(calc(var(--curtain-angle) + 2deg)) translateY(-3px);
  }
}

@keyframes letterShimmerDrift {
  0%,
  100% {
    transform: translateX(-42%);
    opacity: 0.46;
  }
  50% {
    transform: translateX(42%);
    opacity: 0.68;
  }
}

.section-room {
  position: fixed;
  inset: 0;
  z-index: 110;
  background:
    radial-gradient(circle at 20% 10%, rgba(255, 255, 255, 0.82), transparent 45%),
    radial-gradient(circle at 80% 20%, rgba(255, 231, 240, 0.7), transparent 50%),
    linear-gradient(180deg, #fff4f8 0%, #f7d0de 55%, #efb1c6 100%);
  opacity: 0;
  pointer-events: none;
  transform: translateY(16px);
  transition: opacity 0.5s ease, transform 0.6s ease;
  overflow: auto;
}

.section-room::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.16;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='90' height='90' viewBox='0 0 24 24'><path fill='%23d44a6f' d='M12 21s-8-5.6-8-10a5 5 0 0 1 9-3 5 5 0 0 1 9 3c0 4.4-8 10-8 10z'/></svg>");
  background-size: 120px 120px;
  background-position: 20px 10px;
}

.section-room.is-open {
  opacity: 1;
  transform: none;
  pointer-events: auto;
}

.section-room[data-section="timeline"]::before {
  display: none;
}

.section-room[data-section="music"] {
  background:
    radial-gradient(circle at 12% 10%, rgba(255, 249, 223, 0.9), transparent 46%),
    radial-gradient(circle at 88% 16%, rgba(255, 230, 246, 0.74), transparent 52%),
    linear-gradient(180deg, #fff8f0 0%, #f7d9e1 60%, #efbfd1 100%);
  overflow-y: auto;
  overflow-x: hidden;
}

.section-room[data-section="music"]::before {
  display: none;
}

.section-room[data-section="music"] .section-room-stage {
  height: auto;
  min-height: 100dvh;
  overflow: visible;
  z-index: 2;
  padding: clamp(84px, 9vh, 106px) clamp(14px, 2vw, 24px) clamp(62px, 8vh, 94px);
}

.section-room-music-fx {
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 6;
  opacity: 0.96;
  mix-blend-mode: normal;
  filter: none;
  transform: translateZ(0);
  will-change: opacity;
}

.section-room-music-sakura {
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 7;
  opacity: 1;
  mix-blend-mode: normal;
  transform: translateZ(0);
  will-change: opacity;
}

.section-room-music-branches {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 8;
}

.section-room-music-branch {
  position: absolute;
  pointer-events: none;
  opacity: 0.88;
  filter: drop-shadow(0 12px 18px rgba(118, 65, 35, 0.18));
}

.section-room-music-branch svg {
  width: 100%;
  height: 100%;
  display: block;
}

.section-room-music-branch.branch-left {
  top: -10px;
  left: clamp(-24px, 1vw, 12px);
  width: clamp(320px, 42vw, 620px);
  height: clamp(110px, 16vw, 220px);
  transform-origin: left top;
  animation: musicBranchSwayA 8.2s ease-in-out infinite alternate;
}

.section-room-music-branch.branch-mid {
  top: -12px;
  left: clamp(30%, 35vw, 42%);
  width: clamp(220px, 24vw, 390px);
  height: clamp(100px, 14vw, 210px);
  transform-origin: top center;
  opacity: 0.82;
  animation: musicBranchSwayB 9.8s ease-in-out infinite alternate;
}

.section-room-music-branch.branch-right {
  top: -6px;
  right: clamp(-36px, -2vw, -14px);
  width: clamp(290px, 34vw, 560px);
  height: clamp(108px, 15vw, 220px);
  transform-origin: right top;
  opacity: 0.84;
  transform: scaleX(-1);
  animation: musicBranchSwayC 8.8s ease-in-out infinite alternate;
}

.section-room-music-branch.branch-top-center {
  top: -18px;
  left: clamp(44%, 50vw, 56%);
  width: clamp(230px, 26vw, 500px);
  height: clamp(100px, 15vw, 220px);
  transform-origin: top center;
  opacity: 0.74;
  animation: musicBranchSwayD 10.4s ease-in-out infinite alternate;
}

.section-room-music-branch.branch-cascade-right {
  top: -2px;
  right: clamp(-16px, 2vw, 34px);
  width: clamp(170px, 19vw, 280px);
  height: clamp(124px, 19vw, 260px);
  transform-origin: right top;
  opacity: 0.76;
  animation: musicBranchSwayE 9.2s ease-in-out infinite alternate;
}

.music-branch-main {
  fill: none;
  stroke: rgba(129, 78, 43, 0.84);
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-width: 6;
}

.music-branch-twig {
  fill: none;
  stroke: rgba(137, 83, 48, 0.68);
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-width: 3.2;
}

.music-branch-bloom-a {
  fill: rgba(255, 196, 221, 0.92);
  stroke: rgba(255, 234, 243, 0.72);
  stroke-width: 1.2;
}

.music-branch-bloom-b {
  fill: rgba(244, 156, 196, 0.9);
  stroke: rgba(255, 218, 234, 0.64);
  stroke-width: 1;
}

.music-branch-bloom-c {
  fill: rgba(237, 137, 184, 0.88);
  stroke: rgba(255, 205, 228, 0.58);
  stroke-width: 1;
}

.music-branch-heart {
  fill: rgba(224, 84, 145, 0.8);
}

.music-branch-drop {
  fill: rgba(255, 196, 221, 0.94);
  stroke: rgba(255, 228, 240, 0.72);
  stroke-width: 1;
  transform-box: fill-box;
  transform-origin: center;
  opacity: 0;
  animation: musicBranchDrop 3.8s ease-in infinite;
}

.music-branch-drop.delay-a {
  animation-delay: 0.4s;
}

.music-branch-drop.delay-b {
  animation-delay: 1.1s;
}

.music-branch-drop.delay-c {
  animation-delay: 1.8s;
}

.music-branch-drop.delay-d {
  animation-delay: 2.4s;
}

.section-room-music-bokeh {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  opacity: 0.32;
  filter: blur(8px);
  background:
    radial-gradient(120px 120px at 10% 20%, rgba(255, 180, 200, 0.35), transparent 60%),
    radial-gradient(180px 180px at 80% 30%, rgba(255, 220, 230, 0.3), transparent 60%),
    radial-gradient(140px 140px at 40% 80%, rgba(255, 170, 210, 0.25), transparent 60%),
    radial-gradient(220px 220px at 90% 85%, rgba(255, 240, 245, 0.35), transparent 60%);
  animation: bokehFloat 12s ease-in-out infinite alternate;
}

body.motion-soft .section-room-music-floral-fx,
body.motion-soft .section-room-music-sakura,
body.motion-soft .section-room-music-branches,
body.motion-soft .section-room-music-bokeh {
  display: none;
}

body.motion-soft .section-room-music-fx {
  opacity: 0.72;
}

@keyframes bokehFloat {
  from {
    transform: translate3d(0, 0, 0) scale(1);
  }
  to {
    transform: translate3d(-12px, 10px, 0) scale(1.02);
  }
}

@keyframes musicBranchSwayA {
  from {
    transform: rotate(-1.4deg) translate3d(0, 0, 0);
  }
  to {
    transform: rotate(1.6deg) translate3d(4px, 1px, 0);
  }
}

@keyframes musicBranchSwayB {
  from {
    transform: rotate(-2deg) translate3d(0, 0, 0);
  }
  to {
    transform: rotate(1.8deg) translate3d(-2px, 2px, 0);
  }
}

@keyframes musicBranchSwayC {
  from {
    transform: scaleX(-1) rotate(-1deg) translate3d(0, 0, 0);
  }
  to {
    transform: scaleX(-1) rotate(1.5deg) translate3d(-3px, 1px, 0);
  }
}

@keyframes musicBranchSwayD {
  from {
    transform: rotate(-1.2deg) translate3d(0, 0, 0);
  }
  to {
    transform: rotate(1.4deg) translate3d(-2px, 2px, 0);
  }
}

@keyframes musicBranchSwayE {
  from {
    transform: rotate(-1.5deg) translate3d(0, 0, 0);
  }
  to {
    transform: rotate(1.8deg) translate3d(1px, 2px, 0);
  }
}

@keyframes musicBranchDrop {
  0% {
    opacity: 0;
    transform: translate3d(0, 0, 0) scale(0.82);
  }
  24% {
    opacity: 0.86;
  }
  100% {
    opacity: 0;
    transform: translate3d(-5px, 34px, 0) scale(0.62);
  }
}

.section-room[data-section="music"] .section-room-header,
.section-room[data-section="music"] .section-room-body {
  width: min(1320px, 96vw);
}

.section-room[data-section="music"] .section-room-body {
  flex: 1 1 auto;
  min-height: 0;
  overflow: visible;
  overscroll-behavior: auto;
  padding-right: 0;
  scrollbar-gutter: auto;
}

.section-room[data-section="music"] .section-room-body::-webkit-scrollbar {
  width: 6px;
}

.section-room[data-section="music"] .section-room-body::-webkit-scrollbar-thumb {
  border-radius: 999px;
  background: rgba(166, 41, 84, 0.2);
  border: none;
}

.section-room[data-section="gallery"] {
  background:
    radial-gradient(circle at 12% 12%, rgba(244, 242, 255, 0.86), transparent 44%),
    radial-gradient(circle at 84% 18%, rgba(255, 230, 244, 0.72), transparent 52%),
    linear-gradient(180deg, #fdf9ff 0%, #f2dbea 60%, #eabfd5 100%);
}

.section-room[data-section="puzzle"] {
  background:
    radial-gradient(circle at 14% 14%, rgba(236, 244, 255, 0.86), transparent 42%),
    radial-gradient(circle at 84% 20%, rgba(255, 231, 244, 0.7), transparent 54%),
    linear-gradient(180deg, #f8f8ff 0%, #eadced 56%, #dfc1d6 100%);
}

.section-room[data-section="letter"] .section-room-title {
  color: #7d1632;
}

.section-room[data-section="timeline"] .section-room-title {
  color: #6f152f;
}

.section-room[data-section="music"] .section-room-title {
  color: #825319;
  font-size: clamp(2.2rem, 3.4vw, 3rem);
}

.section-room[data-section="gallery"] .section-room-title {
  color: #7a1a58;
}

.section-room[data-section="puzzle"] .section-room-title {
  color: #3f2354;
}

.section-room-stage {
  min-height: 100svh;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 18px;
  padding: 96px 20px 88px;
  position: relative;
}

.section-room-header {
  width: min(1120px, 92vw);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 18px;
  flex-wrap: wrap;
}

.section-room-eyebrow {
  text-transform: uppercase;
  letter-spacing: 0.24em;
  font-size: 0.7rem;
  color: rgba(90, 13, 28, 0.7);
}

.section-room-title {
  margin: 6px 0 6px;
  font-size: 2rem;
  color: var(--wine);
}

.section-room-subtitle {
  margin: 0;
  color: rgba(43, 11, 16, 0.7);
}

.section-room-actions {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.section-room-body {
  width: min(1120px, 92vw);
}

.section-room-body .section {
  margin-top: 0;
}

.section-room-body {
  position: relative;
  transition: opacity 0.3s ease, transform 0.35s cubic-bezier(0.22, 1, 0.36, 1), filter 0.3s ease;
}

.section-room-body.is-switching {
  opacity: 0;
  filter: blur(6px);
  transform: translateY(8px);
}

.section-room-body::after {
  content: "";
  position: absolute;
  inset: -25%;
  background:
    radial-gradient(circle at 25% 30%, rgba(255, 214, 230, 0.55), transparent 55%),
    radial-gradient(circle at 70% 45%, rgba(255, 244, 214, 0.45), transparent 60%);
  opacity: 0;
  pointer-events: none;
}

.section-room-body.is-switching::after {
  animation: lovePulse 0.6s ease;
}

.section-room-panel {
  animation: roomIn var(--motion-room-duration) ease;
}

@keyframes roomIn {
  from {
    opacity: 0;
    transform: translateY(22px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes iconGlow {
  0% {
    box-shadow: 0 10px 18px rgba(201, 44, 85, 0.25);
  }
  50% {
    box-shadow: 0 0 0 10px rgba(201, 44, 85, 0.12);
  }
  100% {
    box-shadow: 0 10px 18px rgba(201, 44, 85, 0.25);
  }
}

@keyframes lovePulse {
  0% {
    opacity: 0;
    transform: scale(0.96);
  }
  45% {
    opacity: 0.5;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(1.04);
  }
}

.letter-room {
  position: fixed;
  inset: 0;
  z-index: 120;
  background:
    radial-gradient(circle at 20% 10%, rgba(255, 255, 255, 0.82), transparent 45%),
    radial-gradient(circle at 80% 20%, rgba(255, 231, 240, 0.7), transparent 50%),
    linear-gradient(180deg, #fff4f8 0%, #f7d0de 55%, #efb1c6 100%);
  opacity: 0;
  pointer-events: none;
  transform: translateY(16px);
  transition: opacity 0.5s ease, transform 0.6s ease;
  overflow: hidden;
}

.letter-room::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.16;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='90' height='90' viewBox='0 0 24 24'><path fill='%23d44a6f' d='M12 21s-8-5.6-8-10a5 5 0 0 1 9-3 5 5 0 0 1 9 3c0 4.4-8 10-8 10z'/></svg>");
  background-size: 120px 120px;
  background-position: 20px 10px;
}

.letter-room.is-open {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.letter-room-stage {
  height: 100dvh;
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
  max-width: 100vw;
  gap: clamp(10px, 2vh, 18px);
  padding: clamp(18px, 4vh, 52px) 20px clamp(14px, 3vh, 28px);
  position: relative;
  overflow: hidden;
}

.letter-room-header {
  width: min(980px, 94vw);
  max-width: 980px;
  text-align: center;
  display: grid;
  gap: 6px;
  margin-inline: auto;
  justify-items: center;
}

.letter-room-eyebrow {
  text-transform: uppercase;
  letter-spacing: 0.24em;
  font-size: 0.7rem;
  color: rgba(90, 13, 28, 0.7);
}

.letter-room-title {
  margin: 0;
  font-size: clamp(1.65rem, 2.8vw, 2.15rem);
  color: var(--wine);
}

.letter-room-description {
  margin: 0;
  font-size: 1rem;
  color: rgba(66, 16, 26, 0.76);
}

.letter-room-shell {
  width: min(980px, 94vw);
  max-width: 980px;
  margin-inline: auto;
  flex: 1 1 auto;
  min-height: 0;
  align-self: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: clamp(8px, 1.4vh, 12px);
  overflow: hidden;
}

.letter-room-canvas {
  width: min(720px, 94vw);
  margin-inline: auto;
  min-height: clamp(240px, 42vh, 360px);
  max-height: calc(100dvh - 210px);
  display: grid;
  place-items: center;
  position: relative;
  transition: min-height 0.45s ease, max-height 0.45s ease;
}

.letter-room-canvas.is-open {
  min-height: clamp(360px, 58vh, 560px);
  max-height: calc(100dvh - 180px);
}

.cat-storm {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 62;
  overflow: hidden;
}

.cat-storm-item {
  position: absolute;
  left: 50%;
  top: 0;
  width: clamp(92px, 11.5vw, 200px);
  height: clamp(92px, 11.5vw, 200px);
  opacity: 0;
  filter: drop-shadow(0 18px 20px rgba(95, 20, 47, 0.24));
  user-select: none;
}

.cat-storm-item svg {
  width: 100%;
  height: 100%;
  display: block;
}

.cat-burst {
  position: absolute;
  left: 50%;
  top: 22px;
  width: min(760px, 96vw);
  height: 520px;
  transform: translateX(-50%);
  pointer-events: none;
  z-index: 46;
  overflow: visible;
}

.cat-fall {
  position: absolute;
  left: 50%;
  top: 0;
  width: clamp(28px, 3.2vw, 42px);
  height: clamp(28px, 3.2vw, 42px);
  opacity: 0;
  filter: drop-shadow(0 8px 10px rgba(78, 14, 33, 0.24));
  user-select: none;
}

.cat-fall.is-paw {
  width: clamp(24px, 2.8vw, 36px);
  height: clamp(24px, 2.8vw, 36px);
}

.cat-fall svg {
  width: 100%;
  height: 100%;
  display: block;
}

.cat-fall .k-cat-base,
.cat-storm-item .k-cat-base {
  fill: #ffe4f1;
  stroke: rgba(191, 58, 97, 0.36);
  stroke-width: 1.9;
}

.cat-fall .k-cat-base-alt,
.cat-storm-item .k-cat-base-alt {
  fill: #ffdced;
  stroke: rgba(191, 58, 97, 0.36);
  stroke-width: 1.9;
}

.cat-fall .k-cat-inner,
.cat-storm-item .k-cat-inner {
  fill: rgba(255, 245, 250, 0.86);
}

.cat-fall .k-cat-eye,
.cat-storm-item .k-cat-eye {
  fill: #8c2a52;
}

.cat-fall .k-cat-line,
.cat-storm-item .k-cat-line {
  fill: none;
  stroke: #8c2a52;
  stroke-width: 1.8;
  stroke-linecap: round;
}

.cat-fall .k-cat-cheek,
.cat-storm-item .k-cat-cheek {
  fill: rgba(255, 171, 206, 0.72);
}

.cat-fall .k-cat-accent,
.cat-storm-item .k-cat-accent {
  fill: #f6a8c8;
}

.love-envelope {
  position: relative;
  width: min(560px, 90vw);
  height: 280px;
  cursor: pointer;
  perspective: 1400px;
  transform-style: preserve-3d;
  filter: drop-shadow(0 18px 30px rgba(120, 32, 58, 0.26));
  outline: none;
}

.love-envelope:focus-visible {
  outline: 2px solid var(--gold);
  outline-offset: 6px;
}

.love-envelope.is-open {
  cursor: pointer;
}

.love-envelope-glow {
  position: absolute;
  left: 12%;
  right: 12%;
  bottom: 10px;
  height: 24px;
  border-radius: 999px;
  background: radial-gradient(ellipse at center, rgba(120, 32, 58, 0.38), rgba(120, 32, 58, 0));
  transform-origin: center;
  z-index: 0;
  filter: blur(2px);
}

.love-envelope-ears {
  position: absolute;
  top: -18px;
  left: 50%;
  width: 186px;
  height: 42px;
  transform: translateX(-50%);
  pointer-events: none;
  z-index: 13;
}

.cat-ear {
  position: absolute;
  width: 40px;
  height: 34px;
  clip-path: polygon(50% 0, 0 100%, 100% 100%);
  background: linear-gradient(180deg, #f7b8d3, #ec8eb5);
  border: 1px solid rgba(191, 58, 97, 0.34);
}

.cat-ear::after {
  content: "";
  position: absolute;
  inset: 8px 9px 4px;
  clip-path: polygon(50% 0, 0 100%, 100% 100%);
  background: rgba(255, 240, 248, 0.74);
}

.cat-ear-left {
  left: 24px;
  transform: rotate(-14deg);
}

.cat-ear-right {
  right: 24px;
  transform: rotate(14deg);
}

.love-envelope-body,
.love-envelope-pocket,
.love-envelope-flap {
  position: absolute;
  inset: 0;
  border-radius: 20px;
}

.love-envelope-body {
  background: linear-gradient(155deg, #ffe7f0, #f2b0ca);
  border: 1px solid rgba(212, 74, 111, 0.34);
  box-shadow:
    inset 0 0 24px rgba(212, 74, 111, 0.16),
    inset 0 -26px 36px rgba(192, 64, 102, 0.12);
  z-index: 2;
}

.love-envelope-pocket {
  clip-path: polygon(0 0, 50% 56%, 100% 0, 100% 100%, 0 100%);
  background: linear-gradient(145deg, rgba(248, 184, 207, 0.92), rgba(235, 145, 181, 0.95));
  border: 1px solid rgba(191, 58, 97, 0.3);
  z-index: 10;
}

.love-envelope-flap {
  height: 54%;
  background: linear-gradient(180deg, #f6c7d9, #eda7c4);
  clip-path: polygon(0 0, 100% 0, 50% 100%);
  transform-origin: 50% 0%;
  backface-visibility: hidden;
  border: 1px solid rgba(191, 58, 97, 0.3);
  z-index: 11;
}

.love-envelope-seal {
  position: absolute;
  bottom: 22px;
  left: 50%;
  transform: translateX(-50%);
  width: 66px;
  height: 66px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #cc2f58, #7f1632);
  color: #fff0f6;
  display: grid;
  place-items: center;
  font-family: "Cinzel", serif;
  letter-spacing: 0.1em;
  box-shadow: 0 12px 22px rgba(120, 32, 58, 0.35);
  border: 3px double rgba(255, 238, 245, 0.9);
  z-index: 12;
}

.love-envelope-whiskers {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 11;
}

.cat-whiskers {
  position: absolute;
  bottom: 56px;
  display: grid;
  gap: 8px;
}

.cat-whiskers-left {
  right: calc(50% + 34px);
  transform: scaleX(-1);
}

.cat-whiskers-right {
  left: calc(50% + 34px);
}

.cat-whisker-line {
  width: 58px;
  height: 2px;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(255, 245, 250, 0.98), rgba(255, 220, 236, 0.72));
  box-shadow: 0 3px 8px rgba(120, 32, 58, 0.16);
  transform-origin: left center;
}

.cat-whisker-line:nth-child(1) {
  transform: rotate(-13deg);
}

.cat-whisker-line:nth-child(2) {
  transform: rotate(0deg);
}

.cat-whisker-line:nth-child(3) {
  transform: rotate(13deg);
}

.love-envelope-paws {
  position: absolute;
  left: 18px;
  right: 18px;
  bottom: 14px;
  display: flex;
  justify-content: space-between;
  pointer-events: none;
  z-index: 12;
}

.cat-paw {
  position: relative;
  width: 28px;
  height: 14px;
  border-radius: 999px 999px 70% 70%;
  background: rgba(255, 240, 248, 0.9);
  border: 1px solid rgba(191, 58, 97, 0.24);
  box-shadow: 0 6px 10px rgba(120, 32, 58, 0.14);
}

.cat-paw::before {
  content: "";
  position: absolute;
  left: 2px;
  top: -9px;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(255, 240, 248, 0.96);
  border: 1px solid rgba(191, 58, 97, 0.24);
  box-shadow:
    9px -1px 0 rgba(255, 240, 248, 0.96),
    18px 0 0 rgba(255, 240, 248, 0.96);
}

.paw-left {
  transform: rotate(-10deg);
}

.paw-right {
  transform: rotate(10deg) scaleX(-1);
}

.love-envelope-letter {
  position: absolute;
  left: 50%;
  bottom: 26px;
  width: min(420px, 72vw);
  height: 220px;
  transform-origin: 50% 85%;
  z-index: 7;
  pointer-events: none;
}

.love-envelope-paper {
  width: 100%;
  height: 100%;
  border-radius: 14px;
  background: linear-gradient(180deg, #fffefc, #fff8fb);
  box-shadow:
    0 16px 30px rgba(120, 32, 58, 0.2),
    inset 0 0 0 1px rgba(212, 74, 111, 0.14);
}

.love-note {
  position: relative;
  max-height: min(56vh, 520px);
  background:
    radial-gradient(circle at 14% 9%, rgba(255, 255, 255, 0.96), rgba(255, 241, 247, 0.88) 42%, transparent 70%),
    linear-gradient(165deg, rgba(255, 253, 254, 0.98), rgba(255, 236, 245, 0.92));
  border-radius: 22px;
  border: 1px solid rgba(212, 74, 111, 0.26);
  padding: 24px;
  box-shadow:
    0 26px 56px rgba(120, 32, 58, 0.22),
    inset 0 0 0 1px rgba(255, 255, 255, 0.8);
  overflow: auto;
  isolation: isolate;
}

.love-note::before {
  content: "";
  position: absolute;
  inset: 12px;
  border-radius: 16px;
  border: 1px dashed rgba(218, 110, 147, 0.35);
  pointer-events: none;
  z-index: 0;
}

.love-note::after {
  content: "";
  position: absolute;
  left: 20px;
  right: 20px;
  top: 18px;
  height: 10px;
  border-radius: 999px;
  background: radial-gradient(circle, rgba(248, 183, 208, 0.64), transparent 68%);
  pointer-events: none;
  z-index: 0;
}

.love-note-panel {
  position: absolute;
  left: 50%;
  top: clamp(6px, 1.2vh, 12px);
  width: min(860px, 94vw);
  z-index: 30;
  pointer-events: none;
}

.love-note-panel.is-open {
  pointer-events: auto;
}

.love-note-ornaments {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
}

.love-note-garland {
  position: absolute;
  top: 14px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 12px;
}

.love-heart-charm {
  position: relative;
  width: 12px;
  height: 12px;
  background: rgba(241, 122, 167, 0.8);
  transform: rotate(45deg);
  border-radius: 2px;
  box-shadow: 0 4px 10px rgba(188, 52, 95, 0.22);
  animation: noteCharmPulse 2.9s ease-in-out infinite;
}

.love-heart-charm::before,
.love-heart-charm::after {
  content: "";
  position: absolute;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: inherit;
}

.love-heart-charm::before {
  left: -6px;
  top: 0;
}

.love-heart-charm::after {
  left: 0;
  top: -6px;
}

.love-heart-charm:nth-child(2n) {
  animation-duration: 3.4s;
}

.love-heart-charm:nth-child(3n) {
  animation-duration: 2.6s;
}

.love-heart-charm:nth-child(2) {
  animation-delay: 0.25s;
}

.love-heart-charm:nth-child(3) {
  animation-delay: 0.45s;
}

.love-heart-charm:nth-child(4) {
  animation-delay: 0.1s;
}

.love-heart-charm:nth-child(5) {
  animation-delay: 0.55s;
}

.love-heart-charm:nth-child(6) {
  animation-delay: 0.2s;
}

.love-heart-charm:nth-child(7) {
  animation-delay: 0.38s;
}

.love-note-corner {
  position: absolute;
  width: 86px;
  height: 86px;
  opacity: 0.6;
  border-radius: 50%;
  background:
    radial-gradient(circle at 30% 28%, rgba(255, 167, 204, 0.94) 0 11px, transparent 12px),
    radial-gradient(circle at 56% 24%, rgba(247, 141, 184, 0.9) 0 10px, transparent 11px),
    radial-gradient(circle at 38% 52%, rgba(254, 214, 231, 0.94) 0 13px, transparent 14px),
    radial-gradient(circle at 64% 50%, rgba(255, 202, 224, 0.82) 0 10px, transparent 11px),
    radial-gradient(circle at 50% 74%, rgba(247, 149, 188, 0.78) 0 9px, transparent 10px);
  filter: drop-shadow(0 8px 14px rgba(179, 48, 93, 0.18));
}

.corner-tl {
  left: -14px;
  top: -14px;
  transform: rotate(-8deg);
}

.corner-tr {
  right: -14px;
  top: -14px;
  transform: rotate(10deg) scaleX(-1);
}

.corner-bl {
  left: -14px;
  bottom: -16px;
  transform: rotate(178deg);
}

.corner-br {
  right: -14px;
  bottom: -16px;
  transform: rotate(186deg) scaleX(-1);
}

.love-note-sparkle {
  position: absolute;
  width: 11px;
  height: 11px;
  clip-path: polygon(50% 0%, 61% 36%, 100% 50%, 61% 64%, 50% 100%, 39% 64%, 0 50%, 39% 36%);
  background: rgba(248, 193, 218, 0.9);
  opacity: 0.65;
  animation: noteSparkle 3.1s ease-in-out infinite;
}

.sparkle-1 {
  left: 8%;
  top: 28%;
}

.sparkle-2 {
  right: 10%;
  top: 34%;
  animation-delay: 0.5s;
}

.sparkle-3 {
  left: 12%;
  bottom: 18%;
  animation-delay: 1s;
}

.sparkle-4 {
  right: 14%;
  bottom: 16%;
  animation-delay: 1.5s;
}

.love-note-content {
  position: relative;
  z-index: 2;
  padding-top: 26px;
}

.room-letter-head {
  text-align: center;
  margin-bottom: 14px;
}

.room-letter-head span {
  text-transform: uppercase;
  letter-spacing: 0.25em;
  font-size: 0.7rem;
  color: rgba(90, 13, 28, 0.7);
}

.room-letter-head h3 {
  margin: 6px 0 0;
  color: var(--wine);
  position: relative;
  display: inline-block;
  padding: 0 22px;
}

.room-letter-head h3::before,
.room-letter-head h3::after {
  content: "";
  position: absolute;
  top: 50%;
  transform: translateY(-52%) rotate(45deg);
  width: 8px;
  height: 8px;
  border-radius: 2px;
  border: 1px solid rgba(197, 67, 109, 0.78);
  transform-origin: center;
}

.room-letter-head h3::before {
  left: 0;
}

.room-letter-head h3::after {
  right: 0;
}

.room-letter-body {
  display: grid;
  grid-template-columns: minmax(0, 1.2fr) minmax(0, 0.8fr);
  gap: 20px;
  align-items: start;
}

.room-letter-text {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(255, 246, 250, 0.96));
  border-radius: 18px;
  padding: 18px 20px;
  border: 1px solid rgba(212, 74, 111, 0.16);
  box-shadow:
    0 14px 28px rgba(120, 32, 58, 0.14),
    inset 0 1px 0 rgba(255, 255, 255, 0.85);
}

.room-letter-text p {
  margin: 0 0 8px;
}

.room-letter-text p:first-of-type::first-letter {
  font-family: "Cinzel", serif;
  font-size: 2rem;
  color: var(--blood);
  float: left;
  line-height: 1;
  margin-right: 6px;
  margin-top: 4px;
}

.room-letter-photo {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(255, 245, 250, 0.94));
  padding: 10px 10px 14px;
  border-radius: 18px;
  border: 1px solid rgba(212, 74, 111, 0.24);
  box-shadow:
    0 18px 36px rgba(120, 32, 58, 0.18),
    inset 0 1px 0 rgba(255, 255, 255, 0.88);
  text-align: center;
}

.room-letter-photo img {
  width: 100%;
  height: 240px;
  object-fit: contain;
  border-radius: 12px;
  background: #fceff5;
}

.room-letter-photo span {
  display: block;
  margin-top: 8px;
  font-size: 0.9rem;
  color: rgba(43, 11, 16, 0.8);
}

@keyframes noteCharmPulse {
  0%,
  100% {
    transform: rotate(45deg) translateY(0) scale(1);
    opacity: 0.72;
  }
  50% {
    transform: rotate(45deg) translateY(-3px) scale(1.12);
    opacity: 1;
  }
}

@keyframes noteSparkle {
  0%,
  100% {
    transform: scale(0.7) rotate(0deg);
    opacity: 0.28;
  }
  50% {
    transform: scale(1.2) rotate(20deg);
    opacity: 0.95;
  }
}

.room-tap-hint {
  font-size: 0.95rem;
  color: rgba(90, 13, 28, 0.7);
  margin: 0;
}

.letter-room-actions {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  margin-inline: auto;
  gap: 10px 12px;
  min-height: 52px;
  position: relative;
  z-index: 8;
}

.letter-room-actions.is-idle {
  min-height: auto;
}

.letter-room-save {
  min-width: 190px;
}

.letter-room-save-note {
  margin: 0;
  flex-basis: 100%;
  text-align: center;
  font-size: 0.92rem;
  color: rgba(43, 11, 16, 0.72);
}

.letter-room-close {
  min-width: 190px;
}

.letter-title {
  font-family: "Cinzel", serif;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  font-size: 0.75rem;
  color: var(--wine);
  margin-bottom: 12px;
}

.letter-lines {
  text-align: left;
  font-size: 1rem;
}

.letter-lines p {
  margin: 0 0 8px;
}

.letter-lines p:first-of-type::first-letter {
  font-family: "Cinzel", serif;
  font-size: 2rem;
  color: var(--blood);
  float: left;
  line-height: 1;
  margin-right: 6px;
  margin-top: 4px;
}

.timeline-section-reset {
  margin-top: 0;
  padding: 0;
  background: transparent;
  border: 0;
  box-shadow: none;
}

.timeline-section-reset::before,
.timeline-section-reset::after {
  display: none;
}

.timeline-section-reset h2 {
  margin: 0;
}

.timeline-bridgerton-section {
  --timeline-ivory: #fefaf3;
  --timeline-rose: #f2d9e4;
  --timeline-rose-deep: #dfb6c6;
  --timeline-wine: #7a2340;
  --timeline-gold: #e6c487;
  --timeline-line: rgba(121, 41, 69, 0.25);
  --timeline-door-dark: #643a37;
  --timeline-door-light: #87514b;
  --timeline-manor-stone-a: #f7dce8;
  --timeline-manor-stone-b: #e7bfd2;
  --timeline-manor-stone-c: #cd91ae;
  --timeline-manor-roof-a: #d57a9f;
  --timeline-manor-roof-b: #9f3f67;
  --timeline-manor-trim-a: #f3dbb1;
  --timeline-manor-trim-b: #d2a46e;
  --timeline-manor-window-core: rgba(255, 241, 207, 0.94);
  --timeline-manor-window-halo: rgba(248, 189, 139, 0.7);
  --timeline-magic-level: 0;
  --timeline-fog-base: 0.2;
  --timeline-lantern-base: 0.64;
  --timeline-fog-a: rgba(255, 240, 249, 0.44);
  --timeline-fog-b: rgba(255, 236, 203, 0.28);
  --timeline-mini-ambient-a: rgba(255, 244, 232, 0.26);
  --timeline-mini-ambient-b: rgba(255, 221, 188, 0.18);
  --timeline-mini-shaft: rgba(255, 233, 194, 0.2);
  --timeline-mini-shaft-strong: rgba(255, 215, 165, 0.34);
  --timeline-mini-floor-glow: rgba(255, 225, 197, 0.32);
  --timeline-mini-wall-tile: none;
  --timeline-mini-floor-tile: none;
  --timeline-mini-stair-tile: none;
  margin-top: 0;
  position: relative;
  overflow: hidden;
  border-color: rgba(125, 45, 74, 0.32);
  background:
    radial-gradient(circle at 12% 14%, rgba(255, 255, 255, 0.8), transparent 44%),
    radial-gradient(circle at 84% 12%, rgba(255, 230, 242, 0.66), transparent 52%),
    linear-gradient(150deg, rgba(255, 250, 242, 0.98), rgba(244, 220, 231, 0.94));
  box-shadow:
    0 30px 64px rgba(106, 30, 59, 0.16),
    inset 0 1px 0 rgba(255, 255, 255, 0.85);
  padding: 32px 28px 28px;
}

.timeline-bridgerton-section::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.62;
  background:
    radial-gradient(circle at 82% 86%, rgba(255, 212, 229, 0.3), transparent 42%),
    radial-gradient(circle at 12% 84%, rgba(243, 219, 170, 0.2), transparent 36%);
}

.timeline-bridgerton-head,
.timeline-bridgerton-ribbon,
.timeline-stage-shell {
  position: relative;
  z-index: 1;
}

.timeline-bridgerton-head h2 {
  color: #6a1f3a;
  font-size: clamp(1.85rem, 3.6vw, 2.85rem);
  margin-bottom: 8px;
}

.timeline-bridgerton-head p {
  max-width: 68ch;
}

.timeline-bridgerton-ribbon {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 0 0 18px;
}

.timeline-bridgerton-ribbon span {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid rgba(130, 46, 77, 0.26);
  background: rgba(255, 248, 253, 0.86);
  color: rgba(101, 31, 58, 0.94);
  font-family: "Cinzel", serif;
  font-size: 0.71rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.timeline-bridgerton-ribbon span::before {
  content: "";
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: linear-gradient(140deg, #f2d79a, #c34a76);
  box-shadow: 0 0 0 3px rgba(192, 85, 123, 0.14);
}

.timeline-mood-picker {
  display: grid;
  grid-template-columns: repeat(2, minmax(180px, 1fr));
  gap: 10px;
  margin: 0 0 14px;
}

.timeline-mood-btn {
  border-radius: 14px;
  border: 1px solid rgba(130, 46, 77, 0.22);
  background: rgba(255, 248, 252, 0.74);
  color: rgba(96, 31, 55, 0.92);
  padding: 10px 12px;
  text-align: left;
  display: grid;
  gap: 2px;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, background 0.2s ease;
}

.timeline-mood-btn strong {
  font-family: "Cinzel", serif;
  font-size: 0.84rem;
  letter-spacing: 0.04em;
}

.timeline-mood-btn span {
  font-size: 0.78rem;
  color: rgba(96, 31, 55, 0.76);
}

.timeline-mood-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 16px rgba(123, 46, 76, 0.14);
}

.timeline-mood-btn.is-active {
  border-color: rgba(167, 63, 103, 0.5);
  background: linear-gradient(145deg, rgba(255, 242, 248, 0.96), rgba(245, 221, 231, 0.94));
  box-shadow:
    0 12px 18px rgba(135, 54, 84, 0.16),
    0 0 0 2px rgba(255, 230, 241, 0.72);
}

.timeline-stage-shell {
  min-height: 690px;
  border-radius: 24px;
  overflow: hidden;
  border: 1px solid rgba(120, 40, 71, 0.24);
  background:
    radial-gradient(circle at 50% -20%, rgba(255, 249, 220, 0.54), transparent 44%),
    linear-gradient(180deg, rgba(255, 250, 244, 0.72), rgba(245, 222, 232, 0.58)),
    repeating-linear-gradient(0deg, rgba(129, 58, 89, 0.06) 0 1px, transparent 1px 16px);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.8),
    0 22px 32px rgba(121, 44, 76, 0.12);
}

.timeline-foyer-scene {
  min-height: 690px;
  padding: 38px 26px 26px;
  transform-origin: 50% 82%;
  display: grid;
  align-content: space-between;
  gap: 20px;
  position: relative;
  perspective: 1700px;
}

.timeline-manor {
  position: relative;
  width: min(760px, 94%);
  aspect-ratio: 1.95 / 1;
  margin-inline: auto;
  border-radius: 44px 44px 26px 26px;
  border: 1px solid rgba(122, 45, 77, 0.28);
  background:
    radial-gradient(circle at 50% -22%, rgba(255, 242, 214, 0.58), transparent 54%),
    linear-gradient(180deg, rgba(255, 239, 246, 0.98), rgba(223, 172, 192, 0.94)),
    repeating-linear-gradient(
      90deg,
      rgba(128, 56, 86, 0.1) 0 1px,
      rgba(255, 243, 248, 0.06) 1px 15px,
      transparent 15px 24px
    ),
    repeating-linear-gradient(0deg, rgba(124, 49, 79, 0.07) 0 1px, transparent 1px 14px);
  box-shadow:
    0 32px 42px rgba(109, 37, 65, 0.24),
    inset 0 1px 0 rgba(255, 255, 255, 0.82),
    inset 0 -14px 22px rgba(124, 47, 75, 0.22);
  overflow: hidden;
}

.timeline-manor::before {
  content: "";
  position: absolute;
  top: 21%;
  left: 16%;
  right: 16%;
  bottom: 0;
  border-radius: 34px 34px 0 0;
  border: 1px solid rgba(110, 42, 69, 0.22);
  background:
    radial-gradient(circle at 50% 6%, rgba(255, 255, 255, 0.34), transparent 28%),
    linear-gradient(180deg, rgba(255, 244, 250, 0.9), rgba(224, 177, 198, 0.86)),
    repeating-linear-gradient(
      90deg,
      rgba(136, 56, 84, 0.12) 0 1px,
      rgba(255, 246, 251, 0.08) 1px 14px,
      transparent 14px 20px
    );
}

.timeline-manor::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 50% 88%, rgba(96, 34, 58, 0.24), transparent 45%),
    radial-gradient(circle at 16% 82%, rgba(233, 193, 210, 0.42), transparent 40%),
    radial-gradient(circle at 84% 82%, rgba(233, 193, 210, 0.42), transparent 40%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.26), transparent 28%);
}

.timeline-manor-sky {
  position: absolute;
  inset: 0 0 42% 0;
  z-index: 0;
}

.timeline-manor-orb {
  position: absolute;
  top: 10%;
  right: 20%;
  width: clamp(30px, 4vw, 56px);
  height: clamp(30px, 4vw, 56px);
  border-radius: 999px;
  z-index: 1;
}

.timeline-manor-atmosphere {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  background:
    radial-gradient(circle at 50% 45%, rgba(255, 249, 225, 0.25), transparent 38%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.2), rgba(95, 39, 63, 0.2));
}

.timeline-manor-illustration {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 2;
  pointer-events: none;
  transform-origin: 50% 100%;
  filter: drop-shadow(0 16px 22px rgba(82, 26, 50, 0.28));
  animation: timelineManorBreath 9.5s ease-in-out infinite;
}

.timeline-manor-illustration .timeline-manor-window-set {
  --window-delay: 0s;
}

.timeline-manor-illustration .timeline-manor-window-glint {
  fill: rgba(255, 255, 255, 0.4);
  opacity: calc(0.03 + (var(--timeline-magic-level) * 0.03));
  transform-box: fill-box;
  transform-origin: center;
  animation: timelineWindowGlint calc(7.6s - (var(--timeline-magic-level) * 1.9s)) ease-in-out infinite;
  animation-delay: var(--window-delay, 0s);
}

.timeline-manor-illustration .timeline-manor-window-glint.glint-soft {
  fill: rgba(255, 247, 230, 0.3);
  opacity: calc(0.02 + (var(--timeline-magic-level) * 0.025));
  animation-duration: calc(8.3s - (var(--timeline-magic-level) * 2.1s));
}

.timeline-manor-illustration .timeline-manor-lantern-group {
  --lantern-delay: 0s;
}

.timeline-manor-illustration .timeline-manor-lantern-chain {
  fill: none;
  stroke: rgba(144, 98, 71, 0.8);
  stroke-width: 2;
  stroke-linecap: round;
}

.timeline-manor-illustration .timeline-manor-lantern-frame {
  fill: rgba(99, 50, 40, 0.88);
  stroke: rgba(172, 118, 82, 0.66);
  stroke-width: 1.5;
}

.timeline-manor-illustration .timeline-manor-lantern-core {
  fill: rgba(255, 220, 142, 0.88);
  opacity: calc(var(--timeline-lantern-base) + (var(--timeline-magic-level) * 0.24));
  filter: drop-shadow(
    0 0 calc(3px + (var(--timeline-magic-level) * 7px)) rgba(255, 215, 143, 0.7)
  );
  transform-box: fill-box;
  transform-origin: center;
  animation: timelineLanternCandle calc(2.25s - (var(--timeline-magic-level) * 0.55s)) ease-in-out infinite;
  animation-delay: var(--lantern-delay, 0s);
}

.timeline-manor-illustration .timeline-manor-lantern-halo {
  fill: rgba(255, 208, 131, 0.36);
  opacity: calc(0.28 + (var(--timeline-magic-level) * 0.52));
  filter: blur(calc(1px + (var(--timeline-magic-level) * 2.1px)));
  transform-box: fill-box;
  transform-origin: center;
  animation: timelineLanternHaloPulse calc(2.8s - (var(--timeline-magic-level) * 0.62s)) ease-in-out infinite;
  animation-delay: var(--lantern-delay, 0s);
}

.timeline-manor-fog {
  position: absolute;
  left: 17%;
  right: 17%;
  bottom: 7%;
  height: 18%;
  border-radius: 999px;
  pointer-events: none;
  z-index: 4;
  opacity: calc(var(--timeline-fog-base) + (var(--timeline-magic-level) * 0.24));
  background:
    radial-gradient(circle at 20% 58%, var(--timeline-fog-a), transparent 56%),
    radial-gradient(circle at 58% 46%, var(--timeline-fog-b), transparent 56%),
    radial-gradient(circle at 84% 62%, rgba(255, 248, 236, 0.22), transparent 60%);
  filter: blur(calc(8px + (var(--timeline-magic-level) * 9px)));
  transition: opacity 0.4s ease, filter 0.4s ease;
}

.timeline-manor-fog.fog-a {
  animation: timelineFogDriftA 15s ease-in-out infinite;
}

.timeline-manor-fog.fog-b {
  animation: timelineFogDriftB 18s ease-in-out infinite;
  animation-delay: -5s;
}

.timeline-manor-stars {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}

.timeline-manor-stars i {
  position: absolute;
  left: var(--star-x, 50%);
  top: var(--star-y, 12%);
  width: var(--star-size, 3px);
  height: var(--star-size, 3px);
  border-radius: 999px;
  background: rgba(255, 246, 221, 0.95);
  opacity: 0.72;
  box-shadow: 0 0 8px rgba(255, 234, 180, 0.7);
  animation: timelineStarTwinkle var(--star-duration, 2.4s) ease-in-out infinite;
  animation-delay: var(--star-delay, 0s);
}

.timeline-manor-cloud {
  position: absolute;
  top: 10%;
  height: 18%;
  border-radius: 999px;
  background:
    radial-gradient(circle at 25% 40%, rgba(255, 246, 238, 0.95), rgba(255, 246, 238, 0) 60%),
    radial-gradient(circle at 70% 60%, rgba(255, 229, 212, 0.8), rgba(255, 229, 212, 0) 62%);
  filter: blur(0.2px);
  z-index: 1;
  opacity: 0;
}

.timeline-manor-cloud.cloud-a {
  left: -12%;
  width: 28%;
  animation: timelineCloudDriftA 17s linear infinite;
}

.timeline-manor-cloud.cloud-b {
  left: 35%;
  top: 6%;
  width: 24%;
  animation: timelineCloudDriftB 21s linear infinite;
}

.timeline-manor-cloud.cloud-c {
  right: -14%;
  top: 16%;
  width: 30%;
  animation: timelineCloudDriftC 19s linear infinite;
}

.timeline-manor-roof {
  position: absolute;
  top: 10px;
  left: 50%;
  width: min(620px, 84%);
  height: 52px;
  transform: translateX(-50%);
  border-radius: 24px 24px 10px 10px;
  border: 1px solid rgba(118, 39, 69, 0.34);
  background:
    linear-gradient(180deg, rgba(228, 156, 184, 0.98), rgba(171, 78, 116, 0.98)),
    repeating-linear-gradient(
      90deg,
      rgba(246, 212, 227, 0.56) 0 10%,
      rgba(109, 36, 62, 0.3) 10% 14%
    );
  box-shadow:
    inset 0 1px 0 rgba(255, 238, 245, 0.62),
    inset 0 -6px 10px rgba(88, 34, 56, 0.28);
}

.timeline-manor-parapet {
  position: absolute;
  top: 66px;
  left: 50%;
  width: min(560px, 76%);
  height: 16px;
  transform: translateX(-50%);
  border-radius: 8px;
  border: 1px solid rgba(112, 41, 68, 0.3);
  background:
    linear-gradient(180deg, rgba(250, 232, 240, 0.95), rgba(214, 165, 187, 0.88)),
    repeating-linear-gradient(
      90deg,
      rgba(139, 64, 93, 0.22) 0 4%,
      rgba(255, 242, 247, 0.36) 4% 8%
    );
}

.timeline-manor-cornice {
  position: absolute;
  top: 32%;
  left: 50%;
  width: min(500px, 68%);
  height: 10px;
  transform: translateX(-50%);
  border-radius: 999px;
  border: 1px solid rgba(111, 39, 67, 0.3);
  background: linear-gradient(180deg, rgba(255, 248, 240, 0.78), rgba(211, 165, 131, 0.84));
}

.timeline-manor-roof,
.timeline-manor-parapet,
.timeline-manor-pediment,
.timeline-manor-cornice,
.timeline-manor-balcony,
.timeline-manor-wing,
.timeline-manor-column,
.timeline-manor-window,
.timeline-manor-lantern,
.timeline-manor-steps,
.timeline-manor-plinth,
.timeline-manor-hedge,
.timeline-manor-ivy,
.timeline-manor-door {
  z-index: 2;
}

.timeline-manor-pediment {
  position: absolute;
  top: 52px;
  left: 50%;
  width: min(420px, 56%);
  height: 84px;
  transform: translateX(-50%);
  border-radius: 18px 18px 0 0;
  border: 1px solid rgba(117, 44, 72, 0.3);
  background: linear-gradient(180deg, rgba(244, 208, 223, 0.96), rgba(225, 175, 194, 0.92));
  clip-path: polygon(0 100%, 50% 0, 100% 100%);
  opacity: 0.94;
}

.timeline-manor-balcony {
  position: absolute;
  top: 30%;
  left: 50%;
  width: min(430px, 56%);
  height: 18px;
  transform: translateX(-50%);
  border: 1px solid rgba(116, 43, 71, 0.34);
  border-radius: 6px;
  background:
    linear-gradient(180deg, rgba(243, 215, 176, 0.92), rgba(216, 168, 96, 0.8)),
    repeating-linear-gradient(
      90deg,
      rgba(119, 58, 36, 0.28) 0 6%,
      rgba(255, 240, 199, 0.45) 6% 9%
    );
}

.timeline-manor-wing {
  position: absolute;
  top: 28%;
  width: 16%;
  height: 60%;
  border-radius: 16px 16px 0 0;
  border: 1px solid rgba(113, 42, 70, 0.24);
  background:
    linear-gradient(180deg, rgba(248, 220, 233, 0.98), rgba(214, 156, 180, 0.92)),
    repeating-linear-gradient(
      90deg,
      rgba(132, 56, 84, 0.08) 0 1px,
      rgba(255, 243, 248, 0.1) 1px 11px,
      transparent 11px 16px
    );
  box-shadow:
    inset 0 1px 0 rgba(255, 245, 251, 0.74),
    inset -5px 0 8px rgba(111, 43, 70, 0.12);
}

.timeline-manor-wing.wing-left {
  left: 9%;
}

.timeline-manor-wing.wing-right {
  right: 9%;
}

.timeline-manor-column {
  position: absolute;
  top: 33%;
  width: 28px;
  height: 52%;
  border-radius: 14px 14px 2px 2px;
  border: 1px solid rgba(117, 43, 71, 0.24);
  background:
    linear-gradient(180deg, rgba(255, 245, 251, 0.98), rgba(228, 198, 213, 0.92)),
    repeating-linear-gradient(
      90deg,
      rgba(188, 142, 164, 0.28) 0 12%,
      rgba(255, 255, 255, 0.42) 12% 20%
    );
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.72),
    inset 0 -10px 12px rgba(124, 57, 84, 0.12);
}

.timeline-manor-column.col-left-a {
  left: 30%;
}

.timeline-manor-column.col-left-b {
  left: 38%;
}

.timeline-manor-column.col-right-a {
  right: 38%;
}

.timeline-manor-column.col-right-b {
  right: 30%;
}

.timeline-manor-window {
  position: absolute;
  top: 38%;
  width: 18px;
  height: 40px;
  border-radius: 999px 999px 6px 6px;
  border: 1px solid rgba(108, 38, 65, 0.3);
  background:
    linear-gradient(180deg, rgba(253, 232, 174, 0.92), rgba(225, 162, 128, 0.58));
}

.timeline-manor-window.window-left {
  left: 14%;
}

.timeline-manor-window.window-mid-left {
  left: 37%;
}

.timeline-manor-window.window-mid-right {
  right: 37%;
}

.timeline-manor-window.window-right {
  right: 14%;
}

.timeline-manor-lantern {
  position: absolute;
  top: 45%;
  width: 8px;
  height: 18px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255, 236, 171, 0.95), rgba(255, 180, 130, 0.6));
  box-shadow: 0 0 18px rgba(255, 214, 130, 0.6);
  transform-origin: top center;
  animation: timelineLanternSwing 4.8s ease-in-out infinite alternate;
}

.timeline-manor-lantern::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 55%;
  width: 20px;
  height: 20px;
  border-radius: 999px;
  transform: translate(-50%, -50%);
  background: radial-gradient(circle, rgba(255, 219, 143, 0.54), rgba(255, 219, 143, 0));
  opacity: 0.6;
  animation: timelineLanternGlow 2.8s ease-in-out infinite;
}

.timeline-manor-lantern.lantern-left {
  left: 31.5%;
}

.timeline-manor-lantern.lantern-right {
  right: 31.5%;
}

.timeline-manor-steps {
  position: absolute;
  left: 50%;
  bottom: 0;
  transform: translateX(-50%);
  width: min(52%, 400px);
  height: 20%;
  background:
    linear-gradient(180deg, rgba(232, 196, 211, 0.8), rgba(187, 140, 162, 0.82)),
    repeating-linear-gradient(180deg, rgba(122, 53, 80, 0.34) 0 1px, transparent 1px 14px);
  border-top: 1px solid rgba(120, 45, 73, 0.28);
  clip-path: polygon(0 100%, 8% 0, 92% 0, 100% 100%);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.32);
}

.timeline-manor-plinth {
  position: absolute;
  left: 50%;
  bottom: 0;
  transform: translateX(-50%);
  width: min(76%, 560px);
  height: 10%;
  border-radius: 12px 12px 0 0;
  border: 1px solid rgba(112, 43, 69, 0.22);
  border-bottom: 0;
  background:
    linear-gradient(180deg, rgba(234, 198, 214, 0.78), rgba(186, 141, 163, 0.76)),
    repeating-linear-gradient(90deg, rgba(123, 48, 76, 0.14) 0 8%, rgba(255, 243, 248, 0.12) 8% 14%);
}

.timeline-manor-ivy {
  position: absolute;
  top: 36%;
  width: 40px;
  height: 46%;
  opacity: 0.74;
  pointer-events: none;
  background:
    radial-gradient(circle at 24% 14%, rgba(170, 205, 143, 0.92), rgba(170, 205, 143, 0) 52%),
    radial-gradient(circle at 68% 34%, rgba(126, 172, 98, 0.86), rgba(126, 172, 98, 0) 58%),
    radial-gradient(circle at 42% 62%, rgba(97, 137, 78, 0.82), rgba(97, 137, 78, 0) 62%),
    radial-gradient(circle at 72% 84%, rgba(132, 182, 97, 0.84), rgba(132, 182, 97, 0) 62%);
}

.timeline-manor-ivy.ivy-left {
  left: 23%;
}

.timeline-manor-ivy.ivy-right {
  right: 23%;
}

.timeline-manor-hedge {
  position: absolute;
  bottom: 4%;
  width: 16%;
  height: 20%;
  border-radius: 999px 999px 10px 10px;
  border: 1px solid rgba(118, 91, 71, 0.22);
  background:
    radial-gradient(circle at 25% 32%, rgba(235, 249, 211, 0.76), transparent 52%),
    radial-gradient(circle at 72% 62%, rgba(181, 203, 138, 0.72), transparent 58%),
    linear-gradient(180deg, rgba(179, 197, 126, 0.82), rgba(124, 159, 89, 0.82));
  filter: saturate(0.88);
}

.timeline-manor-hedge.hedge-left {
  left: 4%;
}

.timeline-manor-hedge.hedge-right {
  right: 4%;
}

.timeline-manor-carriage {
  position: absolute;
  left: 11%;
  bottom: 9%;
  width: 104px;
  height: 60px;
  z-index: 4;
  opacity: 0;
  transform: translateX(0) rotate(-1deg);
  animation: timelineCarriageRide 14s ease-in-out infinite;
}

.timeline-manor-carriage svg {
  width: 100%;
  height: 100%;
  display: block;
  filter: drop-shadow(0 10px 10px rgba(39, 15, 12, 0.35));
}

.timeline-manor-door {
  position: absolute;
  left: 50%;
  bottom: 0;
  transform: translateX(-50%);
  width: min(30%, 224px);
  aspect-ratio: 0.8 / 1;
  border-radius: 120px 120px 0 0;
  border: 2px solid rgba(97, 37, 57, 0.48);
  overflow: hidden;
  perspective: 1000px;
  z-index: 5;
  background:
    radial-gradient(circle at 50% 34%, rgba(255, 235, 196, 0.18), transparent 62%),
    linear-gradient(180deg, rgba(53, 21, 34, 0.4), rgba(36, 14, 24, 0.52));
  box-shadow:
    inset 0 0 0 1px rgba(255, 219, 182, 0.3),
    0 10px 16px rgba(62, 18, 32, 0.35);
}

.timeline-manor-door::before {
  content: "";
  position: absolute;
  inset: 8px 8px 0;
  border-radius: 110px 110px 0 0;
  border: 1px solid rgba(255, 226, 197, 0.28);
  pointer-events: none;
  z-index: 4;
}

.timeline-manor-door::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 18%;
  width: 1px;
  bottom: 10%;
  transform: translateX(-50%);
  background: linear-gradient(180deg, rgba(255, 222, 192, 0.45), rgba(255, 222, 192, 0.08));
  z-index: 4;
  pointer-events: none;
}

.timeline-manor-door-leaf {
  position: absolute;
  top: 0;
  overflow: hidden;
  width: 50%;
  height: 100%;
  background:
    linear-gradient(180deg, rgba(255, 236, 214, 0.06), rgba(24, 9, 16, 0.12)),
    repeating-linear-gradient(
      90deg,
      var(--timeline-door-dark) 0 8px,
      var(--timeline-door-light) 8px 16px
    );
  box-shadow:
    inset 0 0 0 1px rgba(255, 225, 206, 0.18),
    inset 0 -18px 18px rgba(43, 13, 22, 0.34);
  transition: transform 1.05s cubic-bezier(0.2, 0.85, 0.25, 1);
}

.timeline-manor-door-leaf::before {
  content: "";
  position: absolute;
  inset: 12% 14% 8%;
  border-radius: 22px 22px 0 0;
  border: 1px solid rgba(255, 224, 196, 0.22);
  background:
    linear-gradient(180deg, rgba(255, 233, 206, 0.08), rgba(63, 20, 33, 0.14)),
    repeating-linear-gradient(
      0deg,
      rgba(255, 220, 190, 0.06) 0 1px,
      transparent 1px 18px
    );
}

.timeline-manor-door-leaf::after {
  content: "";
  position: absolute;
  top: 52%;
  width: 7px;
  height: 7px;
  border-radius: 999px;
  border: 1px solid rgba(185, 121, 76, 0.72);
  background: radial-gradient(circle, rgba(255, 230, 170, 0.84), rgba(164, 91, 45, 0.88));
  box-shadow: 0 0 12px rgba(255, 216, 144, 0.28);
}

.timeline-manor-door-leaf.leaf-left {
  left: 0;
  transform-origin: left center;
}

.timeline-manor-door-leaf.leaf-left::after {
  right: 12px;
}

.timeline-manor-door-leaf.leaf-right {
  right: 0;
  transform-origin: right center;
  border-left: 1px solid rgba(255, 228, 209, 0.2);
}

.timeline-manor-door-leaf.leaf-right::after {
  left: 12px;
}

.timeline-manor-door.is-open .timeline-manor-door-leaf.leaf-left {
  transform: rotateY(-78deg);
}

.timeline-manor-door.is-open .timeline-manor-door-leaf.leaf-right {
  transform: rotateY(78deg);
}

.timeline-manor-door-rays {
  position: absolute;
  inset: -14% -22%;
  pointer-events: none;
  opacity: 0;
  background:
    radial-gradient(circle at 50% 60%, rgba(255, 241, 207, 0.72), rgba(255, 241, 207, 0) 60%),
    conic-gradient(
      from 270deg at 50% 100%,
      rgba(255, 239, 192, 0) 0deg,
      rgba(255, 239, 192, 0.56) 42deg,
      rgba(255, 239, 192, 0) 76deg,
      rgba(255, 239, 192, 0.46) 122deg,
      rgba(255, 239, 192, 0) 168deg,
      rgba(255, 239, 192, 0.5) 214deg,
      rgba(255, 239, 192, 0) 260deg
    );
}

.timeline-manor-door-light {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 50% 55%, rgba(245, 220, 162, 0.7), rgba(245, 220, 162, 0) 58%);
  opacity: 0.16;
}

.timeline-manor-door.is-open .timeline-manor-door-light {
  opacity: 0.96;
}

.timeline-manor-door-dust {
  position: absolute;
  inset: -8% -14%;
  pointer-events: none;
  opacity: 0;
}

.timeline-manor-door-dust i {
  position: absolute;
  left: var(--dust-x, 50%);
  bottom: 8%;
  width: var(--dust-size, 5px);
  height: var(--dust-size, 5px);
  border-radius: 999px;
  opacity: 0;
  background: rgba(255, 244, 216, 0.9);
  filter: blur(0.35px);
  animation:
    timelineDoorDust var(--dust-duration, 2.1s) ease-out infinite,
    timelineDoorDustDrift calc(var(--dust-duration, 2.1s) * 0.9) ease-in-out infinite alternate;
  animation-delay: var(--dust-delay, 0s);
}

.timeline-manor-door.is-open .timeline-manor-door-rays,
.timeline-manor-door.is-open .timeline-manor-door-dust {
  opacity: 1;
}

.timeline-manor-door.is-open .timeline-manor-door-rays {
  animation: timelineDoorRayPulse 2.6s ease-in-out infinite;
}

.timeline-foyer-copy {
  width: min(660px, 100%);
  margin-inline: auto;
  text-align: center;
  display: grid;
  gap: 8px;
}

.timeline-foyer-copy h3 {
  margin: 0;
  color: #6d1f3d;
  font-size: clamp(1.32rem, 2.4vw, 1.7rem);
}

.timeline-foyer-copy p {
  margin: 0;
  color: rgba(95, 32, 58, 0.82);
}

.timeline-foyer-actions {
  margin-top: 4px;
  display: flex;
  justify-content: center;
}

.timeline-foyer-open {
  min-width: 250px;
  font-size: 0.86rem;
}

.timeline-door-zoom-overlay {
  position: absolute;
  left: 50%;
  bottom: 132px;
  width: min(240px, 48vw);
  aspect-ratio: 0.78 / 1;
  transform: translateX(-50%);
  border-radius: 120px 120px 0 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 50% 62%, rgba(255, 241, 202, 0.82), rgba(255, 241, 202, 0) 66%),
    linear-gradient(180deg, rgba(40, 14, 24, 0.62), rgba(40, 14, 24, 0.9));
  box-shadow:
    0 0 0 4px rgba(246, 217, 171, 0.35),
    0 0 150px rgba(246, 217, 171, 0.68);
}

.timeline-cinematic-vignette {
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  background:
    radial-gradient(circle at 50% 58%, rgba(255, 244, 217, 0.26), transparent 45%),
    radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0), rgba(25, 6, 13, 0.62) 86%);
  transition: opacity 0.4s ease;
}

.timeline-cinematic-vignette.is-active {
  opacity: 1;
}

.timeline-bridgerton-section[data-mood="gala"] {
  --timeline-manor-stone-a: #f2d1e2;
  --timeline-manor-stone-b: #dcaac3;
  --timeline-manor-stone-c: #b97599;
  --timeline-manor-roof-a: #d5739c;
  --timeline-manor-roof-b: #8f355c;
  --timeline-manor-trim-a: #f0d7a8;
  --timeline-manor-trim-b: #c3884f;
  --timeline-manor-window-core: rgba(255, 241, 212, 0.98);
  --timeline-manor-window-halo: rgba(247, 189, 129, 0.74);
  --timeline-lantern-base: 0.74;
  --timeline-fog-base: 0.32;
  --timeline-fog-a: rgba(255, 236, 246, 0.56);
  --timeline-fog-b: rgba(255, 222, 173, 0.34);
  --timeline-mini-ambient-a: rgba(255, 232, 209, 0.32);
  --timeline-mini-ambient-b: rgba(255, 211, 162, 0.24);
  --timeline-mini-shaft: rgba(255, 236, 204, 0.24);
  --timeline-mini-shaft-strong: rgba(255, 213, 154, 0.42);
  --timeline-mini-floor-glow: rgba(255, 215, 176, 0.4);
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-stage-shell {
  background:
    radial-gradient(circle at 50% -22%, rgba(255, 230, 169, 0.32), transparent 44%),
    linear-gradient(180deg, rgba(44, 20, 48, 0.55), rgba(90, 35, 60, 0.48)),
    repeating-linear-gradient(0deg, rgba(255, 219, 171, 0.05) 0 1px, transparent 1px 16px);
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-manor-sky {
  background:
    radial-gradient(circle at 72% 18%, rgba(217, 179, 110, 0.24), transparent 42%),
    linear-gradient(180deg, rgba(42, 24, 58, 0.92), rgba(92, 41, 77, 0.62));
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-manor-orb {
  background:
    radial-gradient(circle at 35% 35%, rgba(255, 246, 223, 0.98), rgba(255, 215, 162, 0.88));
  box-shadow:
    0 0 0 8px rgba(255, 219, 148, 0.2),
    0 0 40px rgba(255, 212, 131, 0.46);
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-manor-stars {
  opacity: 1;
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-manor-atmosphere {
  opacity: 0.72;
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-manor-illustration {
  filter:
    drop-shadow(0 18px 24px rgba(72, 24, 45, 0.34))
    saturate(1.05)
    contrast(1.02);
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-manor-fog {
  opacity: calc(var(--timeline-fog-base) + (var(--timeline-magic-level) * 0.24));
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-manor-illustration .timeline-manor-lantern-core {
  fill: rgba(255, 222, 145, 0.94);
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-manor-cloud {
  opacity: 0;
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-manor-carriage {
  opacity: 0.9;
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-manor-lantern {
  box-shadow:
    0 0 20px rgba(255, 219, 130, 0.62),
    0 0 48px rgba(255, 201, 119, 0.32);
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-mini-map-shell {
  background:
    radial-gradient(circle at 50% 8%, rgba(255, 226, 175, 0.2), transparent 40%),
    linear-gradient(
      180deg,
      rgba(229, 201, 220, 0.93) 0%,
      rgba(191, 151, 180, 0.94) 42%,
      rgba(116, 82, 108, 0.97) 100%
    );
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-mini-illustrated-map {
  filter:
    saturate(1.34)
    contrast(1.18)
    brightness(1.06)
    drop-shadow(0 10px 20px rgba(35, 14, 31, 0.32));
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-mini-tile-layer.tile-wall {
  opacity: 0.6;
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-mini-tile-layer.tile-floor {
  opacity: 0.72;
}

.timeline-bridgerton-section[data-mood="gala"] .timeline-mini-tile-layer.tile-stair {
  opacity: 0.76;
}

.timeline-bridgerton-section[data-mood="sunset"] {
  --timeline-manor-stone-a: #f6d8c9;
  --timeline-manor-stone-b: #e8afab;
  --timeline-manor-stone-c: #cb7f8d;
  --timeline-manor-roof-a: #d78285;
  --timeline-manor-roof-b: #934e65;
  --timeline-manor-trim-a: #f5d7a5;
  --timeline-manor-trim-b: #cb8f60;
  --timeline-manor-window-core: rgba(255, 242, 207, 0.9);
  --timeline-manor-window-halo: rgba(243, 171, 126, 0.58);
  --timeline-lantern-base: 0.58;
  --timeline-fog-base: 0.14;
  --timeline-fog-a: rgba(255, 228, 212, 0.36);
  --timeline-fog-b: rgba(255, 242, 224, 0.24);
  --timeline-mini-ambient-a: rgba(255, 231, 186, 0.28);
  --timeline-mini-ambient-b: rgba(255, 188, 155, 0.2);
  --timeline-mini-shaft: rgba(255, 221, 171, 0.3);
  --timeline-mini-shaft-strong: rgba(255, 180, 128, 0.4);
  --timeline-mini-floor-glow: rgba(255, 198, 160, 0.38);
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-stage-shell {
  background:
    radial-gradient(circle at 50% -24%, rgba(255, 232, 170, 0.56), transparent 42%),
    linear-gradient(180deg, rgba(255, 236, 199, 0.66), rgba(248, 204, 180, 0.58)),
    repeating-linear-gradient(0deg, rgba(180, 94, 111, 0.07) 0 1px, transparent 1px 16px);
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-manor-sky {
  background:
    radial-gradient(circle at 38% 22%, rgba(255, 246, 199, 0.86), rgba(255, 246, 199, 0) 44%),
    linear-gradient(180deg, rgba(255, 186, 141, 0.92), rgba(250, 141, 134, 0.82));
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-manor-orb {
  right: 22%;
  top: 14%;
  background:
    radial-gradient(circle at 30% 30%, rgba(255, 252, 228, 0.98), rgba(255, 208, 131, 0.9));
  box-shadow:
    0 0 0 10px rgba(255, 224, 162, 0.34),
    0 0 52px rgba(255, 184, 128, 0.52);
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-manor-stars {
  opacity: 0;
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-manor-atmosphere {
  opacity: 0.56;
  background:
    radial-gradient(circle at 50% 38%, rgba(255, 249, 222, 0.32), transparent 42%),
    linear-gradient(180deg, rgba(255, 240, 209, 0.24), rgba(153, 66, 78, 0.18));
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-manor-illustration {
  filter:
    drop-shadow(0 15px 20px rgba(110, 42, 66, 0.24))
    saturate(1.06)
    brightness(1.02);
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-manor-fog {
  opacity: calc(var(--timeline-fog-base) + (var(--timeline-magic-level) * 0.24));
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-manor-cloud {
  opacity: 0.86;
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-manor-carriage {
  opacity: 0;
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-manor-lantern {
  box-shadow: 0 0 12px rgba(255, 208, 153, 0.42);
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-mini-map-shell {
  background:
    radial-gradient(circle at 46% 12%, rgba(255, 226, 188, 0.42), transparent 40%),
    linear-gradient(
      180deg,
      rgba(255, 245, 235, 0.95) 0%,
      rgba(244, 212, 204, 0.93) 40%,
      rgba(180, 128, 146, 0.95) 100%
    );
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-mini-tile-layer.tile-wall {
  opacity: 0.52;
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-mini-tile-layer.tile-floor {
  opacity: 0.64;
}

.timeline-bridgerton-section[data-mood="sunset"] .timeline-mini-tile-layer.tile-stair {
  opacity: 0.68;
}

.timeline-journey-scene {
  min-height: 690px;
  padding: 18px;
  display: grid;
  gap: 14px;
  align-content: start;
  position: relative;
}

.timeline-journey-topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
  border-radius: 16px;
  border: 1px solid rgba(125, 44, 73, 0.2);
  background: rgba(255, 250, 245, 0.86);
  padding: 12px;
}

.timeline-journey-progress {
  display: grid;
  gap: 7px;
  width: min(620px, 100%);
}

.timeline-progress-label {
  font-family: "Cinzel", serif;
  font-size: 0.8rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: rgba(103, 35, 56, 0.88);
}

.timeline-progress-track {
  width: 100%;
  height: 12px;
  border-radius: 999px;
  overflow: hidden;
  background: rgba(136, 50, 83, 0.12);
  border: 1px solid rgba(136, 50, 83, 0.15);
}

.timeline-progress-fill {
  display: block;
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(90deg, #b23d68, #ecc985);
  box-shadow: 0 0 16px rgba(221, 122, 160, 0.38);
}

.timeline-journey-actions {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.timeline-journey-layout {
  display: block;
}

.timeline-floors-board {
  position: relative;
  width: min(940px, 100%);
  margin-inline: auto;
  min-height: 700px;
  border-radius: 24px;
  border: 1px solid rgba(125, 42, 72, 0.24);
  background:
    radial-gradient(circle at 50% -28%, rgba(255, 242, 215, 0.6), transparent 42%),
    linear-gradient(180deg, rgba(255, 248, 252, 0.98), rgba(233, 201, 219, 0.95));
  padding: 18px;
  overflow: hidden;
  isolation: isolate;
  box-shadow:
    0 20px 42px rgba(93, 28, 54, 0.28),
    inset 0 1px 0 rgba(255, 255, 255, 0.76);
}

.timeline-floors-board::before {
  content: "";
  position: absolute;
  inset: 14px;
  border-radius: 18px;
  border: 1px solid rgba(132, 45, 76, 0.18);
  pointer-events: none;
  z-index: 1;
  background:
    radial-gradient(circle at 50% 110%, rgba(249, 212, 190, 0.42), transparent 48%),
    linear-gradient(180deg, rgba(255, 249, 252, 0.74), rgba(235, 208, 220, 0.42));
}

.timeline-floors-board::after {
  content: "";
  position: absolute;
  inset: 58px 52px 84px;
  border-radius: 20px;
  pointer-events: none;
  z-index: 1;
  border: 1px solid rgba(123, 42, 72, 0.2);
  background:
    radial-gradient(circle at 50% -20%, rgba(255, 246, 227, 0.5), transparent 50%),
    linear-gradient(
      180deg,
      rgba(255, 247, 252, 0.8),
      rgba(247, 225, 236, 0.88) 52%,
      rgba(206, 161, 186, 0.92)
    );
  box-shadow:
    inset 0 22px 36px rgba(132, 51, 83, 0.14),
    inset 0 -52px 84px rgba(114, 54, 79, 0.28);
}

.timeline-interior-ambient-glow {
  position: absolute;
  inset: 60px 54px 88px;
  z-index: 2;
  border-radius: 20px;
  pointer-events: none;
  background:
    radial-gradient(circle at 50% 12%, rgba(255, 236, 194, 0.4), transparent 46%),
    radial-gradient(circle at 50% 98%, rgba(255, 214, 186, 0.34), transparent 40%);
  opacity: calc(0.24 + (var(--timeline-magic-level) * 0.32));
  transition: opacity 0.35s ease;
}

.timeline-interior-fog {
  position: absolute;
  left: 10%;
  right: 10%;
  bottom: 74px;
  height: 120px;
  border-radius: 999px;
  pointer-events: none;
  z-index: 3;
  opacity: calc(0.1 + (var(--timeline-magic-level) * 0.32));
  background:
    radial-gradient(circle at 22% 58%, rgba(255, 230, 241, 0.52), rgba(255, 230, 241, 0) 54%),
    radial-gradient(circle at 60% 40%, rgba(255, 230, 188, 0.42), rgba(255, 230, 188, 0) 52%),
    radial-gradient(circle at 86% 62%, rgba(253, 238, 246, 0.4), rgba(253, 238, 246, 0) 58%);
  filter: blur(calc(8px + (var(--timeline-magic-level) * 10px)));
  animation: timelineInteriorFogDrift calc(16s - (var(--timeline-magic-level) * 3s)) ease-in-out infinite;
}

.timeline-interior-fog.fog-a {
  transform: translateX(-18px) scale(1.08);
}

.timeline-interior-fog.fog-b {
  bottom: 96px;
  opacity: calc(0.08 + (var(--timeline-magic-level) * 0.26));
  transform: translateX(22px) scale(0.92);
  animation-delay: -5.4s;
}

.timeline-interior-lantern {
  position: absolute;
  top: 140px;
  width: 12px;
  height: 32px;
  border-radius: 8px;
  z-index: 4;
  pointer-events: none;
  border: 1px solid rgba(137, 83, 56, 0.6);
  background: linear-gradient(180deg, rgba(98, 51, 40, 0.84), rgba(57, 27, 24, 0.88));
}

.timeline-interior-lantern::before {
  content: "";
  position: absolute;
  left: 2px;
  top: 8px;
  width: 8px;
  height: 14px;
  border-radius: 999px;
  background: rgba(255, 212, 138, 0.82);
  opacity: calc(var(--timeline-lantern-base) + (var(--timeline-magic-level) * 0.26));
  box-shadow:
    0 0 12px rgba(255, 214, 153, 0.6),
    0 0 22px rgba(248, 161, 102, 0.5);
  animation: timelineLanternCandle calc(2.3s - (var(--timeline-magic-level) * 0.45s)) ease-in-out infinite;
}

.timeline-interior-lantern::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 15px;
  width: 76px;
  height: 76px;
  transform: translate(-50%, -50%);
  border-radius: 999px;
  background: radial-gradient(circle, rgba(255, 223, 167, 0.36), rgba(255, 223, 167, 0) 72%);
  opacity: calc(0.28 + (var(--timeline-magic-level) * 0.38));
  filter: blur(1.8px);
  animation: timelineLanternHaloPulse calc(3s - (var(--timeline-magic-level) * 0.5s)) ease-in-out infinite;
}

.timeline-interior-lantern.lantern-left {
  left: 90px;
}

.timeline-interior-lantern.lantern-right {
  right: 90px;
}

.timeline-interior-guest {
  position: absolute;
  bottom: 118px;
  width: 15px;
  height: 32px;
  z-index: 4;
  pointer-events: none;
  opacity: 0.42;
  border-radius: 999px 999px 6px 6px;
  background: linear-gradient(180deg, rgba(72, 28, 46, 0.72), rgba(45, 18, 31, 0.72));
  filter: blur(0.1px);
}

.timeline-interior-guest::before {
  content: "";
  position: absolute;
  width: 11px;
  height: 11px;
  left: 2px;
  top: -9px;
  border-radius: 50%;
  background: rgba(71, 30, 45, 0.78);
}

.timeline-interior-guest.guest-a {
  left: 22%;
  animation: timelineGuestDriftA 16s ease-in-out infinite;
}

.timeline-interior-guest.guest-b {
  left: 72%;
  animation: timelineGuestDriftB 15s ease-in-out infinite;
}

.timeline-interior-path {
  position: absolute;
  inset: 78px 76px 118px;
  z-index: 3;
  pointer-events: none;
}

.timeline-interior-path-main {
  fill: none;
  stroke: rgba(154, 65, 99, 0.72);
  stroke-width: 1.8;
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-dasharray: 1.8 2.2;
  filter: drop-shadow(0 0 6px rgba(205, 139, 172, 0.36));
}

.timeline-interior-path-stop {
  fill: rgba(255, 230, 242, 0.74);
  opacity: 0.5;
  transition: opacity 0.2s ease, fill 0.2s ease;
}

.timeline-interior-path-stop.is-reached {
  fill: rgba(255, 199, 170, 0.92);
  opacity: 1;
}

.timeline-princess-top {
  position: absolute;
  left: var(--room-x, 50%);
  top: var(--room-y, 8%);
  transform: translate(-50%, -50%);
  width: min(320px, calc(100% - 76px));
  border-radius: 12px;
  border: 1px solid rgba(129, 43, 74, 0.22);
  background:
    radial-gradient(circle at 16% 20%, rgba(255, 244, 218, 0.54), transparent 40%),
    rgba(255, 251, 245, 0.94);
  padding: 8px 10px;
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 8px;
  align-items: center;
  z-index: 6;
}

.timeline-princess-icon {
  width: 30px;
  height: 30px;
  border-radius: 999px;
  border: 1px solid rgba(145, 106, 46, 0.42);
  color: rgba(118, 78, 24, 0.88);
  background: linear-gradient(145deg, rgba(246, 220, 158, 0.95), rgba(224, 171, 93, 0.9));
  display: grid;
  place-items: center;
}

.timeline-princess-icon .icon-glyph {
  width: 16px;
  height: 16px;
}

.timeline-princess-top p {
  margin: 0;
  font-size: 0.76rem;
  color: rgba(96, 33, 57, 0.78);
}

.timeline-princess-top strong {
  font-size: 0.86rem;
  color: rgba(88, 30, 50, 0.95);
}

.timeline-princess-top.is-complete {
  box-shadow:
    0 14px 22px rgba(197, 122, 151, 0.24),
    0 0 0 2px rgba(236, 208, 139, 0.36);
  animation: timelinePrincessPulse var(--motion-timeline-duration) ease-in-out infinite;
}

.timeline-room-grid {
  position: relative;
  z-index: 5;
  width: 100%;
  min-height: 580px;
}

.timeline-room-node {
  position: absolute;
  left: var(--room-x);
  top: var(--room-y);
  transform: translate(-50%, -50%);
  width: clamp(126px, 15vw, 168px);
  min-height: 58px;
  border-radius: 16px;
  border: 1px solid rgba(121, 42, 72, 0.22);
  background:
    radial-gradient(circle at 18% 12%, rgba(255, 253, 248, 0.96), rgba(255, 245, 250, 0.92)),
    linear-gradient(145deg, rgba(255, 250, 252, 0.95), rgba(246, 222, 235, 0.92));
  color: rgba(82, 27, 49, 0.92);
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 8px;
  text-align: left;
  padding: 7px 8px;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  backdrop-filter: blur(1.6px);
  box-shadow: 0 10px 18px rgba(116, 43, 71, 0.14);
}

.timeline-room-node:hover {
  transform: translate(-50%, calc(-50% - 1px));
  box-shadow: 0 12px 20px rgba(127, 51, 80, 0.2);
}

.timeline-room-node.is-reached {
  border-color: rgba(160, 60, 98, 0.42);
  background:
    radial-gradient(circle at 18% 12%, rgba(255, 245, 249, 0.96), rgba(255, 235, 244, 0.92)),
    linear-gradient(145deg, rgba(255, 246, 250, 0.94), rgba(244, 214, 229, 0.94));
}

.timeline-room-node.is-active {
  border-color: rgba(182, 71, 114, 0.62);
  box-shadow:
    0 16px 26px rgba(140, 55, 87, 0.28),
    0 0 0 2px rgba(255, 220, 235, 0.68);
}

.timeline-room-node.is-locked {
  cursor: not-allowed;
  opacity: 0.55;
  filter: saturate(0.78);
}

.timeline-room-node:disabled {
  pointer-events: none;
}

.timeline-room-door-plate {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 32px;
  border-radius: 8px;
  border: 1px solid rgba(129, 52, 78, 0.26);
  background: linear-gradient(180deg, rgba(137, 73, 64, 0.96), rgba(83, 40, 37, 0.96));
  box-shadow: inset 0 0 0 1px rgba(242, 189, 155, 0.18);
}

.timeline-room-door-panel {
  width: 5px;
  height: 18px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255, 212, 174, 0.4), rgba(255, 175, 130, 0.2));
}

.timeline-room-label {
  display: grid;
  gap: 3px;
}

.timeline-room-label strong {
  font-family: "Cinzel", serif;
  font-size: 0.62rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: rgba(96, 33, 56, 0.92);
}

.timeline-room-label small {
  font-size: 0.62rem;
  color: rgba(97, 32, 56, 0.78);
  line-height: 1.2;
}

.timeline-room-state {
  display: inline-flex;
  color: rgba(129, 47, 78, 0.88);
}

.timeline-room-state .icon-glyph {
  width: 12px;
  height: 12px;
}

.timeline-prince-marker {
  position: absolute;
  left: 16%;
  top: 84%;
  transform: translate(-50%, -50%);
  width: 40px;
  height: 40px;
  border-radius: 999px;
  border: 1px solid rgba(130, 47, 77, 0.3);
  background:
    radial-gradient(circle at 28% 20%, rgba(255, 255, 255, 0.92), rgba(255, 236, 246, 0.96));
  color: rgba(123, 39, 68, 0.95);
  display: grid;
  place-items: center;
  pointer-events: none;
  z-index: 7;
  box-shadow:
    0 8px 14px rgba(122, 42, 71, 0.24),
    0 0 0 3px rgba(250, 220, 235, 0.52);
}

.timeline-prince-marker.is-interior {
  border-color: rgba(140, 51, 82, 0.4);
  box-shadow:
    0 10px 18px rgba(119, 43, 71, 0.26),
    0 0 0 3px rgba(250, 217, 236, 0.58);
}

.timeline-prince-marker .icon-glyph {
  width: 20px;
  height: 20px;
}

.timeline-prince-marker small {
  position: absolute;
  top: calc(100% + 4px);
  left: 50%;
  transform: translateX(-50%);
  font-family: "Cinzel", serif;
  font-size: 0.53rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: rgba(105, 34, 58, 0.86);
}

.timeline-map-hint {
  position: absolute;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  z-index: 6;
  width: min(620px, calc(100% - 34px));
  border-radius: 999px;
  border: 1px solid rgba(130, 46, 76, 0.2);
  background: rgba(255, 248, 252, 0.82);
  padding: 10px 14px;
  text-align: center;
}

.timeline-map-hint p {
  margin: 0;
  font-size: 0.82rem;
  color: rgba(94, 31, 54, 0.82);
  line-height: 1.3;
}

.timeline-map-hint p strong {
  color: rgba(95, 26, 51, 0.94);
}

.timeline-floors-board.timeline-mini-board {
  width: min(980px, 100%);
  min-height: 790px;
  padding: 16px;
  border-radius: 24px;
  isolation: isolate;
  background:
    radial-gradient(circle at 50% -22%, rgba(255, 239, 202, 0.34), transparent 40%),
    radial-gradient(circle at 12% 88%, rgba(255, 220, 236, 0.1), transparent 54%),
    radial-gradient(circle at 86% 84%, rgba(255, 206, 182, 0.12), transparent 58%),
    linear-gradient(180deg, rgba(224, 196, 214, 0.95), rgba(132, 98, 124, 0.97));
  box-shadow:
    0 34px 58px rgba(73, 23, 46, 0.34),
    inset 0 1px 0 rgba(255, 255, 255, 0.6),
    inset 0 -100px 110px rgba(48, 19, 38, 0.28);
}

.timeline-floors-board.timeline-mini-board::before {
  inset: 10px;
  border-radius: 18px;
  border: 1px solid rgba(119, 40, 70, 0.26);
  background:
    radial-gradient(circle at 50% 104%, rgba(252, 206, 182, 0.18), transparent 56%),
    linear-gradient(180deg, rgba(255, 252, 253, 0.18), rgba(232, 191, 211, 0.14));
}

.timeline-floors-board.timeline-mini-board::after {
  content: "";
  position: absolute;
  inset: 14px;
  border-radius: 16px;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(circle at 50% 2%, rgba(255, 234, 178, 0.12), transparent 44%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0));
  mix-blend-mode: normal;
}

.timeline-mini-map-shell {
  --timeline-mini-map-top: 20px;
  --timeline-mini-map-x: 24px;
  --timeline-mini-map-bottom: 58px;
  position: relative;
  min-height: 680px;
  border-radius: 18px;
  border: 1px solid rgba(121, 42, 72, 0.34);
  background:
    radial-gradient(circle at 50% 11%, rgba(255, 238, 204, 0.24), transparent 38%),
    linear-gradient(
      180deg,
      rgba(236, 212, 227, 0.94) 0%,
      rgba(198, 157, 184, 0.95) 42%,
      rgba(122, 87, 114, 0.97) 100%
    );
  overflow: hidden;
  isolation: isolate;
  box-shadow:
    inset 0 0 0 1px rgba(255, 255, 255, 0.26),
    inset 0 28px 34px rgba(124, 50, 80, 0.12),
    inset 0 -120px 130px rgba(44, 20, 37, 0.34),
    0 20px 36px rgba(75, 25, 48, 0.22);
}

.timeline-mini-map-shell::before {
  content: "";
  position: absolute;
  inset: 14px;
  border-radius: 14px;
  border: 1px solid rgba(121, 45, 74, 0.26);
  background:
    linear-gradient(180deg, rgba(255, 252, 253, 0.2), rgba(254, 238, 246, 0.08)),
    radial-gradient(circle at 50% 12%, rgba(255, 245, 223, 0.12), rgba(255, 245, 223, 0) 44%);
  pointer-events: none;
  z-index: 1;
}

.timeline-mini-map-shell::after {
  content: "";
  position: absolute;
  left: 10%;
  right: 10%;
  bottom: 12px;
  height: 112px;
  border-radius: 999px;
  pointer-events: none;
  z-index: 2;
  opacity: calc(0.1 + (var(--timeline-magic-level) * 0.14));
  background:
    radial-gradient(circle at 28% 56%, var(--timeline-mini-ambient-a), transparent 56%),
    radial-gradient(circle at 57% 34%, var(--timeline-mini-floor-glow), transparent 60%),
    radial-gradient(circle at 80% 66%, var(--timeline-mini-ambient-b), transparent 60%);
  filter: blur(calc(6px + (var(--timeline-magic-level) * 5px)));
}

.timeline-mini-tile-layer {
  position: absolute;
  inset: var(--timeline-mini-map-top) var(--timeline-mini-map-x) var(--timeline-mini-map-bottom);
  border-radius: 12px;
  pointer-events: none;
}

.timeline-mini-coord-debug-layer {
  position: absolute;
  inset: var(--timeline-mini-map-top) var(--timeline-mini-map-x) var(--timeline-mini-map-bottom);
  border-radius: 12px;
  pointer-events: none;
  z-index: 16;
  border: 1px dashed rgba(150, 56, 90, 0.36);
  background:
    linear-gradient(
      90deg,
      rgba(156, 68, 103, 0.08) 0%,
      rgba(156, 68, 103, 0) 22%,
      rgba(156, 68, 103, 0.08) 50%,
      rgba(156, 68, 103, 0) 78%,
      rgba(156, 68, 103, 0.08) 100%
    ),
    linear-gradient(
      180deg,
      rgba(156, 68, 103, 0.1) 0%,
      rgba(156, 68, 103, 0) 24%,
      rgba(156, 68, 103, 0.1) 50%,
      rgba(156, 68, 103, 0) 76%,
      rgba(156, 68, 103, 0.1) 100%
    );
  mix-blend-mode: multiply;
  opacity: 0.18;
}

.timeline-mini-coord-debug-point {
  position: absolute;
  left: var(--debug-x);
  top: var(--debug-y);
  width: 16px;
  height: 16px;
  border-radius: 999px;
  transform: translate(-50%, -50%);
  z-index: 17;
  pointer-events: none;
  border: 2px solid rgba(255, 245, 250, 0.95);
  background: rgba(179, 56, 104, 0.92);
  box-shadow:
    0 0 0 2px rgba(148, 42, 82, 0.5),
    0 0 18px rgba(201, 92, 132, 0.52);
}

.timeline-mini-coord-debug-point::before,
.timeline-mini-coord-debug-point::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  background: rgba(177, 67, 107, 0.6);
  transform: translate(-50%, -50%);
}

.timeline-mini-coord-debug-point::before {
  width: 1px;
  height: 24px;
}

.timeline-mini-coord-debug-point::after {
  width: 24px;
  height: 1px;
}

.timeline-mini-tile-layer.tile-wall {
  z-index: 2;
  background-image:
    linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.16) 0%,
      rgba(255, 255, 255, 0.04) 44%,
      rgba(0, 0, 0, 0.06) 100%
    ),
    var(--timeline-mini-wall-tile);
  background-size: 100% 100%, 238px 238px;
  background-repeat: no-repeat, repeat;
  mix-blend-mode: multiply;
  opacity: 0.54;
  animation: timelineMiniTileWallShift 34s linear infinite;
}

.timeline-mini-tile-layer.tile-floor {
  z-index: 5;
  clip-path: polygon(8% 64%, 92% 64%, 100% 100%, 0 100%);
  background-image:
    linear-gradient(180deg, rgba(255, 255, 255, 0.1), rgba(73, 28, 45, 0.26)),
    var(--timeline-mini-floor-tile);
  background-size: 100% 100%, 210px 128px;
  background-repeat: no-repeat, repeat;
  background-position: center, 0 0;
  opacity: 0.66;
  mix-blend-mode: multiply;
  transform-origin: 50% 100%;
  animation: timelineMiniTileFloorShift 18s ease-in-out infinite;
}

.timeline-mini-tile-layer.tile-stair {
  z-index: 6;
  left: 50%;
  right: auto;
  top: 42%;
  bottom: 64px;
  width: min(36%, 300px);
  transform: translateX(-50%);
  clip-path: polygon(42% 0, 58% 0, 100% 100%, 0 100%);
  background-image:
    linear-gradient(180deg, rgba(255, 255, 255, 0.18), rgba(84, 27, 53, 0.32)),
    var(--timeline-mini-stair-tile);
  background-size: 100% 100%, 100% 170px;
  background-repeat: no-repeat, repeat-y;
  opacity: 0.7;
  mix-blend-mode: multiply;
  filter: drop-shadow(0 6px 10px rgba(80, 30, 52, 0.22));
  animation: timelineMiniTileStairPulse 8s ease-in-out infinite;
}

.timeline-mini-parallax-layer {
  position: absolute;
  inset: 18px 24px 58px;
  border-radius: 12px;
  pointer-events: none;
}

.timeline-mini-parallax-layer.layer-back {
  z-index: 2;
  background:
    radial-gradient(circle at 20% 24%, rgba(255, 246, 230, 0.24), rgba(255, 246, 230, 0) 54%),
    radial-gradient(circle at 84% 32%, rgba(247, 219, 235, 0.2), rgba(247, 219, 235, 0) 56%);
  animation: timelineMiniParallaxBack 18s ease-in-out infinite;
}

.timeline-mini-parallax-layer.layer-front {
  z-index: 6;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.14), rgba(255, 255, 255, 0)),
    radial-gradient(circle at 50% 2%, rgba(255, 233, 190, 0.26), rgba(255, 233, 190, 0) 42%);
  mix-blend-mode: screen;
  animation: timelineMiniParallaxFront 15s ease-in-out infinite;
}

.timeline-mini-light-shaft {
  position: absolute;
  top: 12px;
  bottom: 84px;
  width: 30%;
  pointer-events: none;
  z-index: 6;
  opacity: calc(0.24 + (var(--timeline-magic-level) * 0.22));
  background: linear-gradient(
    180deg,
    rgba(255, 251, 240, 0),
    var(--timeline-mini-shaft-strong) 26%,
    var(--timeline-mini-shaft) 54%,
    rgba(255, 240, 210, 0)
  );
  filter: blur(10px);
}

.timeline-mini-light-shaft.shaft-a {
  left: 26%;
  transform: skewX(-13deg);
  animation: timelineMiniLightSweep 12.6s ease-in-out infinite;
}

.timeline-mini-light-shaft.shaft-b {
  right: 18%;
  transform: skewX(10deg);
  opacity: calc(0.2 + (var(--timeline-magic-level) * 0.18));
  animation: timelineMiniLightSweep 15.2s ease-in-out infinite reverse;
}

.timeline-mini-film-grain {
  position: absolute;
  inset: 14px 16px 58px;
  border-radius: 12px;
  pointer-events: none;
  z-index: 12;
  opacity: 0.16;
  background-image:
    radial-gradient(circle at 20% 26%, rgba(255, 255, 255, 0.35) 0 0.5px, transparent 0.6px),
    radial-gradient(circle at 72% 66%, rgba(255, 255, 255, 0.26) 0 0.55px, transparent 0.65px),
    radial-gradient(circle at 44% 52%, rgba(96, 30, 58, 0.24) 0 0.4px, transparent 0.52px);
  background-size: 80px 80px, 78px 78px, 66px 66px;
  mix-blend-mode: soft-light;
  animation: timelineMiniFilmGrain 2.2s steps(3, end) infinite;
}

.timeline-mini-dust-motes {
  position: absolute;
  inset: 24px 28px 82px;
  z-index: 7;
  pointer-events: none;
}

.timeline-mini-dust-motes i {
  position: absolute;
  left: var(--dust-x);
  top: var(--dust-y);
  width: var(--dust-size);
  height: var(--dust-size);
  border-radius: 50%;
  background: rgba(255, 239, 212, var(--dust-alpha));
  box-shadow: 0 0 10px rgba(255, 224, 184, 0.35);
  animation:
    timelineMiniDustFloat var(--dust-duration) ease-in-out infinite,
    timelineMiniDustDrift calc(var(--dust-duration) * 1.4) ease-in-out infinite;
  animation-delay: var(--dust-delay), var(--dust-delay);
}

.timeline-mini-illustrated-map {
  position: absolute;
  inset: var(--timeline-mini-map-top) var(--timeline-mini-map-x) var(--timeline-mini-map-bottom);
  z-index: 4;
  pointer-events: none;
  width: calc(100% - (var(--timeline-mini-map-x) * 2));
  height: calc(100% - (var(--timeline-mini-map-top) + var(--timeline-mini-map-bottom)));
  object-fit: cover;
  border-radius: 12px;
  user-select: none;
  filter:
    saturate(1.3)
    contrast(1.16)
    brightness(1.06)
    drop-shadow(0 10px 18px rgba(44, 18, 36, 0.28));
  transform: none;
  animation: none;
}

.timeline-mini-route-line {
  fill: none;
  stroke: rgba(172, 67, 106, 0.74);
  stroke-width: 1.8;
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-dasharray: 1.2 1.6;
  stroke-dashoffset: 0;
  opacity: calc(0.72 + (var(--timeline-magic-level) * 0.2));
  filter: drop-shadow(0 0 5px rgba(204, 133, 166, 0.34));
  animation: timelineMiniRouteFlow calc(8.8s - (var(--timeline-magic-level) * 2s)) linear infinite;
}

.timeline-mini-route-glow {
  fill: none;
  stroke: rgba(237, 180, 207, 0.38);
  stroke-width: 3;
  stroke-linecap: round;
  stroke-linejoin: round;
  filter: blur(0.75px);
}

.timeline-mini-route-dot {
  fill: rgba(250, 216, 233, 0.84);
  stroke: rgba(153, 64, 101, 0.58);
  stroke-width: 0.16;
  opacity: calc(0.76 + (var(--timeline-magic-level) * 0.2));
}

.timeline-mini-route-dot.dot-b {
  fill: rgba(245, 197, 169, 0.8);
  opacity: calc(0.62 + (var(--timeline-magic-level) * 0.18));
}

.timeline-mini-curtain {
  fill: rgba(139, 62, 92, 0.36);
  stroke: rgba(107, 43, 70, 0.34);
  stroke-width: 0.22;
}

.timeline-mini-curtain.curtain-left,
.timeline-mini-curtain.curtain-right {
  transform-origin: center top;
  animation: timelineMiniCurtainSwing 7s ease-in-out infinite;
}

.timeline-mini-curtain.curtain-right {
  animation-delay: -3.1s;
}

.timeline-mini-window-light {
  fill: rgba(255, 228, 175, 0.68);
  opacity: calc(0.54 + (var(--timeline-magic-level) * 0.26));
  animation: timelineMiniWindowPulse calc(4.4s - (var(--timeline-magic-level) * 0.8s)) ease-in-out infinite;
}

.timeline-mini-chandelier-glow {
  opacity: calc(0.28 + (var(--timeline-magic-level) * 0.24));
  transform-origin: 50% 14%;
  animation: timelineMiniChandelierFloat 5.8s ease-in-out infinite;
}

.timeline-mini-chandelier-core {
  transform-origin: 50% 14%;
  animation: timelineLanternCandle calc(2.2s - (var(--timeline-magic-level) * 0.36s)) ease-in-out infinite;
}

.timeline-mini-fog {
  position: absolute;
  left: 10%;
  right: 10%;
  bottom: 64px;
  height: 116px;
  z-index: 9;
  pointer-events: none;
  border-radius: 999px;
  opacity: calc(0.12 + (var(--timeline-magic-level) * 0.26));
  background:
    radial-gradient(circle at 24% 60%, rgba(255, 233, 246, 0.5), rgba(255, 233, 246, 0) 58%),
    radial-gradient(circle at 62% 42%, rgba(255, 225, 182, 0.36), rgba(255, 225, 182, 0) 56%),
    radial-gradient(circle at 84% 58%, rgba(250, 236, 245, 0.36), rgba(250, 236, 245, 0) 60%);
  filter: blur(calc(7px + (var(--timeline-magic-level) * 8px)));
  animation: timelineInteriorFogDrift calc(14s - (var(--timeline-magic-level) * 2s)) ease-in-out infinite;
}

.timeline-mini-fog.fog-a {
  transform: translateX(-18px) scale(1.02);
}

.timeline-mini-fog.fog-b {
  bottom: 88px;
  transform: translateX(14px) scale(0.9);
  opacity: calc(0.08 + (var(--timeline-magic-level) * 0.22));
  animation-delay: -4.4s;
}

.timeline-mini-sconce {
  position: absolute;
  width: 44px;
  height: 88px;
  z-index: 11;
  pointer-events: none;
  transform-origin: 50% 12%;
  filter: drop-shadow(0 6px 12px rgba(59, 21, 35, 0.28));
}

.timeline-mini-sconce.sconce-left-top {
  left: 20px;
  top: 104px;
}

.timeline-mini-sconce.sconce-right-top {
  right: 20px;
  top: 104px;
}

.timeline-mini-sconce.sconce-left-mid {
  left: 20px;
  top: 248px;
}

.timeline-mini-sconce.sconce-right-mid {
  right: 20px;
  top: 248px;
}

.timeline-mini-sconce img,
.timeline-mini-sconce-asset {
  width: 100%;
  height: 100%;
  display: block;
  animation:
    timelineMiniSconceFlicker calc(2.4s - (var(--timeline-magic-level) * 0.5s)) ease-in-out infinite,
    timelineMiniSconceSwing 7.6s ease-in-out infinite;
}

.timeline-mini-sconce.sconce-right-top img,
.timeline-mini-sconce.sconce-right-mid img {
  animation-delay: -0.35s, -2.6s;
}

.timeline-mini-lantern {
  position: absolute;
  top: 96px;
  width: 12px;
  height: 36px;
  border-radius: 7px;
  border: 1px solid rgba(137, 82, 58, 0.64);
  background: linear-gradient(180deg, rgba(94, 50, 40, 0.9), rgba(57, 29, 25, 0.92));
  z-index: 11;
  pointer-events: none;
  transform-origin: 50% 8%;
  animation: timelineMiniTorchSwing 4.2s ease-in-out infinite;
}

.timeline-mini-lantern::before {
  content: "";
  position: absolute;
  left: 2px;
  top: 10px;
  width: 8px;
  height: 14px;
  border-radius: 999px;
  background: rgba(255, 214, 143, 0.82);
  opacity: calc(var(--timeline-lantern-base) + (var(--timeline-magic-level) * 0.28));
  box-shadow:
    0 0 12px rgba(255, 219, 162, 0.56),
    0 0 20px rgba(244, 166, 113, 0.5);
  animation: timelineMiniTorchFlicker calc(1.8s - (var(--timeline-magic-level) * 0.3s)) ease-in-out infinite;
}

.timeline-mini-lantern::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 16px;
  width: 82px;
  height: 82px;
  transform: translate(-50%, -50%);
  border-radius: 999px;
  background: radial-gradient(circle, rgba(255, 221, 163, 0.34), rgba(255, 221, 163, 0) 74%);
  opacity: calc(0.26 + (var(--timeline-magic-level) * 0.34));
  filter: blur(1.6px);
  animation: timelineMiniTorchGlow calc(2.4s - (var(--timeline-magic-level) * 0.32s)) ease-in-out infinite;
}

.timeline-mini-lantern.lantern-left {
  left: 40px;
}

.timeline-mini-lantern.lantern-right {
  right: 40px;
  animation-delay: -1.3s;
}

.timeline-mini-npc {
  position: absolute;
  width: 14px;
  height: 30px;
  bottom: 106px;
  border-radius: 999px 999px 6px 6px;
  z-index: 11;
  pointer-events: none;
  background: linear-gradient(180deg, rgba(79, 32, 51, 0.66), rgba(45, 18, 31, 0.74));
  opacity: 0.4;
}

.timeline-mini-npc::before {
  content: "";
  position: absolute;
  left: 2px;
  top: -8px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: rgba(80, 34, 53, 0.72);
}

.timeline-mini-npc.npc-a {
  left: 26%;
  animation: timelineMiniNpcWalk 16s ease-in-out infinite;
}

.timeline-mini-npc.npc-b {
  left: 72%;
  animation: timelineMiniNpcWalk 15s ease-in-out infinite reverse;
}

.timeline-princess-top.timeline-mini-princess {
  width: min(290px, calc(100% - 20px));
  z-index: 14;
}

.timeline-mini-rooms {
  position: absolute;
  inset: var(--timeline-mini-map-top) var(--timeline-mini-map-x) var(--timeline-mini-map-bottom);
  z-index: 13;
  border-radius: 12px;
}

.timeline-mini-room {
  position: absolute;
  left: var(--room-x);
  top: var(--room-y);
  transform: translate(-50%, -50%);
  width: clamp(130px, 14.5vw, 164px);
  min-height: 58px;
  border-radius: 12px;
  border: 1px solid rgba(117, 42, 72, 0.32);
  background:
    linear-gradient(145deg, rgba(255, 254, 255, 0.78), rgba(247, 224, 236, 0.68)),
    radial-gradient(circle at 18% 16%, rgba(255, 255, 255, 0.46), transparent 44%);
  display: grid;
  grid-template-columns: auto 1fr;
  align-items: center;
  gap: 8px;
  padding: 7px 8px;
  text-align: left;
  color: rgba(92, 29, 54, 0.92);
  cursor: pointer;
  box-shadow:
    0 10px 14px rgba(111, 43, 70, 0.14),
    inset 0 1px 0 rgba(255, 255, 255, 0.68);
  backdrop-filter: blur(1.2px);
  transition:
    transform 0.2s ease,
    box-shadow 0.2s ease,
    border-color 0.2s ease,
    background 0.2s ease;
}

.timeline-mini-room:hover {
  transform: translate(-50%, calc(-50% - 1px));
  box-shadow:
    0 14px 22px rgba(124, 50, 79, 0.24),
    inset 0 1px 0 rgba(255, 255, 255, 0.72);
}

.timeline-mini-room.is-reached {
  border-color: rgba(157, 59, 96, 0.44);
  background:
    linear-gradient(145deg, rgba(255, 245, 251, 0.86), rgba(241, 208, 224, 0.82)),
    radial-gradient(circle at 16% 18%, rgba(255, 249, 234, 0.4), transparent 44%);
}

.timeline-mini-room.is-active {
  border-color: rgba(185, 70, 114, 0.62);
  box-shadow:
    0 16px 26px rgba(128, 51, 82, 0.28),
    0 0 0 2px rgba(255, 226, 238, 0.66);
}

.timeline-mini-room.is-locked {
  opacity: 0.56;
  cursor: not-allowed;
  filter: saturate(0.76);
}

.timeline-mini-room:disabled {
  pointer-events: none;
}

.timeline-mini-room-door {
  position: relative;
  width: 22px;
  height: 34px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: filter 0.24s ease, transform 0.24s ease;
}

.timeline-mini-room-door::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: 56px;
  height: 56px;
  transform: translate(-50%, -50%) scale(0.72);
  border-radius: 999px;
  pointer-events: none;
  opacity: 0;
  background:
    radial-gradient(circle, rgba(255, 238, 176, 0.62), rgba(255, 238, 176, 0) 70%);
}

.timeline-mini-room-door.is-glowing {
  transform: translateY(-1px) scale(1.03);
  filter:
    drop-shadow(0 0 6px rgba(255, 221, 158, 0.72))
    drop-shadow(0 0 14px rgba(249, 166, 99, 0.52));
}

.timeline-mini-room-door.is-glowing::after {
  opacity: 1;
  animation: timelineMiniDoorArrivalPulse 1.25s ease-in-out infinite;
}

.timeline-mini-room-door.is-proposal-door {
  transform: translateY(-1px);
  filter:
    drop-shadow(0 0 7px rgba(255, 218, 136, 0.72))
    drop-shadow(0 0 15px rgba(243, 176, 86, 0.54));
  transition: transform 0.22s ease, filter 0.22s ease;
}

.timeline-mini-room-door.is-proposal-door::after {
  opacity: 0.94;
  background:
    radial-gradient(circle, rgba(255, 234, 173, 0.74), rgba(255, 234, 173, 0) 72%);
  animation: timelineMiniProposalDoorShine 1.95s ease-in-out infinite;
}

.timeline-mini-room-door.is-proposal-door .timeline-mini-door-asset {
  filter:
    sepia(0.94) saturate(1.65) hue-rotate(-8deg) brightness(1.08)
    drop-shadow(0 1px 2px rgba(131, 82, 25, 0.38));
}

.timeline-mini-room:not(:disabled):hover .timeline-mini-room-door.is-proposal-door,
.timeline-mini-room:focus-visible .timeline-mini-room-door.is-proposal-door {
  transform: translateY(-2px) scale(1.12);
  filter:
    drop-shadow(0 0 10px rgba(255, 226, 152, 0.9))
    drop-shadow(0 0 24px rgba(251, 189, 96, 0.78));
}

.timeline-mini-room:not(:disabled):hover .timeline-mini-room-door.is-proposal-door::after,
.timeline-mini-room:focus-visible .timeline-mini-room-door.is-proposal-door::after {
  opacity: 1;
  animation-duration: 1.1s;
}

.timeline-mini-room-door img,
.timeline-mini-door-asset {
  width: 100%;
  height: 100%;
  display: block;
  filter: drop-shadow(0 1px 2px rgba(77, 29, 38, 0.3));
}

.timeline-mini-room-copy {
  display: grid;
  gap: 2px;
  min-width: 0;
}

.timeline-mini-room-copy strong {
  font-family: "Cinzel", serif;
  font-size: 0.62rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  white-space: nowrap;
}

.timeline-mini-room-copy small {
  font-size: 0.62rem;
  color: rgba(97, 32, 56, 0.78);
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.timeline-prince-marker.is-minimap {
  z-index: 15;
  width: 38px;
  height: 38px;
  border-color: rgba(142, 52, 83, 0.42);
  box-shadow:
    0 12px 18px rgba(112, 39, 68, 0.3),
    0 0 0 3px rgba(250, 216, 235, 0.64);
}

.timeline-prince-marker.is-minimap img,
.timeline-mini-prince-asset {
  width: 24px;
  height: 24px;
  display: block;
}

.timeline-prince-marker.is-minimap small {
  min-width: 74px;
  text-align: center;
}

.timeline-map-hint.timeline-mini-status {
  margin-top: 10px;
  position: relative;
  left: auto;
  right: auto;
  bottom: auto;
  transform: none;
  width: 100%;
  z-index: 8;
  border-radius: 14px;
  border-color: rgba(125, 46, 75, 0.22);
  background: rgba(255, 248, 252, 0.92);
  backdrop-filter: blur(2px);
}

.timeline-floor-controls {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 10px;
  width: min(860px, 100%);
  margin-inline: auto;
}

.timeline-story-card {
  border-radius: 18px;
  border: 1px solid rgba(130, 47, 77, 0.24);
  background:
    radial-gradient(circle at 86% 12%, rgba(255, 236, 245, 0.66), transparent 44%),
    linear-gradient(145deg, rgba(255, 253, 250, 0.98), rgba(250, 231, 240, 0.95));
  box-shadow:
    0 18px 28px rgba(125, 46, 77, 0.16),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  padding: 20px 20px 18px;
}

.timeline-story-card.is-nature-card {
  position: relative;
  overflow: hidden;
  border-color: rgba(70, 117, 72, 0.34);
  background:
    radial-gradient(circle at 10% 14%, rgba(220, 247, 214, 0.54), transparent 34%),
    radial-gradient(circle at 90% 20%, rgba(232, 244, 208, 0.44), transparent 36%),
    linear-gradient(145deg, rgba(251, 255, 247, 0.98), rgba(233, 245, 225, 0.94));
  box-shadow:
    0 18px 30px rgba(58, 92, 63, 0.18),
    inset 0 1px 0 rgba(255, 255, 255, 0.92),
    inset 0 -18px 28px rgba(108, 163, 106, 0.14);
}

.timeline-story-card.is-date-two-card {
  position: relative;
  overflow: hidden;
  border-color: rgba(70, 99, 158, 0.38);
  background:
    radial-gradient(circle at 84% 10%, rgba(171, 194, 255, 0.3), transparent 44%),
    radial-gradient(circle at 8% 16%, rgba(216, 234, 255, 0.24), transparent 48%),
    linear-gradient(150deg, rgba(246, 249, 255, 0.99), rgba(221, 232, 248, 0.95));
  box-shadow:
    0 20px 32px rgba(32, 45, 85, 0.26),
    inset 0 1px 0 rgba(255, 255, 255, 0.92),
    inset 0 -20px 30px rgba(67, 85, 135, 0.16);
}

.timeline-story-card.is-date-two-card::before,
.timeline-story-card.is-date-two-card::after {
  content: "";
  position: absolute;
  pointer-events: none;
  border-radius: 999px;
  z-index: 0;
}

.timeline-story-card.is-date-two-card::before {
  width: 260px;
  height: 260px;
  right: -68px;
  top: -98px;
  background:
    radial-gradient(circle at 36% 34%, rgba(169, 191, 245, 0.44), transparent 60%),
    radial-gradient(circle at 58% 52%, rgba(255, 253, 248, 0.24), transparent 64%);
  opacity: 0.9;
  animation: timelineDateTwoSkyPulse 6.2s ease-in-out infinite;
}

.timeline-story-card.is-date-two-card::after {
  width: 280px;
  height: 280px;
  left: -102px;
  bottom: -134px;
  background:
    radial-gradient(circle at 50% 40%, rgba(135, 157, 212, 0.36), transparent 62%),
    radial-gradient(circle at 68% 64%, rgba(205, 221, 248, 0.3), transparent 72%);
  opacity: 0.84;
  animation: timelineDateTwoSkyPulse 7s ease-in-out infinite reverse;
}

.timeline-nature-leaves {
  position: absolute;
  inset: 8px;
  overflow: hidden;
  pointer-events: none;
  z-index: 3;
}

.timeline-nature-leaves i {
  position: absolute;
  left: var(--leaf-x);
  top: var(--leaf-y);
  width: var(--leaf-size);
  height: calc(var(--leaf-size) * 0.58);
  border-radius: 72% 28% 74% 26%;
  transform: translate(-50%, -50%) rotate(var(--leaf-rotate));
  background:
    linear-gradient(140deg, rgba(215, 250, 179, 0.9), rgba(100, 170, 83, 0.86));
  box-shadow:
    inset -1px -1px 0 rgba(66, 126, 58, 0.42),
    0 2px 8px rgba(52, 103, 48, 0.3);
  opacity: 0.82;
  filter: saturate(1.2);
  will-change: transform, opacity;
  animation: timelineNatureLeafFall var(--leaf-duration) linear infinite;
  animation-delay: var(--leaf-delay);
}

.timeline-nature-leaves i::before {
  content: "";
  position: absolute;
  left: 49%;
  top: 12%;
  width: 1.5px;
  height: 74%;
  transform: translateX(-50%);
  border-radius: 999px;
  background: rgba(52, 108, 45, 0.38);
}

.timeline-story-card.is-nature-card::before,
.timeline-story-card.is-nature-card::after {
  content: "";
  position: absolute;
  pointer-events: none;
  border-radius: 999px;
  z-index: 0;
}

.timeline-story-card.is-nature-card::before {
  width: 220px;
  height: 220px;
  left: -64px;
  top: -70px;
  opacity: 0.98;
  background:
    radial-gradient(circle at 36% 34%, rgba(133, 188, 112, 0.4), transparent 62%),
    radial-gradient(circle at 64% 58%, rgba(175, 218, 148, 0.34), transparent 64%),
    radial-gradient(circle at 54% 48%, rgba(255, 255, 255, 0.26), transparent 72%);
  filter: blur(0.2px);
  animation: timelineNatureBloom 4.8s ease-in-out infinite;
}

.timeline-story-card.is-nature-card::after {
  width: 270px;
  height: 270px;
  right: -94px;
  bottom: -114px;
  opacity: 0.92;
  background:
    radial-gradient(circle at 30% 34%, rgba(158, 200, 126, 0.42), transparent 60%),
    radial-gradient(circle at 58% 58%, rgba(225, 238, 188, 0.35), transparent 66%),
    radial-gradient(circle at 76% 30%, rgba(255, 255, 255, 0.24), transparent 70%);
  filter: blur(0.3px);
  animation: timelineNatureBloom 5.6s ease-in-out infinite reverse;
}

.timeline-story-card.is-nature-card > * {
  position: relative;
  z-index: 2;
}

.timeline-story-card.is-nature-card > .timeline-nature-leaves {
  z-index: 3;
}

.timeline-story-card.is-date-two-card > :not(.timeline-date-two-sky) {
  position: relative;
  z-index: 3;
}

.timeline-date-two-sky {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  border-radius: inherit;
  z-index: 5;
}

.timeline-date-two-moon {
  position: absolute;
  top: 14px;
  right: 20px;
  width: clamp(58px, 9vw, 72px);
  aspect-ratio: 1;
  border-radius: 50%;
  background:
    radial-gradient(circle at 30% 30%, rgba(255, 253, 242, 0.98), rgba(251, 228, 178, 0.92) 56%, rgba(245, 201, 149, 0.86) 72%, rgba(231, 167, 124, 0.44) 100%);
  box-shadow:
    0 0 20px rgba(255, 217, 162, 0.46),
    0 0 54px rgba(169, 201, 255, 0.3);
  opacity: 0.9;
  mix-blend-mode: screen;
  animation: timelineDateTwoMoonFloat 4.8s ease-in-out infinite;
}

.timeline-date-two-star-rain {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.timeline-date-two-star-rain i {
  position: absolute;
  left: var(--shoot-x);
  top: var(--shoot-y);
  width: var(--shoot-size);
  height: calc(var(--shoot-size) * 18);
  border-radius: 999px;
  transform: translate(-50%, -50%) rotate(26deg);
  transform-origin: center;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.99), rgba(178, 217, 255, 0.01));
  box-shadow:
    0 0 12px rgba(209, 233, 255, 0.74),
    0 0 28px rgba(158, 204, 255, 0.5);
  mix-blend-mode: screen;
  opacity: 0;
  will-change: transform, opacity;
  animation: timelineDateTwoStarRain var(--shoot-duration) linear infinite;
  animation-delay: var(--shoot-delay);
}

.timeline-date-two-star-rain i::before {
  content: "";
  position: absolute;
  top: -2px;
  left: 50%;
  width: calc(var(--shoot-size) * 2.9);
  height: calc(var(--shoot-size) * 2.9);
  transform: translateX(-50%);
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 255, 255, 1), rgba(196, 230, 255, 0.7) 56%, transparent 100%);
  animation: timelineDateTwoMeteorFlash var(--shoot-duration) linear infinite;
  animation-delay: var(--shoot-delay);
}

.timeline-date-two-star-rain i::after {
  content: "";
  position: absolute;
  top: 18%;
  left: 50%;
  width: calc(var(--shoot-size) * 0.9);
  height: calc(var(--shoot-size) * 11);
  transform: translateX(-50%);
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(196, 227, 255, 0.74), rgba(196, 227, 255, 0));
  filter: blur(0.45px);
}

.timeline-story-day.is-nature-day {
  border-color: rgba(84, 135, 84, 0.34);
  background:
    radial-gradient(circle at 20% 24%, rgba(245, 255, 235, 0.84), transparent 54%),
    rgba(243, 251, 233, 0.92);
  color: rgba(58, 95, 58, 0.92);
  box-shadow:
    0 4px 10px rgba(88, 138, 82, 0.12),
    inset 0 1px 0 rgba(255, 255, 255, 0.82);
}

.timeline-story-day.is-date-two-day {
  border-color: rgba(89, 122, 186, 0.34);
  background:
    radial-gradient(circle at 24% 26%, rgba(241, 248, 255, 0.82), transparent 54%),
    rgba(231, 240, 252, 0.95);
  color: rgba(45, 67, 112, 0.96);
  box-shadow:
    0 4px 11px rgba(73, 97, 151, 0.16),
    inset 0 1px 0 rgba(255, 255, 255, 0.88);
}

.timeline-story-day {
  display: inline-flex;
  align-items: center;
  padding: 6px 11px;
  border-radius: 999px;
  border: 1px solid rgba(140, 53, 84, 0.22);
  background: rgba(255, 248, 252, 0.9);
  font-family: "Cinzel", serif;
  font-size: 0.71rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: rgba(111, 35, 62, 0.9);
}

.timeline-story-card h3 {
  margin: 10px 0 6px;
  color: #6a1e37;
  font-size: clamp(1.34rem, 2.6vw, 1.78rem);
}

.timeline-story-card.is-nature-card h3 {
  color: #2f5a2d;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.48);
}

.timeline-story-date {
  margin-bottom: 9px;
  font-size: 0.94rem;
  font-style: italic;
  color: rgba(92, 30, 53, 0.82);
}

.timeline-story-card.is-nature-card .timeline-story-date {
  color: rgba(64, 98, 50, 0.84);
}

.timeline-story-card.is-date-two-card h3 {
  color: #2c4978;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.54);
}

.timeline-story-card.is-date-two-card .timeline-story-date {
  color: rgba(52, 77, 122, 0.88);
}

.timeline-story-photo {
  margin: 0 0 12px;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid rgba(130, 47, 77, 0.24);
  box-shadow:
    0 10px 18px rgba(95, 31, 56, 0.18),
    inset 0 1px 0 rgba(255, 255, 255, 0.35);
  background: rgba(255, 247, 252, 0.78);
}

.timeline-story-card.is-nature-card .timeline-story-photo {
  padding: 8px;
  border-color: rgba(84, 129, 73, 0.3);
  box-shadow:
    0 12px 22px rgba(64, 106, 62, 0.16),
    inset 0 1px 0 rgba(255, 255, 255, 0.5),
    0 0 0 2px rgba(228, 243, 212, 0.72);
  background:
    linear-gradient(150deg, rgba(245, 255, 236, 0.95), rgba(226, 245, 206, 0.85));
}

.timeline-story-card.is-nature-card .timeline-story-photo img {
  width: 100%;
  max-height: none;
  height: clamp(300px, 50vh, 470px);
  object-fit: contain;
  object-position: center center;
  border-radius: 10px;
  background: rgba(232, 246, 214, 0.4);
}

.timeline-story-card.is-date-two-card .timeline-story-photo {
  border-color: rgba(91, 121, 176, 0.3);
  box-shadow:
    0 12px 22px rgba(43, 63, 108, 0.24),
    inset 0 1px 0 rgba(255, 255, 255, 0.52),
    0 0 0 1.5px rgba(214, 229, 249, 0.8);
  background:
    linear-gradient(150deg, rgba(241, 247, 255, 0.95), rgba(217, 229, 245, 0.85));
}

.timeline-story-photo img {
  display: block;
  width: 100%;
  max-height: min(44vh, 360px);
  object-fit: cover;
}

.timeline-story-photo-grid {
  display: grid;
  gap: 12px;
  margin-bottom: 12px;
}

.timeline-story-photo-grid-date-four {
  grid-template-columns: minmax(0, 1.08fr) minmax(0, 0.92fr);
  align-items: stretch;
}

.timeline-story-photo-grid-date-four .timeline-story-photo {
  margin: 0;
}

.timeline-story-photo-grid-date-four .timeline-story-photo-duo {
  border-radius: 12px;
}

.timeline-story-photo-grid-date-four .timeline-story-photo-duo.slot-1 img {
  height: clamp(280px, 44vh, 382px);
  max-height: none;
  object-position: center 28%;
}

.timeline-story-photo-grid-date-four .timeline-story-photo-duo.slot-2 img {
  height: clamp(280px, 44vh, 382px);
  max-height: none;
  object-position: center center;
}

.timeline-story-card p:not(.timeline-story-date) {
  margin: 0;
}

.timeline-story-card.is-nature-card p:not(.timeline-story-date) {
  color: rgba(43, 69, 34, 0.9);
}

.timeline-story-card.is-date-two-card p:not(.timeline-story-date) {
  color: rgba(33, 50, 84, 0.92);
}

.timeline-content-tags {
  margin-top: 14px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.timeline-content-tags span {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 5px 10px;
  border-radius: 999px;
  border: 1px solid rgba(140, 52, 84, 0.18);
  background: rgba(255, 245, 250, 0.86);
  font-size: 0.74rem;
  color: rgba(97, 31, 55, 0.9);
}

.timeline-content-tags .icon-glyph {
  width: 13px;
  height: 13px;
}

.timeline-story-card.is-nature-card .timeline-content-tags span {
  border-color: rgba(86, 132, 80, 0.24);
  background: rgba(241, 250, 230, 0.9);
  color: rgba(55, 92, 48, 0.92);
}

.timeline-story-card.is-date-two-card .timeline-content-tags span {
  border-color: rgba(91, 122, 177, 0.24);
  background: rgba(235, 244, 255, 0.9);
  color: rgba(42, 65, 108, 0.92);
}

.timeline-story-card.is-date-three-card {
  position: relative;
  overflow: hidden;
  padding-top: 72px;
  border-color: rgba(160, 108, 56, 0.4);
  background:
    radial-gradient(circle at 86% 8%, rgba(255, 228, 168, 0.36), transparent 38%),
    radial-gradient(circle at 8% 14%, rgba(255, 246, 221, 0.24), transparent 44%),
    linear-gradient(150deg, rgba(255, 250, 243, 0.99), rgba(244, 230, 214, 0.95));
  box-shadow:
    0 22px 34px rgba(66, 41, 21, 0.26),
    inset 0 1px 0 rgba(255, 255, 255, 0.9),
    inset 0 -20px 32px rgba(133, 74, 47, 0.16);
}

.timeline-story-card.is-date-three-card > :not(.timeline-date-three-cinema) {
  position: relative;
  z-index: 2;
}

.timeline-date-three-cinema {
  position: absolute;
  inset: 0;
  overflow: hidden;
  border-radius: inherit;
  pointer-events: none;
  z-index: 1;
}

.timeline-date-three-cinema::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 16% 20%, rgba(255, 212, 132, 0.16), transparent 44%),
    radial-gradient(circle at 84% 22%, rgba(255, 205, 130, 0.14), transparent 42%),
    linear-gradient(180deg, rgba(80, 21, 32, 0.1), transparent 54%);
}

.timeline-date-three-marquee {
  position: absolute;
  top: 10px;
  left: 18px;
  right: 18px;
  height: 32px;
  border-radius: 12px;
  border: 1px solid rgba(150, 94, 48, 0.46);
  background:
    linear-gradient(180deg, rgba(113, 37, 42, 0.95), rgba(82, 23, 33, 0.96));
  box-shadow:
    0 8px 20px rgba(44, 18, 20, 0.32),
    inset 0 1px 0 rgba(255, 221, 179, 0.4);
}

.timeline-date-three-marquee-lights {
  position: absolute;
  inset: 5px 10px;
  border-radius: 8px;
  background:
    radial-gradient(circle, rgba(255, 241, 190, 0.92) 32%, rgba(255, 200, 114, 0.62) 52%, transparent 60%) 0 50% / 24px 100% repeat-x;
  filter: drop-shadow(0 0 5px rgba(255, 196, 106, 0.52));
  animation: timelineDateThreeMarqueePulse 1.65s ease-in-out infinite;
}

.timeline-date-three-curtain {
  position: absolute;
  top: 48px;
  width: 50px;
  height: 47%;
  border-radius: 0 0 16px 16px;
  background:
    linear-gradient(90deg, rgba(120, 30, 45, 0.9), rgba(87, 17, 34, 0.94), rgba(120, 30, 45, 0.9));
  box-shadow:
    inset -8px 0 10px rgba(51, 8, 20, 0.3),
    inset 8px 0 10px rgba(170, 63, 74, 0.26);
  opacity: 0.75;
  transform-origin: top;
  animation: timelineDateThreeCurtainSway 5.2s ease-in-out infinite;
}

.timeline-date-three-curtain.curtain-left {
  left: 0;
  border-top-right-radius: 18px;
}

.timeline-date-three-curtain.curtain-right {
  right: 0;
  border-top-left-radius: 18px;
  animation-delay: 0.65s;
}

.timeline-date-three-projector {
  position: absolute;
  right: 20px;
  top: 70px;
  width: 54px;
  height: 28px;
  border-radius: 8px;
  background: linear-gradient(180deg, rgba(65, 73, 86, 0.9), rgba(32, 36, 43, 0.94));
  box-shadow:
    0 8px 14px rgba(21, 22, 28, 0.28),
    inset 0 1px 0 rgba(215, 220, 232, 0.28);
  animation: timelineDateThreeProjectorFlicker 0.18s steps(2, end) infinite;
}

.timeline-date-three-projector::before {
  content: "";
  position: absolute;
  left: -6px;
  top: 50%;
  width: 7px;
  height: 10px;
  transform: translateY(-50%);
  border-radius: 4px;
  background: radial-gradient(circle, rgba(255, 244, 210, 0.96), rgba(255, 211, 133, 0.44) 66%, transparent 100%);
  box-shadow: 0 0 8px rgba(255, 211, 133, 0.46);
  animation: timelineDateThreeProjectorFlicker 0.18s steps(2, end) infinite;
}

.timeline-date-three-projector i {
  position: absolute;
  border-radius: 50%;
  background: rgba(84, 91, 106, 0.94);
  border: 1px solid rgba(161, 168, 184, 0.42);
}

.timeline-date-three-projector i:first-child {
  width: 14px;
  height: 14px;
  left: 10px;
  top: 8px;
}

.timeline-date-three-projector i:last-child {
  width: 12px;
  height: 12px;
  right: 8px;
  top: 9px;
}

.timeline-date-three-beam {
  position: absolute;
  top: 84px;
  right: 62px;
  width: 48%;
  height: 44%;
  transform-origin: right center;
  clip-path: polygon(100% 48%, 0 0, 0 100%);
  background:
    linear-gradient(90deg, rgba(255, 242, 195, 0.34), rgba(255, 242, 195, 0.02));
  filter: blur(0.2px);
  overflow: hidden;
  animation: timelineDateThreeBeamSweep 4.2s ease-in-out infinite;
}

.timeline-date-three-beam::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    linear-gradient(90deg, rgba(255, 247, 218, 0.44), rgba(255, 247, 218, 0.04));
  mix-blend-mode: screen;
  animation: timelineDateThreeProjectorFlicker 0.18s steps(2, end) infinite;
}

.timeline-date-three-beam-dust {
  position: absolute;
  inset: 0;
}

.timeline-date-three-beam-dust i {
  position: absolute;
  left: var(--cinema-dust-x);
  top: var(--cinema-dust-y);
  width: var(--cinema-dust-size);
  height: var(--cinema-dust-size);
  border-radius: 50%;
  background: rgba(255, 241, 201, 0.88);
  filter: blur(0.25px);
  opacity: 0;
  animation: timelineDateThreeDustFloat var(--cinema-dust-duration) ease-in-out infinite;
  animation-delay: var(--cinema-dust-delay);
}

.timeline-date-three-carpet {
  position: absolute;
  left: 50%;
  bottom: -72px;
  width: 62%;
  height: 72px;
  transform: translateX(-50%);
  border-radius: 22px 22px 14px 14px;
  background:
    linear-gradient(180deg, rgba(163, 28, 57, 0.84), rgba(117, 16, 40, 0.88));
  box-shadow:
    0 -2px 0 rgba(224, 171, 102, 0.52),
    0 8px 16px rgba(63, 9, 22, 0.26);
  opacity: 0.34;
  filter: blur(0.2px);
  animation: timelineDateThreeCarpetGlow 2.9s ease-in-out infinite;
}

.timeline-story-day.is-date-three-day {
  border-color: rgba(172, 119, 57, 0.4);
  background:
    radial-gradient(circle at 20% 24%, rgba(255, 247, 225, 0.9), transparent 54%),
    rgba(255, 240, 211, 0.94);
  color: rgba(112, 63, 18, 0.95);
  box-shadow:
    0 4px 11px rgba(151, 99, 50, 0.17),
    inset 0 1px 0 rgba(255, 255, 255, 0.88);
}

.timeline-story-card.is-date-three-card h3 {
  margin-top: 0;
  max-width: calc(100% - 96px);
  color: #7c2a2d;
  text-shadow: 0 1px 0 rgba(255, 243, 227, 0.66);
}

.timeline-story-card.is-date-three-card .timeline-story-date {
  color: rgba(125, 62, 28, 0.9);
}

.timeline-story-card.is-date-three-card .timeline-story-photo {
  width: min(100%, 320px);
  aspect-ratio: 9 / 16;
  margin: 0 auto 14px;
  padding: 4px;
  border-color: rgba(153, 95, 44, 0.34);
  box-shadow:
    0 12px 20px rgba(67, 35, 16, 0.22),
    inset 0 1px 0 rgba(255, 255, 255, 0.56),
    0 0 0 1.5px rgba(255, 229, 189, 0.82);
  background:
    linear-gradient(150deg, rgba(255, 247, 230, 0.95), rgba(249, 228, 193, 0.84));
}

.timeline-story-card.is-date-three-card .timeline-story-photo img {
  width: 100%;
  max-height: none;
  height: 100%;
  object-fit: cover;
  object-position: center 35%;
  border-radius: 12px;
  background: rgba(255, 245, 224, 0.5);
}

.timeline-story-card.is-date-three-card p:not(.timeline-story-date) {
  color: rgba(68, 33, 17, 0.92);
}

.timeline-story-card.is-date-three-card .timeline-content-tags span {
  border-color: rgba(163, 112, 58, 0.28);
  background: rgba(255, 240, 217, 0.9);
  color: rgba(114, 64, 21, 0.92);
}

.timeline-story-card.is-date-four-card {
  position: relative;
  overflow: hidden;
  border-color: rgba(97, 122, 194, 0.42);
  background:
    radial-gradient(circle at 84% 10%, rgba(122, 174, 255, 0.34), transparent 44%),
    radial-gradient(circle at 12% 16%, rgba(255, 170, 214, 0.24), transparent 48%),
    linear-gradient(150deg, rgba(248, 241, 255, 0.99), rgba(227, 215, 244, 0.95));
  box-shadow:
    0 22px 36px rgba(34, 24, 58, 0.34),
    inset 0 1px 0 rgba(255, 255, 255, 0.88),
    inset 0 -18px 34px rgba(104, 76, 158, 0.16);
}

.timeline-story-card.is-date-four-card > :not(.timeline-date-four-concert) {
  position: relative;
  z-index: 2;
}

.timeline-date-four-concert {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  overflow: hidden;
  pointer-events: none;
  z-index: 1;
}

.timeline-date-four-concert::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 50% 106%, rgba(68, 31, 97, 0.36), transparent 58%),
    linear-gradient(180deg, rgba(26, 24, 50, 0.08), transparent 48%);
}

.timeline-date-four-stage-lights {
  position: absolute;
  left: 26px;
  right: 26px;
  top: 14px;
  height: 52px;
  border-radius: 14px;
  border: 1px solid rgba(125, 146, 214, 0.38);
  background:
    linear-gradient(180deg, rgba(47, 36, 86, 0.92), rgba(33, 24, 67, 0.94));
  box-shadow:
    0 12px 24px rgba(24, 17, 43, 0.34),
    inset 0 1px 0 rgba(189, 197, 255, 0.4);
}

.timeline-date-four-stage-lights::before,
.timeline-date-four-stage-lights::after {
  content: "";
  position: absolute;
  border-radius: 999px;
  filter: blur(0.2px);
}

.timeline-date-four-stage-lights::before {
  inset: 7px 14px;
  background:
    radial-gradient(circle at 10% 50%, rgba(255, 208, 233, 0.8) 24%, transparent 30%) 0 0 / 34px 100%
      repeat-x;
  opacity: 0.8;
  animation: timelineDateFourLampPulse 1.9s ease-in-out infinite;
}

.timeline-date-four-stage-lights::after {
  left: 50%;
  top: 44px;
  width: 54%;
  height: 160px;
  transform: translateX(-50%);
  background:
    radial-gradient(ellipse at top, rgba(137, 198, 255, 0.34), rgba(137, 198, 255, 0) 74%),
    radial-gradient(ellipse at 50% 12%, rgba(255, 187, 224, 0.24), transparent 72%);
  opacity: 0.72;
  animation: timelineDateFourBeamPulse 4.4s ease-in-out infinite;
}

.timeline-date-four-eq {
  position: absolute;
  left: 54px;
  right: 54px;
  bottom: 22px;
  height: 46px;
  display: grid;
  grid-template-columns: repeat(14, 1fr);
  gap: 5px;
  align-items: end;
}

.timeline-date-four-eq i {
  height: calc(8px + (var(--bar-live-level, 0.22) * 36px));
  border-radius: 6px 6px 2px 2px;
  background: linear-gradient(180deg, rgba(193, 231, 255, 0.82), rgba(120, 155, 244, 0.82));
  box-shadow:
    0 0 8px rgba(123, 164, 255, 0.44),
    inset 0 1px 0 rgba(255, 255, 255, 0.44);
  opacity: calc(0.5 + (var(--bar-live-level, 0.22) * 0.54));
  transform-origin: bottom center;
  filter: saturate(calc(0.95 + (var(--bar-live-level, 0.22) * 0.8)))
    brightness(calc(0.94 + (var(--bar-live-level, 0.22) * 0.4)));
  transition: height 0.12s linear, opacity 0.12s linear, filter 0.12s linear;
}

.timeline-date-four-concert.is-audio-reactive .timeline-date-four-eq i {
  height: calc(10px + (var(--bar-live-level, 0) * 40px));
  opacity: calc(0.56 + (var(--bar-live-level, 0) * 0.62));
  filter: saturate(calc(1 + (var(--bar-live-level, 0) * 0.92)))
    brightness(calc(0.98 + (var(--bar-live-level, 0) * 0.46)));
}

.timeline-date-four-concert.is-audio-reactive .timeline-date-four-stage-lights::before {
  opacity: calc(0.58 + (var(--timeline-day4-beat, 0) * 0.38));
}

.timeline-date-four-concert.is-audio-reactive .timeline-date-four-floor-glow {
  opacity: calc(0.5 + (var(--timeline-day4-beat, 0) * 0.42));
}

.timeline-date-four-spark-rain {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.timeline-date-four-spark-rain i {
  position: absolute;
  left: var(--spark-x);
  top: var(--spark-y);
  width: calc(var(--spark-size) * 1.2);
  height: calc(var(--spark-size) * 7.8);
  border-radius: 999px;
  background: linear-gradient(
    180deg,
    rgba(255, 243, 254, 0.96),
    rgba(160, 223, 255, 0.35) 56%,
    rgba(160, 223, 255, 0)
  );
  box-shadow:
    0 0 8px rgba(181, 223, 255, 0.54),
    0 0 18px rgba(223, 170, 255, 0.34);
  opacity: 0;
  transform: translate(-50%, -50%) rotate(18deg);
  animation: timelineDateFourSparkRain var(--spark-duration) linear infinite;
  animation-delay: var(--spark-delay);
}

.timeline-date-four-spark-rain i::before {
  content: "";
  position: absolute;
  top: -2px;
  left: 50%;
  width: calc(var(--spark-size) * 2.2);
  height: calc(var(--spark-size) * 2.2);
  transform: translateX(-50%);
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 255, 255, 1), rgba(178, 226, 255, 0.8) 56%, transparent 100%);
}

.timeline-date-four-floor-glow {
  position: absolute;
  left: 50%;
  bottom: -76px;
  width: 72%;
  height: 124px;
  transform: translateX(-50%);
  border-radius: 999px;
  background:
    radial-gradient(ellipse at center, rgba(117, 155, 255, 0.38), rgba(117, 155, 255, 0) 68%),
    radial-gradient(ellipse at 50% 40%, rgba(245, 177, 240, 0.3), transparent 74%);
  filter: blur(1.6px);
  opacity: 0.74;
  animation: timelineDateFourFloorPulse 3.6s ease-in-out infinite;
}

.timeline-story-day.is-date-four-day {
  border-color: rgba(90, 118, 190, 0.44);
  background:
    radial-gradient(circle at 18% 24%, rgba(235, 243, 255, 0.92), transparent 56%),
    rgba(224, 233, 251, 0.95);
  color: rgba(42, 64, 119, 0.95);
  box-shadow:
    0 4px 11px rgba(56, 76, 124, 0.18),
    inset 0 1px 0 rgba(255, 255, 255, 0.88);
}

.timeline-story-card.is-date-four-card h3 {
  margin-top: 2px;
  margin-bottom: 8px;
  display: inline-block;
  max-width: 100%;
  padding: 5px 12px 6px;
  border-radius: 12px;
  border: 1px solid rgba(78, 112, 186, 0.46);
  background:
    linear-gradient(160deg, rgba(245, 250, 255, 0.94), rgba(214, 230, 255, 0.86));
  box-shadow:
    0 10px 20px rgba(35, 48, 93, 0.24),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  font-size: clamp(1.5rem, 2.95vw, 2.05rem);
  line-height: 1.05;
  letter-spacing: 0.01em;
  color: #142f70;
  text-shadow:
    0 1px 0 rgba(255, 255, 255, 0.92),
    0 0 12px rgba(153, 209, 255, 0.52);
}

.timeline-story-card.is-date-four-card .timeline-story-date {
  color: rgba(51, 77, 142, 0.9);
}

.timeline-story-card.is-date-four-card .timeline-story-photo {
  border-color: rgba(97, 127, 197, 0.34);
  box-shadow:
    0 12px 24px rgba(35, 51, 94, 0.28),
    inset 0 1px 0 rgba(255, 255, 255, 0.54),
    0 0 0 1.5px rgba(223, 235, 255, 0.8);
  background:
    linear-gradient(150deg, rgba(245, 250, 255, 0.95), rgba(225, 235, 252, 0.88));
}

.timeline-story-card.is-date-four-card p:not(.timeline-story-date) {
  color: rgba(33, 44, 84, 0.93);
}

.timeline-story-card.is-date-four-card .timeline-content-tags span {
  border-color: rgba(100, 130, 198, 0.28);
  background: rgba(234, 242, 255, 0.9);
  color: rgba(43, 62, 111, 0.92);
}

.timeline-story-card.is-date-five-card {
  position: relative;
  overflow: hidden;
  border-color: rgba(168, 84, 104, 0.44);
  background:
    radial-gradient(circle at 86% 12%, rgba(255, 228, 192, 0.34), transparent 46%),
    radial-gradient(circle at 10% 18%, rgba(255, 196, 214, 0.24), transparent 48%),
    linear-gradient(155deg, rgba(255, 247, 249, 0.99), rgba(245, 227, 233, 0.96));
  box-shadow:
    0 22px 36px rgba(72, 24, 38, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.92),
    inset 0 -20px 30px rgba(162, 76, 98, 0.14);
}

.timeline-story-card.is-date-five-card > :not(.timeline-date-five-proposal):not(.timeline-date-five-petals-front) {
  position: relative;
  z-index: 2;
}

.timeline-date-five-proposal {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  overflow: hidden;
  pointer-events: none;
  z-index: 1;
}

.timeline-date-five-veil {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 50% 12%, rgba(255, 226, 183, 0.34), transparent 50%),
    linear-gradient(180deg, rgba(109, 24, 44, 0.09), transparent 46%);
}

.timeline-date-five-golden-door {
  position: absolute;
  right: 26px;
  top: 64px;
  width: 54px;
  height: 90px;
  border-radius: 16px 16px 10px 10px;
  border: 2px solid rgba(223, 177, 88, 0.82);
  background:
    linear-gradient(180deg, rgba(255, 231, 170, 0.9), rgba(208, 132, 56, 0.92)),
    repeating-linear-gradient(
      90deg,
      rgba(173, 98, 38, 0.74) 0 4px,
      rgba(245, 188, 116, 0.32) 4px 8px
    );
  box-shadow:
    0 0 0 2px rgba(255, 229, 161, 0.26),
    0 0 22px rgba(255, 190, 92, 0.46),
    0 10px 18px rgba(112, 45, 22, 0.26);
  animation: timelineDateFiveGoldenDoorShine 2.4s ease-in-out infinite;
  transition: transform 0.22s ease, filter 0.22s ease, box-shadow 0.22s ease;
}

.timeline-date-five-door-shimmer {
  position: absolute;
  inset: 8px 10px;
  border-radius: 10px;
  background:
    linear-gradient(115deg, rgba(255, 252, 236, 0.74), rgba(255, 252, 236, 0) 56%),
    radial-gradient(circle at 40% 34%, rgba(255, 227, 154, 0.56), transparent 70%);
  mix-blend-mode: screen;
  opacity: 0.82;
  transition: opacity 0.22s ease, filter 0.22s ease;
}

.timeline-date-five-door-knob {
  position: absolute;
  right: 10px;
  top: 47px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 245, 213, 1), rgba(228, 164, 70, 0.9) 68%);
  box-shadow:
    0 0 10px rgba(255, 206, 108, 0.58),
    0 0 0 1px rgba(168, 101, 40, 0.46);
  transition: transform 0.22s ease, box-shadow 0.22s ease;
}

.timeline-date-five-door-knob::before,
.timeline-date-five-door-knob::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  pointer-events: none;
  opacity: 0;
}

.timeline-date-five-door-knob::before {
  width: 20px;
  height: 20px;
  transform: translate(-50%, -50%) scale(0.3);
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 249, 229, 0.96), rgba(255, 214, 126, 0.4) 58%, rgba(255, 214, 126, 0) 100%);
  filter: blur(0.2px);
}

.timeline-date-five-door-knob::after {
  width: 18px;
  height: 18px;
  transform: translate(-50%, -50%) rotate(22deg) scale(0.44);
  background:
    linear-gradient(
      180deg,
      rgba(255, 246, 220, 0) 36%,
      rgba(255, 246, 220, 0.94) 36% 64%,
      rgba(255, 246, 220, 0) 64%
    ),
    linear-gradient(
      90deg,
      rgba(255, 246, 220, 0) 36%,
      rgba(255, 246, 220, 0.94) 36% 64%,
      rgba(255, 246, 220, 0) 64%
    );
  filter: drop-shadow(0 0 4px rgba(255, 213, 115, 0.66));
}

.timeline-story-card.is-date-five-card:hover .timeline-date-five-golden-door,
.timeline-story-card.is-date-five-card:focus-within .timeline-date-five-golden-door {
  transform: translateY(-2px) scale(1.04);
  filter: saturate(1.15) brightness(1.09);
  box-shadow:
    0 0 0 3px rgba(255, 232, 168, 0.38),
    0 0 34px rgba(255, 194, 96, 0.66),
    0 12px 22px rgba(130, 56, 27, 0.34);
  animation-duration: 1.45s;
}

.timeline-story-card.is-date-five-card:hover .timeline-date-five-door-shimmer,
.timeline-story-card.is-date-five-card:focus-within .timeline-date-five-door-shimmer {
  opacity: 1;
  filter: saturate(1.1);
}

.timeline-story-card.is-date-five-card:hover .timeline-date-five-door-knob,
.timeline-story-card.is-date-five-card:focus-within .timeline-date-five-door-knob {
  transform: scale(1.12);
  box-shadow:
    0 0 14px rgba(255, 213, 120, 0.74),
    0 0 0 1px rgba(176, 112, 47, 0.56);
}

.timeline-story-card.is-date-five-card:hover .timeline-date-five-door-knob::before,
.timeline-story-card.is-date-five-card:focus-within .timeline-date-five-door-knob::before {
  opacity: 1;
  animation: timelineDateFiveKnobSparkle 0.78s ease-out infinite;
}

.timeline-story-card.is-date-five-card:hover .timeline-date-five-door-knob::after,
.timeline-story-card.is-date-five-card:focus-within .timeline-date-five-door-knob::after {
  opacity: 1;
  animation: timelineDateFiveKnobTwinkle 0.78s ease-out infinite;
}

.timeline-date-five-ring {
  position: absolute;
  top: 18px;
  left: 50%;
  width: 58px;
  height: 58px;
  transform: translateX(-50%);
  border-radius: 50%;
  border: 2.5px solid rgba(219, 179, 93, 0.86);
  box-shadow:
    0 0 0 3px rgba(255, 233, 179, 0.26),
    0 0 26px rgba(246, 197, 109, 0.44);
  animation: timelineDateFiveRingPulse 2.8s ease-in-out infinite;
}

.timeline-date-five-ring-core {
  position: absolute;
  left: 50%;
  top: -10px;
  width: 16px;
  height: 16px;
  transform: translateX(-50%) rotate(45deg);
  border-radius: 4px;
  background:
    radial-gradient(circle at 30% 30%, rgba(255, 249, 235, 0.98), rgba(255, 215, 138, 0.9) 56%, rgba(220, 160, 85, 0.9) 100%);
  box-shadow:
    0 0 14px rgba(255, 223, 154, 0.66),
    0 0 26px rgba(255, 191, 121, 0.38);
  animation: timelineDateFiveSealGlow 2.4s ease-in-out infinite;
}

.timeline-date-five-seal {
  position: absolute;
  left: 50%;
  bottom: -62px;
  width: 72%;
  height: 128px;
  transform: translateX(-50%);
  border-radius: 999px;
  background:
    radial-gradient(ellipse at center, rgba(247, 200, 112, 0.3), rgba(247, 200, 112, 0) 68%),
    radial-gradient(ellipse at 50% 46%, rgba(212, 92, 124, 0.24), transparent 72%);
  filter: blur(1.2px);
  opacity: 0.82;
  animation: timelineDateFiveSealGlow 3.2s ease-in-out infinite;
}

.timeline-date-five-petals-front {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 6;
}

.timeline-date-five-petals-front i {
  position: absolute;
  left: var(--petal-x);
  top: var(--petal-y);
  width: var(--petal-size);
  height: calc(var(--petal-size) * 0.62);
  border-radius: 72% 28% 70% 30%;
  transform: translate(-50%, -50%) rotate(var(--petal-rotate));
  background:
    linear-gradient(130deg, rgba(255, 205, 224, 0.95), rgba(206, 69, 110, 0.86));
  box-shadow:
    inset -1px -1px 0 rgba(130, 35, 67, 0.36),
    0 2px 8px rgba(109, 28, 54, 0.22);
  opacity: var(--petal-alpha);
  animation: timelineDateFivePetalFall var(--petal-duration) linear infinite;
  animation-delay: var(--petal-delay);
}

.timeline-date-five-petals-front i::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 12%;
  width: 1.4px;
  height: 74%;
  transform: translateX(-50%);
  border-radius: 999px;
  background: rgba(142, 43, 76, 0.34);
}

.timeline-story-day.is-date-five-day {
  border-color: rgba(178, 92, 111, 0.44);
  background:
    radial-gradient(circle at 20% 24%, rgba(255, 247, 240, 0.92), transparent 56%),
    rgba(255, 234, 239, 0.96);
  color: rgba(130, 42, 67, 0.95);
  box-shadow:
    0 4px 11px rgba(128, 47, 70, 0.18),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.timeline-story-card.is-date-five-card h3 {
  color: #7f1f43;
  text-shadow:
    0 1px 0 rgba(255, 248, 250, 0.9),
    0 0 10px rgba(255, 194, 217, 0.5);
}

.timeline-story-card.is-date-five-card .timeline-story-date {
  color: rgba(133, 49, 74, 0.9);
}

.timeline-story-card.is-date-five-card .timeline-story-photo {
  border-color: rgba(177, 89, 112, 0.36);
  box-shadow:
    0 12px 24px rgba(97, 33, 56, 0.22),
    inset 0 1px 0 rgba(255, 255, 255, 0.56),
    0 0 0 1.5px rgba(255, 222, 233, 0.82);
  background:
    linear-gradient(150deg, rgba(255, 246, 249, 0.96), rgba(251, 229, 236, 0.9));
}

.timeline-story-card.is-date-five-card p:not(.timeline-story-date) {
  color: rgba(84, 29, 50, 0.92);
}

.timeline-story-card.is-date-five-card .timeline-content-tags span {
  border-color: rgba(176, 91, 114, 0.28);
  background: rgba(255, 239, 244, 0.92);
  color: rgba(121, 43, 67, 0.92);
}

.timeline-floor-modal-backdrop {
  position: absolute;
  inset: 0;
  z-index: 20;
  display: grid;
  place-items: center;
  padding: 20px;
  background:
    radial-gradient(circle at 50% 20%, rgba(255, 244, 218, 0.24), rgba(22, 6, 16, 0.56)),
    rgba(17, 4, 13, 0.32);
  backdrop-filter: blur(5px);
}

.timeline-floor-modal-backdrop.is-date-three-backdrop {
  background:
    radial-gradient(circle at 50% 20%, rgba(255, 224, 170, 0.12), rgba(16, 6, 14, 0.7)),
    rgba(12, 5, 13, 0.56);
}

.timeline-floor-modal-backdrop.is-date-three-backdrop::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 50% 48%, rgba(20, 8, 12, 0) 18%, rgba(15, 7, 13, 0.4) 62%, rgba(8, 3, 8, 0.84) 100%),
    radial-gradient(circle at 52% 34%, rgba(255, 218, 151, 0.08), transparent 44%);
  animation: timelineDateThreeVignetteIn 0.34s ease-out both;
}

.timeline-floor-modal-backdrop.is-date-three-backdrop > * {
  position: relative;
  z-index: 1;
}

.timeline-floor-modal-backdrop.is-date-four-backdrop {
  background:
    radial-gradient(circle at 50% 18%, rgba(173, 207, 255, 0.16), rgba(11, 8, 26, 0.76)),
    rgba(8, 6, 20, 0.6);
}

.timeline-floor-modal-backdrop.is-date-four-backdrop::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 50% 50%, rgba(20, 15, 50, 0) 16%, rgba(12, 10, 29, 0.54) 66%, rgba(6, 4, 18, 0.82) 100%),
    radial-gradient(circle at 52% 28%, rgba(150, 204, 255, 0.16), transparent 42%);
}

.timeline-floor-modal-backdrop.is-date-four-backdrop > * {
  position: relative;
  z-index: 1;
}

.timeline-floor-modal-backdrop.is-date-five-backdrop {
  background:
    radial-gradient(circle at 50% 20%, rgba(255, 223, 189, 0.18), rgba(34, 8, 20, 0.72)),
    rgba(24, 6, 16, 0.56);
}

.timeline-floor-modal-backdrop.is-date-five-backdrop::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 50% 52%, rgba(25, 8, 18, 0) 16%, rgba(19, 8, 16, 0.5) 64%, rgba(10, 4, 10, 0.8) 100%),
    radial-gradient(circle at 50% 28%, rgba(255, 206, 145, 0.16), transparent 44%);
}

.timeline-floor-modal-backdrop.is-date-five-backdrop > * {
  position: relative;
  z-index: 1;
}

.timeline-floor-modal {
  width: min(620px, calc(100% - 8px));
  max-height: calc(100% - 10px);
  overflow: auto;
  border-radius: 20px;
  border: 1px solid rgba(144, 55, 87, 0.34);
  background:
    radial-gradient(circle at 84% 10%, rgba(255, 244, 220, 0.5), transparent 46%),
    linear-gradient(155deg, rgba(255, 248, 252, 0.97), rgba(244, 223, 233, 0.95));
  box-shadow:
    0 30px 52px rgba(35, 9, 24, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.84);
  padding: 14px;
}

.timeline-floor-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.timeline-floor-modal-close {
  border: 1px solid rgba(128, 45, 75, 0.32);
  background: rgba(255, 245, 250, 0.92);
  color: rgba(97, 30, 55, 0.92);
  border-radius: 999px;
  padding: 6px 12px;
  font-family: "Cinzel", serif;
  font-size: 0.7rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.timeline-floor-modal-close:hover {
  transform: translateY(-1px);
  border-color: rgba(164, 61, 102, 0.48);
  box-shadow: 0 10px 14px rgba(132, 50, 82, 0.2);
}

.timeline-floor-modal.is-nature-day-modal {
  border-color: rgba(86, 128, 74, 0.36);
  background:
    radial-gradient(circle at 84% 10%, rgba(234, 250, 218, 0.54), transparent 46%),
    linear-gradient(155deg, rgba(248, 255, 243, 0.98), rgba(223, 241, 209, 0.95));
  box-shadow:
    0 30px 52px rgba(25, 42, 23, 0.34),
    inset 0 1px 0 rgba(255, 255, 255, 0.88);
}

.timeline-floor-modal.is-date-two-modal {
  border-color: rgba(85, 117, 176, 0.36);
  background:
    radial-gradient(circle at 86% 10%, rgba(190, 215, 255, 0.44), transparent 48%),
    linear-gradient(155deg, rgba(242, 248, 255, 0.98), rgba(213, 226, 247, 0.95));
  box-shadow:
    0 30px 54px rgba(19, 30, 58, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.88);
}

.timeline-floor-modal.is-date-three-modal {
  border-color: rgba(162, 108, 53, 0.38);
  background:
    radial-gradient(circle at 86% 10%, rgba(255, 224, 172, 0.45), transparent 48%),
    linear-gradient(155deg, rgba(255, 247, 233, 0.98), rgba(246, 221, 185, 0.95));
  box-shadow:
    0 30px 54px rgba(55, 27, 14, 0.39),
    inset 0 1px 0 rgba(255, 255, 255, 0.88);
}

.timeline-floor-modal.is-date-four-modal {
  border-color: rgba(96, 124, 196, 0.4);
  background:
    radial-gradient(circle at 86% 10%, rgba(170, 208, 255, 0.44), transparent 48%),
    linear-gradient(155deg, rgba(243, 248, 255, 0.98), rgba(213, 225, 248, 0.95));
  box-shadow:
    0 30px 54px rgba(19, 25, 52, 0.45),
    inset 0 1px 0 rgba(255, 255, 255, 0.88);
}

.timeline-floor-modal.is-date-five-modal {
  border-color: rgba(176, 88, 112, 0.42);
  background:
    radial-gradient(circle at 86% 10%, rgba(255, 207, 164, 0.42), transparent 48%),
    linear-gradient(155deg, rgba(255, 246, 249, 0.98), rgba(248, 224, 233, 0.95));
  box-shadow:
    0 30px 54px rgba(66, 20, 39, 0.42),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

.timeline-floor-modal-close.is-nature-day {
  border-color: rgba(83, 130, 73, 0.4);
  background: rgba(241, 251, 230, 0.92);
  color: rgba(48, 86, 40, 0.92);
}

.timeline-floor-modal-close.is-nature-day:hover {
  border-color: rgba(88, 150, 72, 0.58);
  box-shadow: 0 10px 14px rgba(77, 132, 65, 0.2);
}

.timeline-floor-modal-close.is-date-two-day {
  border-color: rgba(89, 122, 184, 0.42);
  background: rgba(232, 242, 255, 0.92);
  color: rgba(44, 68, 112, 0.94);
}

.timeline-floor-modal-close.is-date-two-day:hover {
  border-color: rgba(93, 144, 208, 0.62);
  box-shadow: 0 10px 14px rgba(64, 96, 156, 0.24);
}

.timeline-floor-modal-close.is-date-three-day {
  border-color: rgba(165, 113, 59, 0.42);
  background: rgba(255, 243, 218, 0.94);
  color: rgba(107, 59, 18, 0.95);
}

.timeline-floor-modal-close.is-date-three-day:hover {
  border-color: rgba(201, 142, 80, 0.62);
  box-shadow: 0 10px 14px rgba(143, 88, 43, 0.26);
}

.timeline-floor-modal-close.is-date-four-day {
  border-color: rgba(90, 123, 193, 0.44);
  background: rgba(230, 240, 255, 0.94);
  color: rgba(42, 66, 116, 0.95);
}

.timeline-floor-modal-close.is-date-four-day:hover {
  border-color: rgba(101, 155, 228, 0.66);
  box-shadow: 0 10px 14px rgba(59, 86, 150, 0.28);
}

.timeline-floor-modal-close.is-date-five-day {
  border-color: rgba(176, 92, 114, 0.46);
  background: rgba(255, 236, 243, 0.94);
  color: rgba(120, 40, 65, 0.94);
}

.timeline-floor-modal-close.is-date-five-day:hover {
  border-color: rgba(205, 119, 141, 0.66);
  box-shadow: 0 10px 14px rgba(136, 55, 82, 0.3);
}

.timeline-floor-modal-nav {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: flex-end;
  margin-top: 12px;
}

.timeline-floor-modal-nav.is-nature-day .button {
  background: linear-gradient(135deg, #4f8c45, #2f5d2f);
  box-shadow: 0 12px 20px rgba(52, 96, 46, 0.36);
}

.timeline-floor-modal-nav.is-nature-day .button:hover {
  box-shadow: 0 14px 24px rgba(45, 84, 39, 0.4);
}

.timeline-floor-modal-nav.is-nature-day .button.ghost {
  color: rgba(49, 88, 41, 0.95);
  border-color: rgba(85, 137, 78, 0.5);
  background: rgba(242, 252, 232, 0.8);
  box-shadow: none;
}

.timeline-floor-modal-nav.is-nature-day .button.ghost:hover {
  background: rgba(225, 244, 212, 0.96);
  box-shadow: none;
}

.timeline-floor-modal-nav.is-date-two-day .button {
  background: linear-gradient(135deg, #466ca8, #2d4d85);
  box-shadow: 0 12px 20px rgba(42, 66, 112, 0.38);
}

.timeline-floor-modal-nav.is-date-two-day .button:hover {
  box-shadow: 0 14px 24px rgba(37, 58, 102, 0.4);
}

.timeline-floor-modal-nav.is-date-two-day .button.ghost {
  color: rgba(43, 66, 109, 0.95);
  border-color: rgba(89, 122, 186, 0.5);
  background: rgba(234, 243, 255, 0.84);
  box-shadow: none;
}

.timeline-floor-modal-nav.is-date-two-day .button.ghost:hover {
  background: rgba(220, 233, 250, 0.96);
  box-shadow: none;
}

.timeline-floor-modal-nav.is-date-three-day .button {
  background: linear-gradient(135deg, #8e2839, #6e192b);
  box-shadow: 0 12px 20px rgba(82, 26, 40, 0.38);
}

.timeline-floor-modal-nav.is-date-three-day .button:hover {
  box-shadow: 0 14px 24px rgba(74, 22, 35, 0.4);
}

.timeline-floor-modal-nav.is-date-three-day .button.ghost {
  color: rgba(109, 60, 20, 0.94);
  border-color: rgba(165, 112, 58, 0.52);
  background: rgba(255, 242, 216, 0.88);
  box-shadow: none;
}

.timeline-floor-modal-nav.is-date-three-day .button.ghost:hover {
  background: rgba(255, 233, 196, 0.98);
  box-shadow: none;
}

.timeline-floor-modal-nav.is-date-four-day .button {
  background: linear-gradient(135deg, #3d5aa8, #2a4384);
  box-shadow: 0 12px 20px rgba(35, 55, 106, 0.4);
}

.timeline-floor-modal-nav.is-date-four-day .button:hover {
  box-shadow: 0 14px 24px rgba(31, 49, 95, 0.42);
}

.timeline-floor-modal-nav.is-date-four-day .button.ghost {
  color: rgba(43, 66, 112, 0.95);
  border-color: rgba(92, 128, 197, 0.52);
  background: rgba(231, 241, 255, 0.88);
  box-shadow: none;
}

.timeline-floor-modal-nav.is-date-four-day .button.ghost:hover {
  background: rgba(214, 229, 250, 0.98);
  box-shadow: none;
}

.timeline-floor-modal-nav.is-date-five-day .button {
  background: linear-gradient(135deg, #aa365d, #822949);
  box-shadow: 0 12px 20px rgba(101, 33, 58, 0.4);
}

.timeline-floor-modal-nav.is-date-five-day .button:hover {
  box-shadow: 0 14px 24px rgba(88, 27, 49, 0.42);
}

.timeline-floor-modal-nav.is-date-five-day .button.ghost {
  color: rgba(123, 45, 69, 0.95);
  border-color: rgba(179, 95, 117, 0.52);
  background: rgba(255, 237, 243, 0.9);
  box-shadow: none;
}

.timeline-floor-modal-nav.is-date-five-day .button.ghost:hover {
  background: rgba(251, 222, 233, 0.98);
  box-shadow: none;
}

.timeline-floor-modal .button:disabled,
.timeline-floor-controls .button:disabled {
  cursor: not-allowed;
  opacity: 0.52;
  transform: none;
  box-shadow: none;
}

.timeline-ending-note {
  width: min(860px, 100%);
  margin-inline: auto;
  border-radius: 14px;
  border: 1px solid rgba(142, 50, 83, 0.22);
  background: linear-gradient(145deg, rgba(255, 247, 252, 0.92), rgba(246, 224, 235, 0.9));
  padding: 12px 14px;
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 10px;
  align-items: center;
  color: rgba(84, 27, 49, 0.9);
}

.timeline-ending-note .icon-glyph {
  width: 18px;
  height: 18px;
  color: rgba(172, 125, 45, 0.9);
}

.timeline-ending-note p {
  margin: 0;
  font-size: 0.91rem;
}

@keyframes timelineManorBreath {
  0%,
  100% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-2px) scale(1.004);
  }
}

@keyframes timelineWindowGlint {
  0%,
  16%,
  100% {
    opacity: 0.02;
    transform: translateX(-1px) scaleY(0.92);
  }
  28% {
    opacity: 0.2;
    transform: translateX(0) scaleY(1.04);
  }
  44% {
    opacity: 0.04;
    transform: translateX(1.4px) scaleY(0.95);
  }
  62% {
    opacity: 0.14;
    transform: translateX(0.7px) scaleY(1.02);
  }
}

@keyframes timelineLanternCandle {
  0%,
  100% {
    opacity: 0.72;
    transform: scale(0.96, 0.9);
  }
  24% {
    opacity: 0.94;
    transform: scale(1.02, 1.08);
  }
  48% {
    opacity: 0.82;
    transform: scale(0.94, 0.95);
  }
  70% {
    opacity: 0.98;
    transform: scale(1.06, 1.14);
  }
}

@keyframes timelineLanternHaloPulse {
  0%,
  100% {
    opacity: 0.26;
    transform: scale(0.86);
  }
  30% {
    opacity: 0.54;
    transform: scale(1.05);
  }
  62% {
    opacity: 0.34;
    transform: scale(0.9);
  }
  78% {
    opacity: 0.6;
    transform: scale(1.12);
  }
}

@keyframes timelineFogDriftA {
  0%,
  100% {
    transform: translateX(-3%) translateY(3px) scale(0.98);
  }
  50% {
    transform: translateX(3%) translateY(-3px) scale(1.05);
  }
}

@keyframes timelineFogDriftB {
  0%,
  100% {
    transform: translateX(2%) translateY(2px) scale(1.03);
  }
  50% {
    transform: translateX(-3%) translateY(-4px) scale(0.97);
  }
}

@keyframes timelinePrincessPulse {
  0%,
  100% {
    transform: translateX(-50%) scale(1);
  }
  50% {
    transform: translateX(-50%) scale(var(--motion-timeline-scale));
  }
}

@keyframes timelineDoorRayPulse {
  0%,
  100% {
    transform: scale(0.95);
    opacity: 0.56;
  }
  50% {
    transform: scale(1.08);
    opacity: 0.92;
  }
}

@keyframes timelineDoorDust {
  0% {
    transform: translate3d(0, 0, 0) scale(0.6);
    opacity: 0;
  }
  20% {
    opacity: var(--dust-alpha, 0.45);
  }
  100% {
    transform: translate3d(0, calc(var(--dust-rise, 76px) * -1), 0) scale(1.35);
    opacity: 0;
  }
}

@keyframes timelineDoorDustDrift {
  0% {
    margin-left: calc(var(--dust-drift, 14px) * -0.45);
  }
  100% {
    margin-left: var(--dust-drift, 14px);
  }
}

@keyframes timelineStarTwinkle {
  0%,
  100% {
    opacity: 0.22;
    transform: scale(0.8);
  }
  50% {
    opacity: 0.94;
    transform: scale(1.25);
  }
}

@keyframes timelineCloudDriftA {
  0% {
    transform: translateX(-8%) translateY(0);
  }
  50% {
    transform: translateX(4%) translateY(-2%);
  }
  100% {
    transform: translateX(16%) translateY(1%);
  }
}

@keyframes timelineCloudDriftB {
  0% {
    transform: translateX(-4%) translateY(0);
  }
  50% {
    transform: translateX(5%) translateY(2%);
  }
  100% {
    transform: translateX(12%) translateY(-1%);
  }
}

@keyframes timelineCloudDriftC {
  0% {
    transform: translateX(-14%) translateY(1%);
  }
  50% {
    transform: translateX(-2%) translateY(-1%);
  }
  100% {
    transform: translateX(8%) translateY(0);
  }
}

@keyframes timelineLanternSwing {
  0% {
    transform: rotate(-3deg);
  }
  100% {
    transform: rotate(3deg);
  }
}

@keyframes timelineLanternGlow {
  0%,
  100% {
    opacity: 0.45;
    transform: translate(-50%, -50%) scale(0.9);
  }
  50% {
    opacity: 0.84;
    transform: translate(-50%, -50%) scale(1.16);
  }
}

@keyframes timelineCarriageRide {
  0% {
    transform: translateX(0);
  }
  45% {
    transform: translateX(16px);
  }
  55% {
    transform: translateX(16px);
  }
  100% {
    transform: translateX(0);
  }
}

@keyframes timelineWheelSpin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes timelineInteriorFogDrift {
  0%,
  100% {
    transform: translateX(-10px) scale(1);
  }
  50% {
    transform: translateX(14px) scale(1.04);
  }
}

@keyframes timelineMiniCameraDrift {
  0%,
  100% {
    transform: translate3d(-6px, 0, 0) scale(1.03);
  }
  35% {
    transform: translate3d(8px, -4px, 0) scale(1.05);
  }
  62% {
    transform: translate3d(-2px, 6px, 0) scale(1.04);
  }
}

@keyframes timelineMiniParallaxBack {
  0%,
  100% {
    transform: translate3d(-8px, -3px, 0) scale(1.01);
    opacity: 0.6;
  }
  50% {
    transform: translate3d(10px, 3px, 0) scale(1.04);
    opacity: 0.82;
  }
}

@keyframes timelineMiniParallaxFront {
  0%,
  100% {
    transform: translate3d(0, 0, 0) scale(1);
    opacity: 0.44;
  }
  50% {
    transform: translate3d(0, 5px, 0) scale(1.03);
    opacity: 0.68;
  }
}

@keyframes timelineMiniLightSweep {
  0%,
  100% {
    transform: skewX(-12deg) translateX(-12px) scaleY(1);
    opacity: calc(0.15 + (var(--timeline-magic-level) * 0.2));
  }
  50% {
    transform: skewX(-8deg) translateX(14px) scaleY(1.08);
    opacity: calc(0.35 + (var(--timeline-magic-level) * 0.26));
  }
}

@keyframes timelineMiniFilmGrain {
  0% {
    transform: translate3d(0, 0, 0);
  }
  20% {
    transform: translate3d(-1.5%, 1.2%, 0);
  }
  40% {
    transform: translate3d(1.1%, -1.3%, 0);
  }
  60% {
    transform: translate3d(0.6%, 1.4%, 0);
  }
  80% {
    transform: translate3d(-0.8%, -0.9%, 0);
  }
  100% {
    transform: translate3d(0, 0, 0);
  }
}

@keyframes timelineMiniDustFloat {
  0%,
  100% {
    transform: translate3d(0, 0, 0) scale(0.95);
    opacity: 0;
  }
  20% {
    opacity: var(--dust-alpha, 0.26);
  }
  50% {
    transform: translate3d(0, calc(var(--dust-rise, 16px) * -1), 0) scale(1.15);
    opacity: calc(var(--dust-alpha, 0.26) + 0.06);
  }
  80% {
    opacity: calc(var(--dust-alpha, 0.26) * 0.8);
  }
}

@keyframes timelineMiniDustDrift {
  0%,
  100% {
    margin-left: calc(var(--dust-drift, 10px) * -0.4);
  }
  50% {
    margin-left: var(--dust-drift, 10px);
  }
}

@keyframes timelineMiniTileWallShift {
  0% {
    background-position: 0 0, 0 0;
  }
  100% {
    background-position: 0 0, 0 256px;
  }
}

@keyframes timelineMiniTileFloorShift {
  0%,
  100% {
    background-position: center, 0 0;
    transform: perspective(800px) rotateX(0.3deg);
  }
  50% {
    background-position: center, 70px 42px;
    transform: perspective(800px) rotateX(-0.3deg);
  }
}

@keyframes timelineMiniTileStairPulse {
  0%,
  100% {
    transform: translateX(-50%) scale(1);
    filter: drop-shadow(0 6px 10px rgba(80, 30, 52, 0.22));
  }
  50% {
    transform: translateX(-50%) scale(1.01);
    filter: drop-shadow(0 8px 14px rgba(90, 32, 56, 0.3));
  }
}

@keyframes timelineMiniSconceFlicker {
  0%,
  100% {
    opacity: 0.82;
    filter: brightness(0.96) saturate(0.98);
  }
  22% {
    opacity: 0.96;
    filter: brightness(1.12) saturate(1.08);
  }
  48% {
    opacity: 0.86;
    filter: brightness(1) saturate(1);
  }
  70% {
    opacity: 1;
    filter: brightness(1.18) saturate(1.12);
  }
}

@keyframes timelineMiniSconceSwing {
  0%,
  100% {
    transform: rotate(-1.4deg);
  }
  50% {
    transform: rotate(1.8deg);
  }
}

@keyframes timelineMiniTorchSwing {
  0%,
  100% {
    transform: rotate(-2deg) translateY(0);
  }
  50% {
    transform: rotate(2.3deg) translateY(-0.5px);
  }
}

@keyframes timelineMiniTorchFlicker {
  0%,
  100% {
    opacity: 0.76;
    transform: scale(0.92, 0.9);
  }
  24% {
    opacity: 0.94;
    transform: scale(1.03, 1.08);
  }
  46% {
    opacity: 0.82;
    transform: scale(0.96, 0.94);
  }
  70% {
    opacity: 1;
    transform: scale(1.08, 1.16);
  }
}

@keyframes timelineMiniTorchGlow {
  0%,
  100% {
    opacity: 0.24;
    transform: translate(-50%, -50%) scale(0.82);
  }
  50% {
    opacity: 0.56;
    transform: translate(-50%, -50%) scale(1.08);
  }
}

@keyframes timelineMiniDoorArrivalPulse {
  0%,
  100% {
    opacity: 0.52;
    transform: translate(-50%, -50%) scale(0.7);
  }
  50% {
    opacity: 0.96;
    transform: translate(-50%, -50%) scale(1.05);
  }
}

@keyframes timelineMiniProposalDoorShine {
  0%,
  100% {
    opacity: 0.66;
    transform: translate(-50%, -50%) scale(0.76);
  }
  50% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.08);
  }
}

@keyframes timelineDateTwoSkyPulse {
  0%,
  100% {
    transform: translateY(0) scale(1);
    opacity: 0.86;
    filter: saturate(1);
  }
  50% {
    transform: translateY(-4px) scale(1.06);
    opacity: 0.96;
    filter: saturate(1.1);
  }
}

@keyframes timelineDateTwoMoonFloat {
  0%,
  100% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-4px) scale(1.04);
  }
}

@keyframes timelineDateTwoStarRain {
  0%,
  10% {
    transform: translate(-50%, -50%) rotate(26deg) translate3d(0, 0, 0) scaleY(0.92);
    opacity: 0;
  }
  20% {
    opacity: var(--shoot-opacity);
  }
  70% {
    opacity: calc(var(--shoot-opacity) * 0.88);
  }
  88% {
    opacity: calc(var(--shoot-opacity) * 1.08);
  }
  100% {
    transform: translate(-50%, -50%) rotate(26deg)
      translate3d(var(--shoot-drift), var(--shoot-fall), 0) scaleY(1.08);
    opacity: 0;
  }
}

@keyframes timelineDateTwoMeteorFlash {
  0%,
  12% {
    opacity: 0;
    transform: translateX(-50%) scale(0.32);
    filter: blur(0.2px);
  }
  22% {
    opacity: calc(var(--shoot-opacity) * 0.86);
    transform: translateX(-50%) scale(0.96);
    filter: blur(0.3px);
  }
  72% {
    opacity: calc(var(--shoot-opacity) * 0.72);
    transform: translateX(-50%) scale(0.88);
    filter: blur(0.25px);
  }
  86% {
    opacity: 1;
    transform: translateX(-50%) scale(1.32);
    filter: blur(0.35px);
  }
  92% {
    opacity: 0.94;
    transform: translateX(-50%) scale(1.86);
    filter: blur(1.3px);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) scale(0.36);
    filter: blur(0.12px);
  }
}

@keyframes timelineDateThreeMarqueePulse {
  0%,
  100% {
    opacity: 0.78;
    filter: drop-shadow(0 0 4px rgba(255, 191, 101, 0.46));
  }
  50% {
    opacity: 1;
    filter: drop-shadow(0 0 8px rgba(255, 205, 128, 0.66));
  }
}

@keyframes timelineDateThreeProjectorFlicker {
  0%,
  100% {
    opacity: 0.96;
    filter: brightness(0.95) saturate(0.96);
  }
  22% {
    opacity: 0.74;
    filter: brightness(0.8) saturate(0.84);
  }
  46% {
    opacity: 1;
    filter: brightness(1.18) saturate(1.08);
  }
  64% {
    opacity: 0.82;
    filter: brightness(0.86) saturate(0.9);
  }
  82% {
    opacity: 1;
    filter: brightness(1.12) saturate(1.04);
  }
}

@keyframes timelineDateThreeBeamSweep {
  0%,
  100% {
    transform: skewY(-3deg) scaleX(0.92);
    opacity: 0.22;
  }
  50% {
    transform: skewY(2deg) scaleX(1.06);
    opacity: 0.42;
  }
}

@keyframes timelineDateThreeVignetteIn {
  0% {
    opacity: 0;
    filter: blur(8px);
  }
  100% {
    opacity: 1;
    filter: blur(0px);
  }
}

@keyframes timelineDateThreeDustFloat {
  0%,
  100% {
    transform: translate3d(0, 0, 0) scale(0.8);
    opacity: 0;
  }
  26% {
    opacity: var(--cinema-dust-alpha, 0.34);
  }
  62% {
    transform: translate3d(var(--cinema-dust-drift, 8px), calc(var(--cinema-dust-rise, 16px) * -1), 0)
      scale(1.16);
    opacity: calc(var(--cinema-dust-alpha, 0.34) + 0.16);
  }
  82% {
    opacity: calc(var(--cinema-dust-alpha, 0.34) * 0.72);
  }
}

@keyframes timelineDateThreeCurtainSway {
  0%,
  100% {
    transform: translateY(0) scaleY(1);
  }
  50% {
    transform: translateY(-2px) scaleY(1.02);
  }
}

@keyframes timelineDateThreeCarpetGlow {
  0%,
  100% {
    box-shadow:
      0 -2px 0 rgba(224, 171, 102, 0.48),
      0 8px 16px rgba(63, 9, 22, 0.22);
  }
  50% {
    box-shadow:
      0 -2px 0 rgba(245, 196, 128, 0.64),
      0 10px 20px rgba(85, 13, 31, 0.32);
  }
}

@keyframes timelineDateFourLampPulse {
  0%,
  100% {
    opacity: 0.72;
    filter: drop-shadow(0 0 4px rgba(255, 194, 233, 0.4));
  }
  50% {
    opacity: 1;
    filter: drop-shadow(0 0 8px rgba(184, 221, 255, 0.62));
  }
}

@keyframes timelineDateFourBeamPulse {
  0%,
  100% {
    opacity: 0.62;
    transform: translateX(-50%) scale(0.96);
  }
  50% {
    opacity: 0.92;
    transform: translateX(-50%) scale(1.05);
  }
}

@keyframes timelineDateFourEqualizer {
  0%,
  100% {
    height: 8px;
  }
  28% {
    height: 30px;
  }
  56% {
    height: 16px;
  }
  78% {
    height: 36px;
  }
}

@keyframes timelineDateFourSparkRain {
  0%,
  10% {
    transform: translate(-50%, -50%) rotate(18deg) translate3d(0, 0, 0);
    opacity: 0;
  }
  20% {
    opacity: var(--spark-alpha);
  }
  76% {
    opacity: calc(var(--spark-alpha) * 0.86);
  }
  100% {
    transform: translate(-50%, -50%) rotate(18deg)
      translate3d(var(--spark-drift), var(--spark-fall), 0);
    opacity: 0;
  }
}

@keyframes timelineDateFourFloorPulse {
  0%,
  100% {
    opacity: 0.58;
    transform: translateX(-50%) scale(0.96);
  }
  50% {
    opacity: 0.82;
    transform: translateX(-50%) scale(1.06);
  }
}

@keyframes timelineDateFiveRingPulse {
  0%,
  100% {
    transform: translateX(-50%) scale(0.94);
    box-shadow:
      0 0 0 3px rgba(255, 233, 179, 0.2),
      0 0 16px rgba(246, 197, 109, 0.34);
  }
  50% {
    transform: translateX(-50%) scale(1.08);
    box-shadow:
      0 0 0 4px rgba(255, 233, 179, 0.32),
      0 0 30px rgba(246, 197, 109, 0.54);
  }
}

@keyframes timelineDateFiveGoldenDoorShine {
  0%,
  100% {
    filter: saturate(1) brightness(1);
    box-shadow:
      0 0 0 2px rgba(255, 229, 161, 0.22),
      0 0 16px rgba(255, 190, 92, 0.34),
      0 10px 18px rgba(112, 45, 22, 0.22);
  }
  50% {
    filter: saturate(1.1) brightness(1.08);
    box-shadow:
      0 0 0 3px rgba(255, 229, 161, 0.34),
      0 0 28px rgba(255, 190, 92, 0.56),
      0 12px 22px rgba(132, 58, 27, 0.3);
  }
}

@keyframes timelineDateFiveKnobSparkle {
  0%,
  100% {
    transform: translate(-50%, -50%) scale(0.3);
    opacity: 0;
  }
  24% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.9;
  }
  46% {
    transform: translate(-50%, -50%) scale(0.66);
    opacity: 0.72;
  }
  78% {
    transform: translate(-50%, -50%) scale(1.22);
    opacity: 0.18;
  }
}

@keyframes timelineDateFiveKnobTwinkle {
  0%,
  100% {
    transform: translate(-50%, -50%) rotate(22deg) scale(0.34);
    opacity: 0;
  }
  22% {
    transform: translate(-50%, -50%) rotate(30deg) scale(1);
    opacity: 0.98;
  }
  52% {
    transform: translate(-50%, -50%) rotate(38deg) scale(0.72);
    opacity: 0.7;
  }
  84% {
    transform: translate(-50%, -50%) rotate(46deg) scale(1.15);
    opacity: 0.08;
  }
}

@keyframes timelineDateFiveSealGlow {
  0%,
  100% {
    opacity: 0.62;
    filter: blur(0.8px);
  }
  50% {
    opacity: 0.92;
    filter: blur(1.2px);
  }
}

@keyframes timelineDateFivePetalFall {
  0%,
  10% {
    transform: translate(-50%, -120%) rotate(var(--petal-rotate));
    opacity: 0;
  }
  20% {
    opacity: var(--petal-alpha, 0.5);
  }
  58% {
    transform: translate(calc(-50% + (var(--petal-drift) * -0.32)), calc(-50% + 24%))
      rotate(calc(var(--petal-rotate) - 16deg));
    opacity: calc(var(--petal-alpha, 0.5) * 0.92);
  }
  100% {
    transform: translate(calc(-50% + var(--petal-drift)), calc(-50% + var(--petal-fall)))
      rotate(calc(var(--petal-rotate) + 28deg));
    opacity: 0.04;
  }
}

@keyframes timelineNatureBloom {
  0%,
  100% {
    transform: translateY(0) scale(1);
    filter: blur(0.15px) saturate(1);
  }
  50% {
    transform: translateY(-6px) scale(1.08);
    filter: blur(0.22px) saturate(1.14);
  }
}

@keyframes timelineNatureLeafFall {
  0%,
  8% {
    transform: translate(-50%, -130%) rotate(var(--leaf-rotate));
    opacity: 0;
  }
  18% {
    transform: translate(calc(-50% + (var(--leaf-drift) * 0.22)), calc(-50% - 60%))
      rotate(calc(var(--leaf-rotate) + 18deg));
    opacity: 0.9;
  }
  46% {
    transform: translate(calc(-50% + (var(--leaf-drift) * -0.36)), calc(-50% + 34%))
      rotate(calc(var(--leaf-rotate) - 16deg));
    opacity: 0.78;
  }
  76% {
    transform: translate(calc(-50% + (var(--leaf-drift) * 0.72)), calc(-50% + 78%))
      rotate(calc(var(--leaf-rotate) + 24deg));
    opacity: 0.64;
  }
  100% {
    transform: translate(calc(-50% + var(--leaf-drift)), calc(-50% + var(--leaf-fall)))
      rotate(calc(var(--leaf-rotate) + 34deg));
    opacity: 0.05;
  }
}

@keyframes timelineGuestDriftA {
  0%,
  100% {
    transform: translateX(0) translateY(0);
    opacity: 0.38;
  }
  35% {
    transform: translateX(28px) translateY(-3px);
    opacity: 0.5;
  }
  65% {
    transform: translateX(10px) translateY(2px);
    opacity: 0.42;
  }
}

@keyframes timelineGuestDriftB {
  0%,
  100% {
    transform: translateX(0) translateY(0);
    opacity: 0.34;
  }
  40% {
    transform: translateX(-24px) translateY(-2px);
    opacity: 0.46;
  }
  70% {
    transform: translateX(-8px) translateY(2px);
    opacity: 0.38;
  }
}

@keyframes timelineMiniRouteFlow {
  0% {
    stroke-dashoffset: 0;
  }
  100% {
    stroke-dashoffset: -28;
  }
}

@keyframes timelineMiniNpcWalk {
  0%,
  100% {
    transform: translateX(0) translateY(0);
    opacity: 0.34;
  }
  35% {
    transform: translateX(20px) translateY(-2px);
    opacity: 0.44;
  }
  65% {
    transform: translateX(8px) translateY(2px);
    opacity: 0.39;
  }
}

@keyframes timelineMiniCurtainSwing {
  0%,
  100% {
    transform: skewY(0deg) translateX(0);
  }
  50% {
    transform: skewY(1.5deg) translateX(0.25px);
  }
}

@keyframes timelineMiniWindowPulse {
  0%,
  100% {
    opacity: 0.54;
  }
  45% {
    opacity: 0.84;
  }
  72% {
    opacity: 0.66;
  }
}

@keyframes timelineMiniChandelierFloat {
  0%,
  100% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-0.32px) scale(1.02);
  }
}

@media (max-width: 1080px) {
  .timeline-stage-shell,
  .timeline-journey-scene,
  .timeline-foyer-scene {
    min-height: 640px;
  }

  .timeline-floors-board {
    min-height: 640px;
  }

  .timeline-interior-path {
    inset: 76px 52px 114px;
  }

  .timeline-room-node {
    width: clamp(122px, 17vw, 158px);
  }

  .timeline-floors-board.timeline-mini-board {
    min-height: 740px;
  }

  .timeline-mini-map-shell {
    min-height: 640px;
  }

  .timeline-mini-room {
    width: clamp(120px, 15vw, 152px);
  }
}

@media (max-width: 760px) {
  .timeline-bridgerton-section {
    padding: 24px 16px 18px;
  }

  .timeline-mood-picker {
    grid-template-columns: 1fr;
  }

  .timeline-stage-shell,
  .timeline-journey-scene,
  .timeline-foyer-scene {
    min-height: 580px;
  }

  .timeline-foyer-scene {
    padding: 22px 12px 18px;
  }

  .timeline-manor {
    width: min(560px, 98%);
    aspect-ratio: 1.58 / 1;
    border-radius: 30px 30px 16px 16px;
  }

  .timeline-manor-roof {
    height: 42px;
    width: min(420px, 84%);
  }

  .timeline-manor-pediment,
  .timeline-manor-parapet,
  .timeline-manor-cornice,
  .timeline-manor-balcony,
  .timeline-manor-column.col-left-a,
  .timeline-manor-column.col-right-a,
  .timeline-manor-lantern,
  .timeline-manor-stars,
  .timeline-manor-plinth,
  .timeline-manor-ivy,
  .timeline-manor-carriage {
    display: none;
  }

  .timeline-manor-window.window-mid-left,
  .timeline-manor-window.window-mid-right {
    display: none;
  }

  .timeline-manor-door {
    width: min(36%, 182px);
  }

  .timeline-manor-hedge {
    width: 20%;
    height: 18%;
  }

  .timeline-floors-board {
    min-height: 760px;
    border-radius: 18px;
    padding: 12px;
  }

  .timeline-floors-board::before {
    inset: 10px;
    border-radius: 14px;
  }

  .timeline-floors-board::after {
    inset: 50px 14px 76px;
    border-radius: 14px;
  }

  .timeline-interior-ambient-glow {
    inset: 52px 16px 80px;
    border-radius: 14px;
  }

  .timeline-interior-path {
    inset: 72px 20px 126px;
  }

  .timeline-room-grid {
    min-height: 620px;
  }

  .timeline-room-node {
    width: clamp(114px, 34vw, 142px);
    min-height: 54px;
    padding: 6px 7px;
    gap: 6px;
  }

  .timeline-room-label strong {
    font-size: 0.56rem;
  }

  .timeline-room-label small {
    font-size: 0.56rem;
  }

  .timeline-princess-top {
    width: min(270px, calc(100% - 32px));
    padding: 7px 8px;
  }

  .timeline-prince-marker {
    width: 34px;
    height: 34px;
  }

  .timeline-prince-marker .icon-glyph {
    width: 17px;
    height: 17px;
  }

  .timeline-map-hint {
    width: calc(100% - 20px);
    border-radius: 16px;
    bottom: 10px;
  }

  .timeline-map-hint p {
    font-size: 0.75rem;
  }

  .timeline-interior-lantern {
    top: 124px;
  }

  .timeline-interior-lantern.lantern-left {
    left: 26px;
  }

  .timeline-interior-lantern.lantern-right {
    right: 26px;
  }

  .timeline-interior-guest.guest-b {
    display: none;
  }

  .timeline-floor-controls .button,
  .timeline-floor-modal-nav .button {
    flex: 1 1 auto;
    min-width: 150px;
  }

  .timeline-floor-modal-backdrop {
    padding: 10px;
  }

  .timeline-floor-modal {
    width: min(560px, 100%);
    padding: 12px;
  }

  .timeline-story-photo-grid-date-four {
    grid-template-columns: 1fr;
  }

  .timeline-story-photo-grid-date-four .timeline-story-photo-duo.slot-1 img,
  .timeline-story-photo-grid-date-four .timeline-story-photo-duo.slot-2 img {
    height: clamp(240px, 42vh, 340px);
  }

  .timeline-journey-actions {
    width: 100%;
  }

  .timeline-journey-actions .button {
    flex: 1 1 auto;
    min-width: 160px;
  }

  .timeline-floors-board.timeline-mini-board {
    min-height: 680px;
    padding: 10px;
    border-radius: 16px;
  }

  .timeline-floors-board.timeline-mini-board::before {
    inset: 8px;
    border-radius: 12px;
  }

  .timeline-mini-map-shell {
    min-height: 560px;
    border-radius: 14px;
    --timeline-mini-map-top: 16px;
    --timeline-mini-map-x: 14px;
    --timeline-mini-map-bottom: 52px;
  }

  .timeline-mini-map-shell::before {
    inset: 10px;
    border-radius: 10px;
  }

  .timeline-mini-illustrated-map {
    width: calc(100% - (var(--timeline-mini-map-x) * 2));
    height: calc(100% - (var(--timeline-mini-map-top) + var(--timeline-mini-map-bottom)));
  }

  .timeline-mini-coord-debug-point {
    width: 12px;
    height: 12px;
  }

  .timeline-mini-coord-debug-point::before {
    height: 18px;
  }

  .timeline-mini-coord-debug-point::after {
    width: 18px;
  }

  .timeline-mini-parallax-layer {
    inset: 16px 14px 52px;
  }

  .timeline-mini-light-shaft {
    bottom: 72px;
    width: 36%;
  }

  .timeline-mini-film-grain {
    inset: 10px 12px 52px;
  }

  .timeline-mini-dust-motes {
    inset: 18px 16px 74px;
  }

  .timeline-mini-sconce {
    width: 34px;
    height: 70px;
  }

  .timeline-mini-sconce.sconce-left-top,
  .timeline-mini-sconce.sconce-right-top {
    top: 78px;
  }

  .timeline-mini-sconce.sconce-left-mid,
  .timeline-mini-sconce.sconce-right-mid {
    top: 210px;
  }

  .timeline-mini-rooms {
    min-height: 500px;
  }

  .timeline-mini-room {
    width: clamp(108px, 34vw, 132px);
    min-height: 52px;
    padding: 6px 7px;
    gap: 6px;
  }

  .timeline-mini-room-copy strong,
  .timeline-mini-room-copy small {
    font-size: 0.56rem;
  }

  .timeline-mini-room-door {
    width: 18px;
    height: 28px;
  }

  .timeline-princess-top.timeline-mini-princess {
    width: min(240px, calc(100% - 22px));
    padding: 6px 8px;
  }

  .timeline-mini-lantern {
    top: 72px;
  }

  .timeline-mini-lantern.lantern-left {
    left: 20px;
  }

  .timeline-mini-lantern.lantern-right {
    right: 20px;
  }

  .timeline-mini-npc.npc-b {
    display: none;
  }

  .timeline-mini-sconce.sconce-left-mid,
  .timeline-mini-sconce.sconce-right-mid {
    display: none;
  }

  .timeline-prince-marker.is-minimap {
    width: 34px;
    height: 34px;
  }

  .timeline-prince-marker.is-minimap img,
  .timeline-mini-prince-asset {
    width: 20px;
    height: 20px;
  }

  .timeline-map-hint.timeline-mini-status {
    margin-top: 8px;
    border-radius: 12px;
    padding: 8px 10px;
  }

  .timeline-map-hint.timeline-mini-status p {
    font-size: 0.74rem;
  }
}

@media (prefers-reduced-motion: reduce) {
  .timeline-princess-top.is-complete {
    animation: none;
  }

  .timeline-manor-door-leaf {
    transition: none;
  }

  .timeline-manor-door-rays,
  .timeline-manor-door-dust i,
  .timeline-cinematic-vignette,
  .timeline-manor-illustration,
  .timeline-manor-illustration .timeline-manor-window-glint,
  .timeline-manor-illustration .timeline-manor-lantern-core,
  .timeline-manor-illustration .timeline-manor-lantern-halo,
  .timeline-manor-stars i,
  .timeline-manor-cloud,
  .timeline-manor-fog,
  .timeline-manor-lantern,
  .timeline-manor-lantern::after,
  .timeline-manor-carriage,
  .timeline-manor-carriage i,
  .timeline-interior-fog,
  .timeline-interior-lantern::before,
  .timeline-interior-lantern::after,
  .timeline-interior-guest,
  .timeline-mini-route-line,
  .timeline-mini-illustrated-map,
  .timeline-mini-tile-layer,
  .timeline-mini-parallax-layer,
  .timeline-mini-light-shaft,
  .timeline-mini-film-grain,
  .timeline-mini-dust-motes i,
  .timeline-mini-sconce img,
  .timeline-mini-sconce-asset,
  .timeline-mini-lantern,
  .timeline-mini-fog,
  .timeline-mini-lantern::before,
  .timeline-mini-lantern::after,
  .timeline-mini-npc,
  .timeline-mini-window-light,
  .timeline-mini-curtain,
  .timeline-mini-chandelier-glow,
  .timeline-mini-chandelier-core,
  .timeline-mini-room-door.is-glowing::after {
    animation: none;
    transition: none;
  }

  .timeline-story-card.is-nature-card::before,
  .timeline-story-card.is-nature-card::after,
  .timeline-story-card.is-date-two-card::before,
  .timeline-story-card.is-date-two-card::after,
  .timeline-floor-modal-backdrop.is-date-three-backdrop::before,
  .timeline-floor-modal-backdrop.is-date-four-backdrop::before,
  .timeline-floor-modal-backdrop.is-date-five-backdrop::before,
  .timeline-date-three-marquee-lights,
  .timeline-date-three-projector,
  .timeline-date-three-projector::before,
  .timeline-date-three-curtain,
  .timeline-date-three-beam,
  .timeline-date-three-beam::before,
  .timeline-date-three-beam-dust i,
  .timeline-date-three-carpet,
  .timeline-date-four-stage-lights::before,
  .timeline-date-four-stage-lights::after,
  .timeline-date-four-eq i,
  .timeline-date-four-spark-rain i,
  .timeline-date-four-floor-glow,
  .timeline-date-five-ring,
  .timeline-date-five-ring-core,
  .timeline-date-five-golden-door,
  .timeline-date-five-door-knob::before,
  .timeline-date-five-door-knob::after,
  .timeline-date-five-seal,
  .timeline-date-five-petals-front i,
  .timeline-nature-leaves i,
  .timeline-date-two-moon,
  .timeline-date-two-star-rain i,
  .timeline-date-two-star-rain i::before {
    animation: none;
  }
}

.timeline-bridgerton-section.is-runtime-safe {
  --timeline-magic-level: 0;
}

.timeline-bridgerton-section.is-runtime-safe .timeline-manor-door-rays,
.timeline-bridgerton-section.is-runtime-safe .timeline-manor-door-dust i,
.timeline-bridgerton-section.is-runtime-safe .timeline-cinematic-vignette,
.timeline-bridgerton-section.is-runtime-safe .timeline-manor-illustration .timeline-manor-window-glint,
.timeline-bridgerton-section.is-runtime-safe .timeline-manor-illustration .timeline-manor-lantern-core,
.timeline-bridgerton-section.is-runtime-safe .timeline-manor-illustration .timeline-manor-lantern-halo,
.timeline-bridgerton-section.is-runtime-safe .timeline-manor-stars i,
.timeline-bridgerton-section.is-runtime-safe .timeline-manor-cloud,
.timeline-bridgerton-section.is-runtime-safe .timeline-manor-fog,
.timeline-bridgerton-section.is-runtime-safe .timeline-manor-lantern,
.timeline-bridgerton-section.is-runtime-safe .timeline-manor-lantern::after,
.timeline-bridgerton-section.is-runtime-safe .timeline-manor-carriage,
.timeline-bridgerton-section.is-runtime-safe .timeline-mini-room-door.is-glowing::after {
  animation: none !important;
  transition: none !important;
}

.timeline-bridgerton-section.is-runtime-safe .timeline-mini-map-shell::after,
.timeline-bridgerton-section.is-runtime-safe .timeline-floor-modal-backdrop.is-date-three-backdrop::before,
.timeline-bridgerton-section.is-runtime-safe .timeline-floor-modal-backdrop.is-date-four-backdrop::before,
.timeline-bridgerton-section.is-runtime-safe .timeline-floor-modal-backdrop.is-date-five-backdrop::before {
  display: none;
}

.timeline-bridgerton-section.is-runtime-safe .timeline-mini-illustrated-map,
.timeline-bridgerton-section.is-runtime-safe .timeline-mini-room-door,
.timeline-bridgerton-section.is-runtime-safe .timeline-mini-room-door::after,
.timeline-bridgerton-section.is-runtime-safe .timeline-mini-room-door.is-glowing,
.timeline-bridgerton-section.is-runtime-safe .timeline-mini-room-door.is-proposal-door,
.timeline-bridgerton-section.is-runtime-safe .timeline-mini-room-door.is-proposal-door .timeline-mini-door-asset {
  filter: none !important;
}

.timeline-bridgerton-section.is-runtime-safe .timeline-mini-room,
.timeline-bridgerton-section.is-runtime-safe .timeline-map-hint.timeline-mini-status,
.timeline-bridgerton-section.is-runtime-safe .timeline-floor-modal-backdrop {
  backdrop-filter: none !important;
}

.timeline-bridgerton-section.is-runtime-safe .timeline-mini-map-shell {
  background:
    radial-gradient(circle at 50% 12%, rgba(255, 238, 204, 0.18), transparent 40%),
    linear-gradient(180deg, rgba(229, 203, 220, 0.95), rgba(132, 97, 122, 0.97));
  box-shadow:
    inset 0 0 0 1px rgba(255, 255, 255, 0.22),
    0 16px 26px rgba(66, 23, 43, 0.22);
}

.timeline-bridgerton-section.is-runtime-safe .timeline-floor-modal-backdrop {
  background: rgba(18, 7, 15, 0.64);
}

.timeline-bridgerton-section.is-runtime-safe .timeline-nature-leaves,
.timeline-bridgerton-section.is-runtime-safe .timeline-date-two-sky,
.timeline-bridgerton-section.is-runtime-safe .timeline-date-three-cinema,
.timeline-bridgerton-section.is-runtime-safe .timeline-date-four-concert,
.timeline-bridgerton-section.is-runtime-safe .timeline-date-five-proposal,
.timeline-bridgerton-section.is-runtime-safe .timeline-date-five-petals-front {
  display: none;
}

.music-section {
  --music-dyn-a: rgba(255, 244, 223, 0.66);
  --music-dyn-b: rgba(252, 225, 237, 0.88);
  --music-dyn-c: rgba(255, 228, 239, 0.74);
  --music-dyn-overlay: rgba(255, 188, 219, 0.25);
  --music-beat: 0;
  --motion-bg-speed: 30s;
  --motion-bg-speed-alt: 26s;
  background:
    radial-gradient(circle at 6% 14%, var(--music-dyn-a), transparent 34%),
    radial-gradient(circle at 92% 9%, var(--music-dyn-b), transparent 38%),
    radial-gradient(circle at 18% 88%, var(--music-dyn-c), transparent 45%),
    repeating-linear-gradient(0deg, rgba(121, 43, 65, 0.06) 0 1px, transparent 1px 15px),
    linear-gradient(145deg, rgba(255, 249, 252, 0.99), rgba(249, 219, 232, 0.93));
  position: relative;
  border-color: rgba(205, 90, 129, 0.32);
  box-shadow:
    0 28px 66px rgba(120, 32, 58, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.86);
  isolation: isolate;
  overflow: visible;
  padding: 42px 40px 36px;
  min-height: calc(100dvh - clamp(210px, 24vh, 290px));
}

.music-section::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='220' height='220' viewBox='0 0 220 220'><g fill='none' stroke='%23d1648f' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' opacity='0.55'><path d='M40 48h30l4 8h26'/><path d='M132 56l8 8 8-8 8 8'/><path d='M164 134a16 16 0 0 0-30 0v7a16 16 0 0 0 30 0z'/><circle cx='144' cy='141' r='1.5' fill='%23d1648f' stroke='none'/><circle cx='155' cy='141' r='1.5' fill='%23d1648f' stroke='none'/><path d='M145.5 147.5c2 1.8 4.5 1.8 6.5 0'/><path d='M48 148c15 14 26 20 26 20s11-6 26-20a14 14 0 0 0-24-11 14 14 0 0 0-24 11Z'/><path d='M98 95h26v12H98z'/><path d='m98 95 13-11 13 11'/></g></svg>") 0 0 / 220px 220px repeat;
  opacity: 0.75;
  pointer-events: none;
  z-index: 0;
  animation: musicPatternDrift var(--motion-bg-speed-alt) linear infinite;
}

.music-section::after {
  content: "";
  position: absolute;
  inset: -35% -10%;
  background:
    radial-gradient(circle at 50% 50%, var(--music-dyn-overlay), transparent 52%),
    radial-gradient(circle at 22% 18%, rgba(255, 255, 255, 0.54), transparent 36%),
    radial-gradient(circle at 74% 28%, rgba(255, 214, 232, 0.44), transparent 34%),
    linear-gradient(120deg, transparent 25%, rgba(255, 255, 255, 0.24) 50%, transparent 75%);
  pointer-events: none;
  opacity: 0.45;
  mix-blend-mode: screen;
  filter: blur(0px) saturate(1.1) contrast(1.05);
  z-index: 0;
  animation: musicShimmer var(--motion-bg-speed) ease-in-out infinite;
}

.music-shimmer {
  position: absolute;
  inset: 16px;
  border-radius: 20px;
  border: 1px dashed rgba(198, 97, 132, 0.22);
  pointer-events: none;
  z-index: 1;
  box-shadow:
    inset 0 0 0 1px rgba(255, 241, 247, 0.46),
    0 0 22px rgba(239, 147, 182, 0.2);
}

.music-section .section-head {
  position: relative;
  z-index: 2;
  padding-right: 0;
}

.music-sticky-head {
  position: sticky;
  top: 0;
  z-index: 9;
  margin: -2px -2px 22px;
  padding: 8px 2px 10px;
  background:
    linear-gradient(180deg, rgba(255, 247, 251, 0.96) 0%, rgba(255, 247, 251, 0.92) 72%, rgba(255, 247, 251, 0) 100%);
  border-bottom: 1px solid rgba(196, 86, 123, 0.18);
  backdrop-filter: blur(4px);
}

.music-head-tools {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
}

.music-kicker {
  display: inline-flex;
  align-items: center;
  padding: 5px 14px;
  margin-bottom: 10px;
  border-radius: 999px;
  border: 1px solid rgba(160, 57, 96, 0.34);
  background: rgba(255, 245, 250, 0.88);
  color: rgba(127, 36, 74, 0.92);
  font-family: "Cinzel", serif;
  font-size: 0.72rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
}

.music-view-toggle {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  border: 1px solid rgba(165, 63, 102, 0.28);
  border-radius: 999px;
  background: rgba(255, 245, 250, 0.86);
  color: rgba(108, 27, 60, 0.92);
  font-family: "Cinzel", serif;
  font-size: 0.7rem;
  letter-spacing: 0.06em;
  padding: 5px 10px;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

.music-view-toggle:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 14px rgba(120, 32, 58, 0.16);
}

.music-view-toggle.active {
  background: linear-gradient(140deg, rgba(255, 229, 241, 0.94), rgba(245, 195, 217, 0.9));
  border-color: rgba(164, 54, 98, 0.42);
}

.music-section .section-head h2 {
  margin-bottom: 10px;
  font-size: clamp(2.15rem, 3.1vw, 2.9rem);
}

.music-section .section-head p {
  max-width: 760px;
  font-size: 1.22rem;
}

.music-headline-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 6px;
  position: relative;
  z-index: 2;
}

.music-headline-tags span {
  display: inline-flex;
  align-items: center;
  gap: 7px;
  padding: 7px 15px;
  border-radius: 999px;
  border: 1px solid rgba(185, 124, 47, 0.36);
  background: linear-gradient(140deg, rgba(255, 249, 232, 0.96), rgba(255, 237, 248, 0.92));
  color: rgba(118, 70, 17, 0.9);
  font-size: 0.88rem;
  box-shadow: 0 10px 18px rgba(120, 32, 58, 0.14);
  animation: tagFloat var(--motion-tag-duration) ease-in-out infinite;
}

.music-headline-tags .icon-glyph {
  width: 13px;
  height: 13px;
}

.music-headline-tags span:nth-child(2n) {
  animation-delay: 0.35s;
}

.music-headline-tags span:nth-child(3) {
  animation-delay: 0.7s;
}

.music-queue-tools {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
  position: relative;
  z-index: 3;
}

.music-queue-mini {
  width: 38px;
  height: 38px;
  border-radius: 10px;
  overflow: hidden;
  border: 1px solid rgba(182, 121, 44, 0.34);
  box-shadow: 0 8px 14px rgba(120, 32, 58, 0.14);
  background: rgba(255, 241, 248, 0.92);
}

.music-queue-mini img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.music-queue-btn {
  border: 1px solid rgba(176, 67, 107, 0.3);
  border-radius: 999px;
  background: rgba(255, 244, 250, 0.9);
  color: rgba(112, 30, 64, 0.92);
  font-family: "Cinzel", serif;
  font-size: 0.68rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  padding: 6px 12px;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

.music-queue-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 16px rgba(120, 32, 58, 0.16);
}

.music-queue-btn.active {
  background: linear-gradient(140deg, rgba(255, 232, 243, 0.94), rgba(246, 201, 222, 0.92));
  border-color: rgba(166, 50, 95, 0.42);
}

.music-queue-strip {
  margin: 0 0 8px;
  display: flex;
  gap: 9px;
  overflow-x: auto;
  padding: 4px 2px 8px;
  scrollbar-width: thin;
  position: relative;
  z-index: 3;
}

.music-queue-item {
  min-width: 122px;
  border: 1px solid rgba(187, 120, 45, 0.28);
  border-radius: 12px;
  background: rgba(255, 247, 239, 0.9);
  padding: 5px;
  display: grid;
  gap: 5px;
  cursor: pointer;
  color: rgba(89, 41, 10, 0.9);
  font-family: "Cinzel", serif;
  font-size: 0.62rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  box-shadow: 0 8px 14px rgba(120, 32, 58, 0.11);
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.music-queue-item img {
  width: 100%;
  height: 66px;
  border-radius: 8px;
  object-fit: cover;
}

.music-queue-item span {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
  line-clamp: 1;
  overflow: hidden;
}

.music-queue-item:hover {
  transform: translateY(-2px);
  border-color: rgba(166, 55, 96, 0.44);
  box-shadow: 0 12px 18px rgba(120, 32, 58, 0.16);
}

.music-ornament-strip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 14px;
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid rgba(172, 68, 109, 0.26);
  background: rgba(255, 246, 251, 0.82);
  position: relative;
  z-index: 2;
  box-shadow: 0 10px 20px rgba(120, 32, 58, 0.12);
}

.music-ornament {
  width: 26px;
  height: 26px;
  display: grid;
  place-items: center;
  border-radius: 50%;
  border: 1px solid rgba(172, 68, 109, 0.26);
  background: rgba(255, 232, 243, 0.9);
  color: rgba(137, 35, 76, 0.9);
  box-shadow: 0 8px 14px rgba(120, 32, 58, 0.16);
  animation: tagFloat calc(var(--motion-tag-duration) * 1.05) ease-in-out infinite;
}

.music-ornament svg {
  width: 14px;
  height: 14px;
}

.music-ornament:nth-child(2n) {
  animation-delay: 0.24s;
}

.music-ornament:nth-child(3n) {
  animation-delay: 0.5s;
}

.music-headline-wave {
  display: inline-flex;
  align-items: flex-end;
  gap: 4px;
  height: 22px;
  margin-bottom: 20px;
  position: relative;
  z-index: 2;
}

.music-headline-wave span {
  width: 4px;
  height: 8px;
  border-radius: 999px;
  background: linear-gradient(180deg, #f2b85d, #8d4f17);
  animation: musicWave var(--motion-wave-duration) ease-in-out infinite;
  box-shadow: 0 4px 8px rgba(125, 56, 9, 0.22);
}

.music-headline-wave span:nth-child(2) {
  animation-delay: 0.08s;
}

.music-headline-wave span:nth-child(3) {
  animation-delay: 0.16s;
}

.music-headline-wave span:nth-child(4) {
  animation-delay: 0.24s;
}

.music-headline-wave span:nth-child(5) {
  animation-delay: 0.32s;
}

.music-headline-wave span:nth-child(6) {
  animation-delay: 0.4s;
}

.music-headline-wave span:nth-child(7) {
  animation-delay: 0.48s;
}

.music-headline-wave span:nth-child(8) {
  animation-delay: 0.56s;
}

.music-visual-rack {
  display: grid;
  grid-template-columns: minmax(0, 1fr) 180px;
  gap: 14px;
  align-items: center;
  margin: 2px 0 22px;
  position: relative;
  z-index: 2;
}

.music-vinyl-card {
  position: relative;
  display: grid;
  place-items: center;
}

.music-vinyl {
  width: 146px;
  aspect-ratio: 1;
  border-radius: 50%;
  display: grid;
  place-items: center;
  background:
    radial-gradient(circle at 30% 24%, rgba(255, 255, 255, 0.28), transparent 32%),
    repeating-radial-gradient(circle at center, rgba(61, 18, 36, 0.75) 0 3px, rgba(25, 8, 15, 0.9) 3px 6px);
  border: 1px solid rgba(255, 228, 239, 0.64);
  box-shadow:
    0 16px 26px rgba(80, 16, 40, 0.3),
    inset 0 0 0 2px rgba(255, 255, 255, 0.08);
  overflow: hidden;
}

.music-vinyl img {
  width: 72%;
  aspect-ratio: 1;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid rgba(255, 236, 245, 0.72);
  box-shadow: 0 10px 16px rgba(48, 10, 27, 0.3);
}

.music-vinyl-hole {
  position: absolute;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #231018;
  border: 2px solid rgba(255, 232, 242, 0.62);
  box-shadow: 0 0 0 3px rgba(255, 250, 253, 0.08);
}

.music-vinyl.is-playing {
  animation: musicVinylSpin calc(var(--motion-track-card-duration) * 2.4) linear infinite;
}

.music-vinyl-needle {
  position: absolute;
  right: 16px;
  top: 18px;
  width: 72px;
  height: 4px;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(143, 66, 98, 0.95), rgba(248, 206, 224, 0.95));
  box-shadow: 0 6px 10px rgba(64, 14, 34, 0.24);
  transform-origin: right center;
  transform: rotate(-16deg);
  transition: transform 0.35s ease;
}

.music-vinyl-needle::after {
  content: "";
  position: absolute;
  right: -4px;
  top: -4px;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: rgba(252, 232, 242, 0.96);
  border: 1px solid rgba(165, 65, 101, 0.34);
}

.music-vinyl-card.is-playing .music-vinyl-needle {
  transform: rotate(6deg);
}

.music-cinema-frame {
  margin: 0;
  width: min(380px, 100%);
  justify-self: center;
  display: grid;
  gap: 9px;
}

.music-cinema-canvas {
  position: relative;
  height: 126px;
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid rgba(255, 233, 244, 0.76);
  box-shadow:
    0 14px 24px rgba(102, 24, 54, 0.24),
    inset 0 0 0 1px rgba(255, 255, 255, 0.35);
  background: rgba(252, 223, 237, 0.46);
}

.music-cinema-image {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.music-cinema-vignette {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 84% 14%, rgba(255, 255, 255, 0.25), transparent 42%),
    linear-gradient(180deg, rgba(26, 8, 16, 0.14), transparent 35%, rgba(26, 8, 16, 0.22));
  pointer-events: none;
}

.music-cinema-thumbs {
  display: flex;
  justify-content: center;
  gap: 8px;
}

.music-cinema-thumb {
  width: 36px;
  aspect-ratio: 1;
  border-radius: 10px;
  border: 1px solid rgba(255, 228, 240, 0.72);
  overflow: hidden;
  box-shadow: 0 8px 14px rgba(106, 24, 54, 0.18);
  opacity: 0.8;
  transform: translateY(0);
  transition: transform 0.25s ease, opacity 0.25s ease, border-color 0.25s ease;
}

.music-cinema-thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.music-cinema-thumb.active {
  opacity: 1;
  border-color: rgba(210, 76, 126, 0.72);
  transform: translateY(-2px);
}

.music-light-grid {
  width: 176px;
  display: grid;
  grid-template-columns: repeat(6, minmax(0, 1fr));
  gap: 10px 8px;
  justify-self: end;
}

.music-light-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 237, 245, 0.96), rgba(219, 113, 151, 0.9));
  box-shadow: 0 0 0 0 rgba(223, 93, 145, 0.35);
  animation: musicDotPulse calc(var(--motion-track-glow-duration) * 1.5) ease-in-out infinite;
}

.music-light-dot-2 {
  animation-delay: 0.16s;
}

.music-light-dot-3 {
  animation-delay: 0.32s;
}

.music-light-dot-4 {
  animation-delay: 0.48s;
}

.music-light-dot-5 {
  animation-delay: 0.64s;
}

.music-light-dot-6 {
  animation-delay: 0.8s;
}

.music-panel {
  display: grid;
  gap: 28px;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  align-items: stretch;
  margin-bottom: 26px;
  position: relative;
  z-index: 2;
}

.now-card {
  display: grid;
  grid-template-columns: 190px 1fr;
  gap: 22px;
  align-items: center;
  padding: 22px;
  border-radius: 24px;
  background:
    radial-gradient(circle at 88% 14%, rgba(255, 255, 255, 0.84), transparent 42%),
    linear-gradient(145deg, rgba(255, 251, 253, 0.97), rgba(255, 239, 246, 0.95));
  border: 1px solid rgba(212, 74, 111, 0.28);
  box-shadow: 0 20px 42px rgba(120, 32, 58, 0.21);
  position: relative;
  overflow: hidden;
  transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
}

.now-card::before {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 15% 20%, var(--accent-soft), transparent 60%);
  opacity: 0.9;
  pointer-events: none;
}

.now-card::after {
  content: "";
  position: absolute;
  width: 140px;
  height: 140px;
  right: -30px;
  top: -30px;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.75), transparent 70%);
  opacity: 0.7;
  pointer-events: none;
}

.now-card.is-playing {
  transform: translateY(-4px) scale(1.008);
  border: 2px solid var(--accent);
  box-shadow:
    0 26px calc(54px + (var(--music-beat) * 12px))
      rgba(120, 32, 58, calc(0.34 + (var(--music-beat) * 0.16))),
    0 0 0 1px rgba(255, 242, 248, 0.7) inset;
  animation: nowCardLift calc(var(--motion-track-card-duration) * 1.15) ease-in-out infinite;
}

.now-card.is-playing::before {
  opacity: 1;
}

.now-card.is-playing::after {
  opacity: 0.95;
  animation: trackGlowSweep var(--motion-track-glow-duration) ease-in-out infinite;
}

.now-cover {
  position: relative;
  width: 182px;
  aspect-ratio: 1;
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 14px 26px rgba(120, 32, 58, 0.25);
  background: #f8e5ee;
}

.now-card.is-playing .now-cover {
  box-shadow:
    0 18px 34px rgba(120, 32, 58, 0.3),
    0 0 0 3px rgba(236, 82, 126, 0.34);
  animation: track-pulse calc(var(--motion-track-card-duration) * 1.35) ease-in-out infinite;
}

.now-cover img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.now-cover-badge {
  position: absolute;
  left: 10px;
  bottom: 10px;
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 4px 8px;
  border-radius: 999px;
  background: rgba(118, 16, 50, 0.78);
  color: rgba(255, 242, 248, 0.98);
  border: 1px solid rgba(255, 229, 240, 0.72);
  box-shadow: 0 8px 14px rgba(84, 11, 33, 0.35);
  backdrop-filter: blur(2px);
}

.now-cover-badge .icon-glyph {
  width: 12px;
  height: 12px;
}

.now-cover-badge small {
  font-family: "Cinzel", serif;
  font-size: 0.6rem;
  letter-spacing: 0.12em;
}

.now-cover::after {
  content: "";
  position: absolute;
  right: 10px;
  bottom: 10px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background:
    radial-gradient(circle at 45% 45%, rgba(255, 255, 255, 0.94), rgba(239, 198, 215, 0.86)),
    linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(253, 233, 242, 0.85));
  border: 1px solid rgba(177, 63, 101, 0.28);
  box-shadow: 0 8px 16px rgba(120, 32, 58, 0.25);
}

.now-details h3 {
  margin: 0 0 6px;
  font-size: 2rem;
}

.now-details p {
  margin: 0 0 10px;
  color: rgba(43, 11, 16, 0.8);
  font-size: 1.1rem;
}

.now-label {
  display: inline-flex;
  align-items: center;
  gap: 7px;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.25em;
  color: var(--wine);
  font-family: "Cinzel", serif;
}

.now-label::before {
  content: "";
  width: 10px;
  height: 10px;
  border-radius: 2px;
  border: 1.5px solid rgba(128, 68, 18, 0.86);
  transform: rotate(45deg);
}

.now-courtline {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 6px;
}

.now-courtline span {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid rgba(182, 125, 44, 0.32);
  background: rgba(255, 248, 230, 0.9);
  color: rgba(112, 67, 14, 0.9);
  font-size: 0.67rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-family: "Cinzel", serif;
}

.now-courtline .icon-glyph {
  width: 11px;
  height: 11px;
}

.now-live {
  margin-top: 2px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  width: fit-content;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid rgba(191, 58, 101, 0.36);
  background: rgba(255, 246, 250, 0.92);
  color: rgba(129, 24, 58, 0.9);
  font-size: 0.68rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  font-family: "Cinzel", serif;
}

.now-card.is-playing .now-live {
  border-color: rgba(255, 231, 241, 0.88);
  background: rgba(130, 25, 59, 0.9);
  color: rgba(255, 244, 249, 0.98);
  box-shadow: 0 10px 20px rgba(100, 17, 42, 0.28);
}

.now-live-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #cc2f64;
  box-shadow: 0 0 0 0 rgba(204, 47, 100, 0.5);
  animation: trackLiveDot var(--motion-track-glow-duration) ease-in-out infinite;
}

.now-live-eq {
  display: inline-flex;
  align-items: flex-end;
  gap: 2px;
  height: 12px;
}

.now-live-eq i {
  width: 2px;
  height: 4px;
  border-radius: 999px;
  background: linear-gradient(180deg, #f35b8d, #8e1d47);
  animation: trackEqBars var(--motion-track-eq-duration) ease-in-out infinite;
}

.now-live-eq.reactive i {
  animation: none;
  transition: height 120ms linear, opacity 120ms linear;
}

.now-card.is-playing .now-live-eq i {
  background: linear-gradient(180deg, #ffe5ef, #ff7ba9);
}

.now-live-eq i:nth-child(2) {
  animation-delay: 0.08s;
}

.now-live-eq i:nth-child(3) {
  animation-delay: 0.16s;
}

.now-live-eq i:nth-child(4) {
  animation-delay: 0.24s;
}

.now-live-eq i:nth-child(5) {
  animation-delay: 0.32s;
}

.now-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.now-tags span {
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(201, 44, 85, 0.12);
  color: var(--blood);
  font-size: 0.8rem;
  font-family: "Cinzel", serif;
}

.player-controls {
  background:
    radial-gradient(circle at 88% 12%, rgba(255, 255, 255, 0.84), transparent 36%),
    linear-gradient(145deg, rgba(255, 251, 253, 0.98), rgba(255, 239, 246, 0.94));
  border: 1px solid rgba(212, 74, 111, 0.25);
  border-radius: 24px;
  padding: 22px;
  display: grid;
  gap: 16px;
  box-shadow: 0 18px 38px rgba(120, 32, 58, 0.18);
  position: relative;
  overflow: hidden;
}

.player-controls::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 15% 14%, rgba(255, 233, 242, 0.42), transparent 40%),
    linear-gradient(160deg, transparent 30%, rgba(255, 255, 255, 0.28), transparent 65%);
  pointer-events: none;
}

.player-vinyl-dock {
  position: relative;
  display: grid;
  justify-items: center;
}

.player-vinyl-stage {
  width: 198px;
  height: 198px;
  display: grid;
  place-items: center;
  position: relative;
}

.player-vinyl-window {
  width: 180px;
  height: 180px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  border: 1px solid rgba(186, 72, 112, 0.28);
  background:
    radial-gradient(circle at 28% 22%, rgba(255, 255, 255, 0.3), transparent 34%),
    radial-gradient(circle at center, rgba(122, 36, 67, 0.18), rgba(70, 19, 37, 0.28));
  box-shadow:
    inset 0 0 0 1px rgba(255, 241, 247, 0.24),
    0 12px calc(24px + (var(--music-beat) * 10px))
      rgba(92, 20, 45, calc(0.2 + (var(--music-beat) * 0.13)));
}

.player-vinyl-disc-shell {
  width: 162px;
  height: 162px;
  display: grid;
  place-items: center;
}

.player-vinyl-disc {
  width: 158px;
  aspect-ratio: 1;
  border-radius: 50%;
  position: relative;
  overflow: hidden;
  display: grid;
  place-items: center;
  background:
    radial-gradient(circle at 32% 26%, rgba(255, 255, 255, 0.24), transparent 34%),
    repeating-radial-gradient(
      circle at center,
      rgba(52, 14, 29, 0.86) 0 2.8px,
      rgba(19, 6, 12, 0.95) 2.8px 5.6px
    );
  border: 1px solid rgba(255, 236, 244, 0.5);
  box-shadow:
    0 14px 24px rgba(74, 14, 36, 0.28),
    inset 0 0 0 1px rgba(255, 255, 255, 0.1);
  animation: playerVinylSpin 2.2s linear infinite;
  animation-play-state: paused;
  will-change: transform;
}

.player-vinyl-disc.is-playing {
  animation-play-state: running;
}

@keyframes playerVinylSpin {
  to {
    transform: rotate(360deg);
  }
}

.player-vinyl-art {
  width: 72%;
  aspect-ratio: 1;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid rgba(255, 239, 247, 0.74);
  box-shadow: 0 10px 16px rgba(43, 9, 24, 0.32);
}

.player-vinyl-label {
  position: absolute;
  width: 38%;
  aspect-ratio: 1;
  border-radius: 50%;
  overflow: hidden;
  border: 1px solid rgba(255, 239, 247, 0.72);
  box-shadow: 0 7px 12px rgba(44, 9, 25, 0.22);
}

.player-vinyl-label img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.player-vinyl-center {
  position: absolute;
  width: 13px;
  height: 13px;
  border-radius: 50%;
  background: #1f0e16;
  border: 2px solid rgba(255, 233, 243, 0.68);
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.08);
}

.player-vinyl-needle {
  position: absolute;
  right: -24px;
  top: 86px;
  width: 136px;
  height: 6px;
  border-radius: 999px;
  transform-origin: right center;
  background: linear-gradient(90deg, rgba(139, 54, 89, 0.95), rgba(249, 213, 230, 0.95));
  box-shadow: 0 6px 10px rgba(63, 15, 34, 0.26);
  will-change: transform;
  z-index: 2;
}

.player-vinyl-needle::before {
  content: "";
  position: absolute;
  right: -7px;
  top: 50%;
  width: 16px;
  height: 16px;
  transform: translateY(-50%);
  border-radius: 50%;
  background: rgba(255, 233, 242, 0.96);
  border: 1px solid rgba(173, 70, 108, 0.36);
  box-shadow: 0 0 0 2px rgba(255, 240, 247, 0.3);
}

.player-vinyl-needle::after {
  content: "";
  position: absolute;
  left: -10px;
  top: 50%;
  width: 14px;
  height: 10px;
  transform: translateY(-50%);
  border-radius: 8px;
  background: rgba(255, 232, 242, 0.9);
  box-shadow:
    0 2px 5px rgba(84, 23, 51, 0.28),
    inset 0 0 0 1px rgba(149, 55, 95, 0.38);
}

.player-actions {
  display: flex;
  gap: 14px;
  align-items: center;
  flex-wrap: wrap;
}

.player-btn {
  width: 46px;
  height: 46px;
  border-radius: 50%;
  border: none;
  background: linear-gradient(135deg, #c92c55, #7b1632);
  color: #fff;
  cursor: pointer;
  font-family: "Cinzel", serif;
  box-shadow: 0 12px 20px rgba(123, 22, 50, 0.35);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.player-btn.secondary {
  background: rgba(255, 238, 245, 0.95);
  color: var(--blood);
  border: 1px solid rgba(123, 22, 50, 0.35);
  box-shadow: none;
}

.player-btn.play {
  width: 60px;
  height: 60px;
  font-size: 1.2rem;
}

.player-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 14px 24px rgba(123, 22, 50, 0.35);
}

.player-btn.secondary:hover {
  box-shadow: 0 10px 18px rgba(123, 22, 50, 0.18);
}

.player-pill {
  padding: 9px 18px;
  border-radius: 999px;
  border: 1px dashed rgba(123, 22, 50, 0.35);
  background: rgba(255, 244, 249, 0.9);
  color: var(--blood);
  font-family: "Cinzel", serif;
  font-size: 0.92rem;
  cursor: pointer;
}

.player-rituals {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.player-rituals span {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(255, 246, 233, 0.88);
  border: 1px solid rgba(181, 123, 49, 0.28);
  color: rgba(108, 64, 16, 0.9);
  font-size: 0.74rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  font-family: "Cinzel", serif;
}

.player-rituals .icon-glyph {
  width: 11px;
  height: 11px;
}

.player-progress {
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 10px;
  align-items: center;
  font-size: 0.98rem;
  color: rgba(43, 11, 16, 0.75);
}

.player-progress input[type="range"] {
  width: 100%;
  accent-color: var(--blood);
}

.player-volume {
  display: flex;
  gap: 10px;
  align-items: center;
  font-size: 0.98rem;
  color: rgba(43, 11, 16, 0.75);
}

.player-volume input[type="range"] {
  width: 190px;
  accent-color: var(--blood);
}

.player-caption {
  font-size: 0.98rem;
  color: rgba(43, 11, 16, 0.7);
  padding: 8px 10px;
  border-radius: 10px;
  background: rgba(255, 248, 228, 0.75);
  border: 1px dashed rgba(184, 130, 57, 0.35);
}

.music-scenes {
  display: grid;
  gap: 14px;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  margin-bottom: 24px;
  position: relative;
  z-index: 2;
}

.music-scene {
  padding: 12px 14px;
  border-radius: 16px;
  border: 1px solid rgba(197, 95, 131, 0.3);
  background:
    radial-gradient(circle at 84% 16%, rgba(255, 255, 255, 0.8), transparent 40%),
    linear-gradient(145deg, rgba(255, 251, 253, 0.95), rgba(255, 237, 245, 0.9));
  box-shadow: 0 14px 24px rgba(120, 32, 58, 0.14);
  display: grid;
  gap: 8px;
  align-content: center;
  animation: musicSceneFloat calc(var(--motion-tag-duration) * 1.2) ease-in-out infinite;
}

.music-scene h3 {
  margin: 0;
  font-size: 0.98rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.music-section.visual-only .section-head p,
.music-section.visual-only .section-head h2,
.music-section.visual-only .music-kicker,
.music-section.visual-only .music-scenes,
.music-section.visual-only .player-caption,
.music-section.visual-only .now-label,
.music-section.visual-only .now-details h3,
.music-section.visual-only .track-meta p,
.music-section.visual-only .track-meta h3,
.music-section.visual-only .track-tags,
.music-section.visual-only .track-action,
.music-section.visual-only .track-live-text,
.music-section.visual-only .player-progress span,
.music-section.visual-only .player-volume span {
  display: none;
}

.music-section.visual-only .music-headline-tags span {
  width: 34px;
  height: 34px;
  padding: 0;
  justify-content: center;
  border-radius: 10px;
  font-size: 0;
}

.music-section.visual-only .music-headline-tags span .icon-glyph {
  width: 15px;
  height: 15px;
}

.music-section.visual-only .music-panel {
  grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
}

.music-section.visual-only .now-card {
  grid-template-columns: 1fr;
  justify-items: center;
  text-align: center;
}

.music-section.visual-only .now-cover {
  width: min(230px, 72%);
}

.music-section.visual-only .now-courtline,
.music-section.visual-only .player-rituals,
.music-section.visual-only .now-tags {
  justify-content: center;
}

.music-section.visual-only .now-details p {
  display: none;
}

.music-section.visual-only .now-live {
  gap: 0;
  padding: 4px 8px;
}

.music-section.visual-only .now-live > span:not(.now-live-eq) {
  display: none;
}

.music-section.visual-only .music-grid {
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 14px;
}

.music-section.visual-only .track-cover {
  aspect-ratio: 1;
}

.music-section.visual-only .track-card {
  padding: 10px;
}

.music-section.visual-only .player-actions {
  justify-content: center;
}

.music-section.visual-only .player-pill {
  min-width: 110px;
}

.music-section.visual-only .player-progress {
  grid-template-columns: 1fr;
}

.music-scene-icon {
  width: 30px;
  height: 30px;
  border-radius: 10px;
  display: grid;
  place-items: center;
  color: rgba(126, 29, 67, 0.9);
  background: rgba(255, 232, 242, 0.9);
  border: 1px solid rgba(176, 70, 109, 0.3);
  box-shadow: 0 8px 14px rgba(120, 32, 58, 0.16);
}

.music-scene-icon svg {
  width: 16px;
  height: 16px;
  stroke-width: 1.9;
}

.music-scene-bars {
  display: inline-flex;
  align-items: flex-end;
  gap: 4px;
  height: 14px;
}

.music-scene-bars i {
  width: 4px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(252, 171, 199, 0.95), rgba(158, 41, 84, 0.92));
  animation: musicMiniEq calc(var(--motion-track-eq-duration) * 1.5) ease-in-out infinite;
}

.music-scene-bars i:nth-child(1) {
  height: 6px;
}

.music-scene-bars i:nth-child(2) {
  height: 10px;
  animation-delay: 0.12s;
}

.music-scene-bars i:nth-child(3) {
  height: 14px;
  animation-delay: 0.24s;
}

.music-scene-bars i:nth-child(4) {
  height: 8px;
  animation-delay: 0.36s;
}

.music-scene:nth-child(2) {
  animation-delay: 0.28s;
}

.music-scene:nth-child(3) {
  animation-delay: 0.55s;
}

.music-scene:nth-child(4) {
  animation-delay: 0.82s;
}

.music-grid {
  display: grid;
  gap: 20px;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  position: relative;
  z-index: 2;
  perspective: 1100px;
}

.track-card {
  background:
    radial-gradient(circle at 88% 14%, rgba(255, 255, 255, 0.74), transparent 38%),
    linear-gradient(155deg, rgba(255, 252, 254, 0.98), rgba(255, 240, 248, 0.95));
  border-radius: 20px;
  padding: 14px;
  border: 1px solid rgba(212, 74, 111, 0.25);
  box-shadow: 0 12px 26px rgba(120, 32, 58, 0.18);
  display: grid;
  gap: 10px;
  position: relative;
  overflow: hidden;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.track-card::before {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 15% 15%, var(--accent-soft), transparent 60%);
  opacity: 0.9;
  pointer-events: none;
}

.track-card::after {
  content: "";
  position: absolute;
  width: 80px;
  height: 80px;
  right: -20px;
  top: -20px;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.6), transparent 70%);
  opacity: 0.6;
  pointer-events: none;
}

.track-card.active {
  transform: translateY(-3px);
  border-color: var(--accent);
  box-shadow:
    0 16px 30px rgba(120, 32, 58, 0.24),
    0 0 0 1px rgba(255, 241, 247, 0.42) inset;
}

.track-card.current-paused {
  transform: translateY(-2px);
  box-shadow:
    0 13px 26px rgba(120, 32, 58, 0.2),
    0 0 0 1px rgba(255, 241, 247, 0.36) inset;
}

.track-card.active::before {
  opacity: 0.9;
}

.track-card.playing {
  transform: translateY(-4px) scale(1.008);
  border: 1.5px solid var(--accent);
  background:
    radial-gradient(circle at 86% 10%, rgba(255, 255, 255, 0.76), transparent 38%),
    linear-gradient(165deg, rgba(255, 251, 253, 0.99), rgba(255, 236, 245, 0.95));
  box-shadow:
    0 18px calc(36px + (var(--music-beat) * 8px))
      rgba(120, 32, 58, calc(0.28 + (var(--music-beat) * 0.12))),
    0 0 0 1px rgba(255, 241, 247, 0.4) inset;
  animation: trackCardBeat var(--motion-track-card-duration) ease-in-out infinite;
}

.track-card.playing::before {
  opacity: 1;
}

.track-card.playing::after {
  opacity: 0.9;
  animation: trackGlowSweep var(--motion-track-glow-duration) ease-in-out infinite;
}

.track-cover {
  position: relative;
  border-radius: 14px;
  overflow: hidden;
  height: clamp(172px, 19vw, 210px);
  background: #f8e5ee;
}

.track-cover img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.track-cover::after {
  content: "";
  position: absolute;
  inset: 8px;
  border: 1px dashed rgba(255, 255, 255, 0.7);
  border-radius: 10px;
}

.track-card.playing .track-cover {
  box-shadow: 0 0 0 3px rgba(201, 44, 85, 0.45);
  animation: track-pulse calc(var(--motion-track-card-duration) * 1.35) ease-in-out infinite;
}

.track-card:not(.playing):hover {
  transform: translateY(-5px) rotateX(1.1deg) rotateY(-0.8deg);
  box-shadow:
    0 18px 32px rgba(120, 32, 58, 0.24),
    0 0 0 1px rgba(255, 241, 247, 0.44) inset;
}

.track-card .player-vinyl-window,
.track-card .music-vinyl,
.track-card .music-vinyl-card {
  display: none;
}

.track-live {
  position: absolute;
  left: 10px;
  top: 10px;
  display: inline-flex;
  align-items: center;
  gap: 7px;
  padding: 4px 9px;
  border-radius: 999px;
  border: 1px solid rgba(255, 232, 242, 0.75);
  background: rgba(122, 24, 52, 0.72);
  color: rgba(255, 244, 249, 0.98);
  box-shadow: 0 10px 18px rgba(102, 17, 43, 0.32);
  z-index: 2;
  backdrop-filter: blur(2px);
}

.track-live.is-paused {
  background: rgba(112, 31, 58, 0.5);
  border-color: rgba(255, 226, 238, 0.5);
  box-shadow: 0 7px 12px rgba(102, 17, 43, 0.2);
}

.track-live-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #ff5f94;
  box-shadow: 0 0 0 0 rgba(255, 95, 148, 0.5);
  animation: trackLiveDot var(--motion-track-glow-duration) ease-in-out infinite;
}

.track-live.is-paused .track-live-dot {
  opacity: 0.45;
  animation-play-state: paused;
}

.track-live-text {
  font-size: 0.64rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  font-family: "Cinzel", serif;
}

.track-eq {
  display: inline-flex;
  align-items: flex-end;
  gap: 2px;
  height: 14px;
}

.track-eq i {
  width: 2px;
  height: 4px;
  border-radius: 999px;
  background: linear-gradient(180deg, #ffd4e3, #ff6f9f);
  animation: trackEqBars var(--motion-track-eq-duration) ease-in-out infinite;
}

.track-eq.reactive i {
  animation: none;
  transition: height 120ms linear, opacity 120ms linear;
}

.track-live.is-paused .track-eq i {
  animation-play-state: paused;
  height: 6px;
  opacity: 0.45;
}

.track-eq i:nth-child(2) {
  animation-delay: 0.06s;
}

.track-eq i:nth-child(3) {
  animation-delay: 0.12s;
}

.track-eq i:nth-child(4) {
  animation-delay: 0.18s;
}

.track-eq i:nth-child(5) {
  animation-delay: 0.24s;
}

.track-eq i:nth-child(6) {
  animation-delay: 0.3s;
}

.track-meta h3 {
  margin: 0 0 6px;
  font-size: 1.12rem;
}

.track-card.playing .track-meta h3 {
  color: var(--accent);
  text-shadow: 0 3px 9px rgba(120, 32, 58, 0.2);
}

.track-meta p {
  margin: 0;
  color: rgba(43, 11, 16, 0.75);
  font-size: 1rem;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  overflow: hidden;
  min-height: 2.55em;
}

.track-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.track-tags span {
  padding: 5px 11px;
  border-radius: 999px;
  background: rgba(201, 44, 85, 0.12);
  color: var(--blood);
  font-size: 0.83rem;
  font-family: "Cinzel", serif;
}

.track-card.playing .track-tags span {
  background: rgba(201, 44, 85, 0.2);
  border: 1px solid rgba(175, 35, 82, 0.3);
}

.track-action {
  position: relative;
  padding: 10px 15px;
  font-size: 0.9rem;
  min-height: 44px;
  min-width: 138px;
  overflow: hidden;
}

.track-action-label {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  transition: transform 0.26s ease, opacity 0.24s ease;
}

.track-action-live {
  position: absolute;
  inset: 0;
  opacity: 0;
  transform: translateY(10px);
}

.track-action.is-playing .track-action-play {
  opacity: 0;
  transform: translateY(-10px);
}

.track-action.is-playing .track-action-live {
  opacity: 1;
  transform: translateY(0);
}

.track-card.playing .track-action {
  background: linear-gradient(135deg, #d43867, #7b1632);
  box-shadow: 0 12px 24px rgba(123, 22, 50, 0.34);
}

.player-btn:active,
.player-pill:active,
.music-queue-btn:active,
.track-action:active {
  transform: translateY(0) scale(0.97);
}

@keyframes musicPatternDrift {
  0% {
    background-position: 0 0;
    transform: translate3d(0, 0, 0) scale(1);
  }
  50% {
    background-position: 180px 85px;
    transform: translate3d(180px, 85px, 0) scale(1.04);
  }
  100% {
    background-position: 360px 170px;
    transform: translate3d(360px, 170px, 0) scale(1);
  }
}

@keyframes musicShimmer {
  0%,
  100% {
    transform: translate3d(0, 0, 0) rotate(0.4deg);
  }
  50% {
    transform: translate3d(-16px, 12px, 0) rotate(-0.4deg);
  }
}

@keyframes musicVinylSpin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes musicDotPulse {
  0%,
  100% {
    transform: scale(0.95);
    opacity: 0.55;
    box-shadow: 0 0 0 0 rgba(223, 93, 145, 0.35);
  }
  50% {
    transform: scale(1.15);
    opacity: 1;
    box-shadow: 0 0 0 6px rgba(223, 93, 145, 0);
  }
}

@keyframes musicMiniEq {
  0%,
  100% {
    transform: scaleY(0.6);
    opacity: 0.66;
  }
  50% {
    transform: scaleY(1);
    opacity: 1;
  }
}

@keyframes musicSceneFloat {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(calc(var(--motion-tag-lift) * -0.9));
  }
}

@keyframes track-pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(201, 44, 85, 0.45);
  }
  70% {
    box-shadow: 0 0 0 16px rgba(201, 44, 85, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(201, 44, 85, 0);
  }
}

@keyframes nowCardLift {
  0%,
  100% {
    transform: translateY(-4px) scale(1.008);
    box-shadow:
      0 26px 54px rgba(120, 32, 58, 0.34),
      0 0 0 1px rgba(255, 242, 248, 0.7) inset;
  }
  50% {
    transform: translateY(-6px) scale(1.014);
    box-shadow:
      0 32px 62px rgba(120, 32, 58, 0.42),
      0 0 0 1px rgba(255, 242, 248, 0.85) inset;
  }
}

@keyframes trackCardBeat {
  0%,
  100% {
    transform: translateY(-4px) scale(1.008);
    box-shadow: 0 18px 36px rgba(120, 32, 58, 0.28);
  }
  50% {
    transform: translateY(-5px) scale(1.011);
    box-shadow: 0 22px 40px rgba(120, 32, 58, 0.34);
  }
}

@keyframes trackEqBars {
  0%,
  100% {
    height: 4px;
    opacity: 0.55;
  }
  50% {
    height: 14px;
    opacity: 1;
  }
}

@keyframes trackLiveDot {
  0% {
    box-shadow: 0 0 0 0 rgba(255, 95, 148, 0.55);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(255, 95, 148, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(255, 95, 148, 0);
  }
}

@keyframes trackGlowSweep {
  0%,
  100% {
    transform: translateX(0) translateY(0) scale(1);
  }
  50% {
    transform: translateX(-8px) translateY(6px) scale(1.1);
  }
}

@keyframes musicWave {
  0%,
  100% {
    height: var(--motion-wave-min);
    opacity: 0.7;
  }
  50% {
    height: var(--motion-wave-max);
    opacity: 1;
  }
}

@keyframes tagFloat {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(calc(var(--motion-tag-lift) * -1));
  }
}

.accent-rose {
  --accent: var(--rose-deep);
  --accent-soft: rgba(240, 122, 166, 0.22);
}

.accent-wine {
  --accent: var(--blood);
  --accent-soft: rgba(139, 29, 61, 0.22);
}

.accent-gold {
  --accent: var(--gold);
  --accent-soft: rgba(243, 201, 122, 0.25);
}

.accent-berry {
  --accent: #c92c55;
  --accent-soft: rgba(201, 44, 85, 0.22);
}

.accent-ink {
  --accent: var(--ink);
  --accent-soft: rgba(43, 11, 16, 0.18);
}

.accent-blush {
  --accent: #d48ca8;
  --accent-soft: rgba(212, 140, 168, 0.22);
}

.gallery-section {
  position: relative;
  background:
    radial-gradient(circle at 12% 14%, rgba(246, 239, 255, 0.86), transparent 44%),
    radial-gradient(circle at 86% 10%, rgba(255, 230, 243, 0.74), transparent 48%),
    linear-gradient(135deg, rgba(255, 252, 255, 0.98), rgba(238, 231, 247, 0.93));
}

.gallery-section::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 8% 82%, rgba(207, 146, 179, 0.18) 0 14px, transparent 16px),
    radial-gradient(circle at 94% 16%, rgba(207, 146, 179, 0.16) 0 14px, transparent 16px);
  pointer-events: none;
}

.gallery-ribbon {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 16px;
  position: relative;
  z-index: 1;
}

.gallery-ribbon span {
  display: inline-flex;
  align-items: center;
  gap: 7px;
  padding: 5px 12px;
  border-radius: 999px;
  border: 1px solid rgba(145, 60, 108, 0.3);
  background: rgba(248, 241, 255, 0.88);
  color: rgba(98, 33, 74, 0.88);
  font-size: 0.8rem;
  box-shadow: 0 8px 14px rgba(120, 32, 58, 0.12);
}

.gallery-ribbon .icon-glyph {
  width: 13px;
  height: 13px;
}

.gallery {
  display: grid;
  gap: 18px;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  position: relative;
  z-index: 1;
}

.polaroid {
  margin: 0;
  background: #fff;
  border-radius: 18px;
  padding: 22px 14px 18px;
  box-shadow: 0 18px 40px rgba(120, 32, 58, 0.2);
  border: 1px solid rgba(212, 74, 111, 0.2);
  transform: rotate(-1deg);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  position: relative;
  animation: polaroidIn var(--motion-polaroid-duration) ease both;
  animation-delay: var(--polaroid-delay, 0s);
}

.polaroid-0 {
  transform: rotate(-2deg);
}

.polaroid-1 {
  transform: rotate(1.6deg);
}

.polaroid-2 {
  transform: rotate(-0.6deg);
}

.polaroid-3 {
  transform: rotate(2.2deg);
}

.polaroid-4 {
  transform: rotate(-1.5deg);
}

.polaroid-pin {
  position: absolute;
  top: -9px;
  left: 18px;
  width: 32px;
  height: 32px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  background: linear-gradient(145deg, #f8aeca, #bf4a7d);
  border: 2px solid rgba(255, 243, 249, 0.9);
  box-shadow: 0 10px 16px rgba(120, 32, 58, 0.22);
  color: rgba(255, 246, 251, 0.98);
}

.polaroid-pin .icon-glyph {
  width: 15px;
  height: 15px;
}

.polaroid img {
  width: 100%;
  height: 220px;
  object-fit: cover;
  border-radius: 14px;
}

.polaroid figcaption {
  padding-top: 10px;
  text-align: center;
  font-size: 0.95rem;
  display: grid;
  gap: 5px;
}

.polaroid figcaption span {
  justify-self: center;
  padding: 2px 10px;
  border-radius: 999px;
  font-size: 0.68rem;
  letter-spacing: 0.09em;
  text-transform: uppercase;
  background: rgba(201, 44, 85, 0.12);
  color: rgba(102, 24, 50, 0.84);
  font-family: "Cinzel", serif;
}

.polaroid:hover {
  transform: translateY(-6px) rotate(0deg);
  box-shadow: 0 22px 50px rgba(120, 32, 58, 0.3);
}

@keyframes polaroidIn {
  from {
    opacity: 0;
    transform: translateY(20px) rotate(0deg);
  }
  to {
    opacity: 1;
  }
}

.puzzle-section {
  position: relative;
  background:
    radial-gradient(circle at 12% 14%, rgba(229, 241, 255, 0.78), transparent 42%),
    radial-gradient(circle at 86% 16%, rgba(255, 233, 246, 0.72), transparent 48%),
    linear-gradient(138deg, rgba(250, 251, 255, 0.98), rgba(233, 236, 246, 0.93));
}

.puzzle-section::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    linear-gradient(90deg, rgba(89, 95, 150, 0.05) 0 1px, transparent 1px 26px),
    linear-gradient(0deg, rgba(89, 95, 150, 0.05) 0 1px, transparent 1px 26px);
  pointer-events: none;
}

.puzzle-vibes {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 16px;
  position: relative;
  z-index: 1;
}

.puzzle-vibes span {
  display: inline-flex;
  align-items: center;
  gap: 7px;
  padding: 5px 12px;
  border-radius: 999px;
  border: 1px dashed rgba(66, 65, 129, 0.35);
  background: rgba(236, 241, 255, 0.88);
  color: rgba(53, 45, 103, 0.88);
  font-size: 0.8rem;
  box-shadow: 0 8px 14px rgba(84, 68, 126, 0.12);
}

.puzzle-vibes .icon-glyph {
  width: 13px;
  height: 13px;
}

.puzzle-wrap {
  display: grid;
  gap: 24px;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  align-items: start;
  position: relative;
  z-index: 1;
}

.puzzle-panel {
  background: linear-gradient(140deg, rgba(255, 255, 255, 0.9), rgba(240, 244, 255, 0.84));
  border-radius: 18px;
  border: 1px solid rgba(113, 108, 179, 0.26);
  padding: 16px;
  overflow: auto;
  max-height: 70vh;
  box-shadow: 0 18px 32px rgba(85, 72, 127, 0.16);
}

.puzzle-grid {
  display: grid;
  gap: 2px;
  width: min(680px, 90vw);
  aspect-ratio: 1 / 1;
  margin: 0 auto;
  transform-origin: top left;
  box-shadow: 0 16px 28px rgba(88, 73, 130, 0.18);
  border-radius: 8px;
  overflow: hidden;
}

.tile {
  position: relative;
  border-radius: 3px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.4);
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.tile:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.18);
}

.tile.selected {
  outline: 2px solid var(--gold);
  transform: scale(1.01);
}

.tile::after {
  content: "";
  position: absolute;
  inset: 0;
  border: 1px solid rgba(0, 0, 0, 0.08);
}

.puzzle-controls {
  display: grid;
  gap: 16px;
  background: rgba(246, 249, 255, 0.72);
  border: 1px solid rgba(113, 108, 179, 0.2);
  border-radius: 16px;
  padding: 16px;
}

.controls {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.button {
  padding: 10px 18px;
  border: none;
  border-radius: 999px;
  background: linear-gradient(135deg, #c92c55, #7b1632);
  color: #fff;
  font-family: "Cinzel", serif;
  font-size: 0.98rem;
  cursor: pointer;
  box-shadow: 0 12px 20px rgba(123, 22, 50, 0.35);
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

.button.alt {
  background: linear-gradient(135deg, #2b0b10, #14070a);
}

.button.ghost {
  background: transparent;
  color: var(--blood);
  border: 1px solid rgba(123, 22, 50, 0.45);
  box-shadow: none;
}

.button:hover {
  transform: translateY(-1px);
  box-shadow: 0 14px 24px rgba(123, 22, 50, 0.35);
}

.button.ghost:hover {
  background: rgba(201, 44, 85, 0.08);
  box-shadow: none;
}

.music-toggle {
  position: fixed;
  right: 24px;
  bottom: 24px;
  z-index: 4;
  padding: 8px 14px;
  border-radius: 999px;
  border: 1px solid rgba(123, 22, 50, 0.35);
  background: rgba(255, 244, 249, 0.9);
  color: var(--blood);
  font-family: "Cinzel", serif;
  font-size: 0.85rem;
  cursor: pointer;
  box-shadow: 0 10px 18px rgba(123, 22, 50, 0.18);
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.music-toggle:hover {
  background: rgba(255, 238, 245, 0.95);
}

.motion-intensity-toggle {
  position: fixed;
  left: 24px;
  bottom: 24px;
  z-index: 6;
  display: grid;
  gap: 6px;
  padding: 8px 10px;
  border-radius: 14px;
  border: 1px solid rgba(123, 22, 50, 0.3);
  background: rgba(255, 244, 249, 0.9);
  box-shadow: 0 10px 16px rgba(120, 32, 58, 0.18);
  backdrop-filter: blur(4px);
}

.motion-intensity-label {
  font-family: "Cinzel", serif;
  color: rgba(94, 21, 45, 0.9);
  font-size: 0.66rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  text-align: center;
}

.motion-intensity-options {
  display: inline-flex;
  gap: 6px;
}

.motion-intensity-btn {
  min-width: 68px;
  border: 1px solid rgba(123, 22, 50, 0.24);
  border-radius: 999px;
  background: rgba(255, 250, 252, 0.9);
  color: rgba(95, 20, 46, 0.92);
  font-family: "Cinzel", serif;
  font-size: 0.72rem;
  letter-spacing: 0.05em;
  padding: 5px 9px;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, background 0.2s ease;
}

.motion-intensity-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 14px rgba(120, 32, 58, 0.16);
}

.motion-intensity-btn.active {
  border-color: rgba(151, 35, 72, 0.56);
  background: linear-gradient(140deg, rgba(255, 238, 246, 0.96), rgba(247, 208, 223, 0.92));
  box-shadow: 0 9px 16px rgba(120, 32, 58, 0.22);
}

.music-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(123, 22, 50, 0.3);
  box-shadow: 0 0 0 rgba(201, 44, 85, 0);
  transition: background 0.2s ease, box-shadow 0.2s ease;
}

.music-indicator.on {
  background: #c92c55;
  box-shadow: 0 0 10px rgba(201, 44, 85, 0.6);
}

.control-block {
  display: grid;
  gap: 8px;
}

.control-block label {
  font-family: "Cinzel", serif;
  font-size: 0.95rem;
}

.control-block select,
.control-block input[type="range"] {
  width: 100%;
}

.control-block select {
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid rgba(212, 74, 111, 0.25);
  background: #fff;
  font-family: "Cormorant Garamond", serif;
  font-size: 1rem;
}

.control-hints {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.secret {
  padding: 14px 18px;
  border-radius: 12px;
  background: rgba(240, 182, 200, 0.25);
  border: 1px solid rgba(212, 74, 111, 0.35);
  font-size: 1.1rem;
}

.footer {
  text-align: center;
  margin-top: 50px;
  font-size: 1rem;
  color: rgba(18, 18, 18, 0.7);
}

.footer::before {
  content: "";
  width: 8px;
  height: 8px;
  border-radius: 2px;
  background: var(--blood);
  transform: rotate(45deg) translateY(-1px);
  display: inline-block;
  margin-right: 8px;
}

.note {
  font-size: 0.95rem;
  color: rgba(18, 18, 18, 0.7);
}

@media (prefers-reduced-motion: reduce) {
  body::before {
    animation: none;
  }

  body::after {
    animation: none;
  }

  .section-card-row {
    transition: none;
  }

  .top-route-btn {
    transition: none;
  }

  .section-card-track::after {
    animation: none;
  }

  .section-carousel-particles {
    display: none;
  }

  .section-room-body {
    transition: none;
  }

  .section-room-panel {
    animation: none;
  }

  .section-card.active .section-card-icon {
    animation: none;
  }

  .section-card-preview-orb {
    animation: none;
  }

  .section-card-stickers span,
  .section-card-preview-icons span {
    animation: none;
  }

  .divider-mark {
    animation: none;
  }

  .section-card-wax-seal {
    animation: none;
  }

  .section-room-body::after {
    animation: none;
  }

  .love-envelope,
  .love-envelope-flap,
  .love-envelope-letter,
  .love-note {
    transition: none;
  }

  .cat-burst {
    display: none;
  }

  .cat-storm {
    display: none;
  }

  .letter-room-save {
    animation: none;
  }

  .love-heart-charm,
  .love-note-sparkle {
    animation: none;
  }

  .letter-vibes span,
  .letter-courtline span,
  .letter-curtain,
  .letter-shimmer,
  .letter-launcher::before,
  .letter-launcher-glow,
  .letter-launcher-envelope,
  .letter-launcher-parchment,
  .letter-launcher-seal,
  .letter-orbit-item,
  .letter-accent {
    animation: none;
  }

  .letter-doodles span,
  .music-headline-tags span,
  .music-headline-wave span,
  .timeline-heart {
    animation: none;
  }

  .music-section::before,
  .music-section::after,
  .section-room-music-branches,
  .section-room-music-branch,
  .section-room-music-bokeh,
  .music-ornament,
  .music-vinyl.is-playing,
  .player-vinyl-disc,
  .music-light-dot,
  .music-scene-bars i,
  .music-scene {
    animation: none;
  }

  .section-room-music-bokeh {
    display: none;
  }

  .section-room-music-floral-fx,
  .section-room-music-sakura {
    display: none;
  }

  .section-room-music-branches {
    display: none;
  }

  .music-sticky-head {
    backdrop-filter: none;
  }

  .music-queue-btn,
  .music-queue-item {
    transition: none;
  }

  .now-card.is-playing,
  .now-card.is-playing::after,
  .now-card.is-playing .now-cover,
  .now-live-dot,
  .now-live-eq i,
  .track-card.playing,
  .track-card.playing::after,
  .track-card.playing .track-cover,
  .track-live-dot,
  .track-eq i {
    animation: none;
  }

  .now-card.is-playing,
  .track-card.playing {
    transform: none;
  }

  .now-live-eq.reactive i,
  .track-eq.reactive i {
    transition: height 0.28s ease, opacity 0.28s ease;
  }

  .music-section::before {
    opacity: 0.3;
  }

  .music-section::after {
    opacity: 0.22;
    filter: saturate(1) contrast(1);
  }

  .polaroid {
    animation: none;
  }
}

@media (max-width: 980px) {
  .top-routes {
    top: 10px;
  }

  .top-routes-shell {
    padding: 9px;
    gap: 7px;
  }

  .top-route-btn {
    min-height: 35px;
    padding: 6px 10px;
    font-size: 0.74rem;
  }

  .motion-intensity-toggle {
    left: 14px;
    bottom: 20px;
    padding: 7px 8px;
  }

  .motion-intensity-btn {
    min-width: 58px;
    font-size: 0.68rem;
    padding: 5px 7px;
  }

  .section-room[data-section="music"] .section-room-header,
  .section-room[data-section="music"] .section-room-body {
    width: min(1160px, 97vw);
  }

  .section-room[data-section="music"] .section-room-stage {
    padding: clamp(74px, 8vh, 92px) 12px clamp(54px, 7vh, 76px);
  }

  .section-room-music-floral-fx,
  .section-room-music-sakura,
  .section-room-music-branches,
  .section-room-music-bokeh {
    display: none;
  }

  .section-room-music-fx {
    opacity: 0.68;
  }

  .section-room-music-branch.branch-left {
    width: clamp(280px, 40vw, 500px);
    height: clamp(100px, 15vw, 190px);
  }

  .section-room-music-branch.branch-mid {
    left: 38%;
    width: clamp(190px, 22vw, 320px);
    height: clamp(92px, 13vw, 176px);
  }

  .section-room-music-branch.branch-right {
    width: clamp(240px, 30vw, 440px);
    height: clamp(98px, 14vw, 190px);
  }

  .section-room-music-branch.branch-top-center {
    left: 50%;
    width: clamp(190px, 24vw, 360px);
    height: clamp(92px, 13vw, 180px);
    top: -12px;
  }

  .section-room-music-branch.branch-cascade-right {
    right: clamp(-12px, 1vw, 18px);
    width: clamp(150px, 18vw, 240px);
    height: clamp(110px, 17vw, 210px);
    top: -2px;
  }

  .music-section {
    min-height: calc(100dvh - 200px);
    padding: 32px 22px 26px;
  }

  .music-ornament-strip {
    flex-wrap: wrap;
    gap: 6px;
  }

  .music-ornament {
    width: 24px;
    height: 24px;
  }

  .music-queue-item {
    min-width: 114px;
  }

  .music-visual-rack {
    grid-template-columns: minmax(0, 1fr) 140px;
    gap: 10px;
  }

  .music-vinyl {
    width: 126px;
  }

  .music-vinyl-needle {
    width: 58px;
    right: 10px;
    top: 18px;
  }

  .music-cinema-frame {
    width: min(320px, 100%);
  }

  .music-cinema-canvas {
    height: 108px;
  }

  .music-cinema-thumb {
    width: 34px;
  }

  .music-light-grid {
    width: 140px;
    gap: 8px 7px;
  }

  .music-scenes {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .music-panel {
    grid-template-columns: 1fr;
    gap: 18px;
  }

  .player-vinyl-stage {
    width: 156px;
    height: 156px;
  }

  .player-vinyl-window {
    width: 142px;
    height: 142px;
  }

  .player-vinyl-disc-shell {
    width: 126px;
    height: 126px;
  }

  .player-vinyl-disc {
    width: 122px;
  }

  .player-vinyl-needle {
    width: 106px;
    top: 66px;
    right: -16px;
    height: 6px;
  }

  .music-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .now-card {
    grid-template-columns: 130px 1fr;
    gap: 14px;
  }

  .now-cover {
    width: 130px;
  }

  .player-volume input[type="range"] {
    width: 100%;
  }
}

@media (max-width: 720px) {
  .section-carousel {
    padding: 14px 12px 12px;
    border-radius: 24px;
    gap: 12px;
  }

  .top-routes {
    top: 8px;
    margin-bottom: 10px;
  }

  .top-routes-shell {
    flex-wrap: nowrap;
    overflow-x: auto;
    padding: 8px;
    border-radius: 16px;
    scrollbar-width: thin;
  }

  .top-route-btn {
    flex: 0 0 auto;
    min-height: 33px;
    padding: 6px 10px;
    font-size: 0.72rem;
  }

  .motion-intensity-toggle {
    left: 10px;
    bottom: 14px;
    gap: 5px;
  }

  .motion-intensity-label {
    font-size: 0.58rem;
    letter-spacing: 0.1em;
  }

  .motion-intensity-options {
    gap: 4px;
  }

  .motion-intensity-btn {
    min-width: 52px;
    font-size: 0.62rem;
    padding: 4px 6px;
  }

  .section-room[data-section="music"] .section-room-header,
  .section-room[data-section="music"] .section-room-body {
    width: 100%;
  }

  .section-room[data-section="music"] .section-room-stage {
    min-height: 100dvh;
    padding: 74px 8px 66px;
    gap: 12px;
  }

  .section-room-music-branch.branch-left {
    width: clamp(220px, 44vw, 360px);
    height: clamp(84px, 18vw, 144px);
    top: -8px;
  }

  .section-room-music-branch.branch-mid {
    left: 46%;
    width: clamp(150px, 28vw, 240px);
    height: clamp(74px, 14vw, 122px);
    top: -8px;
  }

  .section-room-music-branch.branch-right {
    width: clamp(190px, 40vw, 320px);
    height: clamp(82px, 16vw, 140px);
    top: -5px;
    right: -30px;
  }

  .section-room-music-branch.branch-top-center {
    left: 58%;
    width: clamp(130px, 32vw, 220px);
    height: clamp(62px, 16vw, 118px);
    top: -7px;
  }

  .section-room-music-branch.branch-cascade-right {
    right: -18px;
    width: clamp(120px, 30vw, 170px);
    height: clamp(96px, 24vw, 150px);
    top: -4px;
  }

  .music-visual-rack {
    grid-template-columns: 1fr;
    justify-items: center;
    gap: 10px;
  }

  .music-queue-tools {
    width: 100%;
    justify-content: space-between;
  }

  .music-vinyl {
    width: 118px;
  }

  .music-vinyl-needle {
    width: 52px;
    right: 4px;
    top: 10px;
  }

  .music-cinema-frame {
    width: min(300px, 92%);
  }

  .music-cinema-canvas {
    height: 98px;
  }

  .music-cinema-thumb {
    width: 32px;
  }

  .music-light-grid {
    width: min(240px, 92%);
    justify-self: center;
    grid-template-columns: repeat(9, minmax(0, 1fr));
    gap: 8px 7px;
  }

  .section-carousel::before {
    inset: 8px;
    border-radius: 18px;
  }

  .section-carousel-head {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }

  .section-carousel-head-text {
    width: 100%;
    gap: 6px;
  }

  .section-carousel-stamp {
    font-size: 0.56rem;
    letter-spacing: 0.16em;
  }

  .section-carousel-title {
    gap: 8px;
    font-size: 1.36rem;
  }

  .section-carousel-head p {
    font-size: 0.94rem;
  }

  .section-carousel-divider {
    width: 100%;
    max-width: 280px;
  }

  .section-carousel-actions {
    width: 100%;
    justify-content: space-between;
  }

  .section-card-track {
    gap: 18px;
  }

  .section-card {
    grid-template-columns: 1fr;
    padding: 18px;
    min-height: clamp(220px, 46vh, 330px);
  }

  .section-card-letter::after {
    right: 56px;
    top: 8px;
    font-size: 0.68rem;
  }

  .section-card-wax-ribbon {
    right: 18px;
    top: 20px;
    width: 66px;
    height: 12px;
  }

  .section-card-wax-seal {
    right: 12px;
    top: 6px;
    width: 44px;
    height: 44px;
    font-size: 0.5rem;
  }

  .section-card-preview {
    min-height: 170px;
    height: clamp(170px, 26vh, 220px);
  }

  .section-card-love-tag {
    font-size: 0.66rem;
    letter-spacing: 0.1em;
  }

  .section-card-theme {
    font-size: 0.62rem;
    letter-spacing: 0.09em;
  }

  .section-card-stickers span,
  .section-card-preview-icons span {
    width: 22px;
    height: 22px;
  }

  .section-card-stickers .icon-glyph,
  .section-card-preview-icons .icon-glyph {
    width: 12px;
    height: 12px;
  }

  .section-card-preview-orb {
    width: 14px;
    height: 14px;
  }

  .section-card-preview-note {
    font-size: 0.6rem;
    letter-spacing: 0.1em;
  }

  .section-room-header {
    align-items: flex-start;
  }

  .section-room-actions {
    width: 100%;
    justify-content: space-between;
  }

  .section-room-title {
    font-size: 1.7rem;
  }

  .section-room-stage {
    padding: 82px 16px 86px;
  }

  .hero-title {
    font-size: 2.2rem;
  }

  .section {
    padding: 22px;
  }

  .music-section {
    gap: 10px;
    padding: 22px 14px 20px;
    min-height: calc(100dvh - 150px);
  }

  .music-sticky-head {
    margin-bottom: 14px;
  }

  .music-kicker {
    font-size: 0.58rem;
    letter-spacing: 0.14em;
    padding: 4px 10px;
  }

  .music-ornament-strip {
    width: 100%;
    justify-content: center;
    flex-wrap: wrap;
    padding: 5px 9px;
    gap: 6px;
  }

  .music-ornament {
    width: 22px;
    height: 22px;
  }

  .music-scenes {
    grid-template-columns: 1fr;
    gap: 10px;
  }

  .music-scene {
    padding: 11px 12px;
  }

  .hero {
    text-align: center;
  }

  .hero-actions {
    justify-content: center;
  }

  .hero-tags {
    justify-content: center;
  }

  .photo-frame {
    width: min(260px, 80vw);
  }

  .letter-section {
    gap: 10px;
    padding: 22px 14px 20px;
  }

  .letter-curtain {
    width: 94px;
    height: 150px;
    top: -56px;
    opacity: 0.5;
  }

  .letter-curtain-left {
    left: -54px;
  }

  .letter-curtain-right {
    right: -54px;
  }

  .letter-kicker {
    font-size: 0.58rem;
    letter-spacing: 0.14em;
    padding: 4px 10px;
  }

  .letter-royal-bar {
    font-size: 0.56rem;
    letter-spacing: 0.1em;
    padding: 5px 11px;
    gap: 6px;
  }

  .letter-royal-mark {
    width: 17px;
    height: 17px;
  }

  .letter-vibes {
    gap: 7px;
  }

  .letter-vibes span {
    font-size: 0.72rem;
    padding: 4px 10px;
  }

  .letter-courtline span {
    font-size: 0.68rem;
    padding: 4px 9px;
  }

  .letter-launcher {
    padding: 26px 14px 18px;
    border-radius: 22px;
  }

  .letter-launcher::before {
    inset: 6px;
  }

  .letter-launcher-glow {
    left: 14%;
    right: 14%;
    bottom: 16px;
  }

  .letter-orbit-item {
    width: 26px;
    height: 26px;
    border-radius: 9px;
  }

  .letter-orbit-item .icon-glyph {
    width: 12px;
    height: 12px;
  }

  .letter-launcher-envelope {
    width: min(318px, 83vw);
    height: 176px;
  }

  .letter-launcher-parchment {
    top: 18%;
    width: 78%;
    height: 56%;
    padding: 9px 10px;
    border-radius: 12px;
    gap: 6px;
  }

  .letter-parchment-title {
    font-size: 0.61rem;
  }

  .letter-launcher-seal {
    width: 60px;
    height: 60px;
  }

  .letter-launcher-seal .icon-glyph {
    width: 14px;
    height: 14px;
  }

  .letter-launcher-seal small {
    font-size: 0.56rem;
  }

  .letter-launcher-title {
    font-size: 0.74rem;
    letter-spacing: 0.18em;
  }

  .letter-launcher-caption {
    font-size: 0.8rem;
  }

  .letter-accent {
    width: 22px;
    height: 22px;
  }

  .letter-accent .icon-glyph {
    width: 10px;
    height: 10px;
  }

  .letter-doodles span {
    width: 24px;
    height: 24px;
  }

  .letter-room-stage {
    padding: 12px 14px 12px;
    gap: 10px;
  }

  .love-envelope {
    width: min(350px, 90vw);
    height: 210px;
  }

  .love-envelope-ears {
    width: 140px;
    top: -14px;
  }

  .cat-ear {
    width: 30px;
    height: 24px;
  }

  .cat-ear-left {
    left: 18px;
  }

  .cat-ear-right {
    right: 18px;
  }

  .love-envelope-paws {
    left: 12px;
    right: 12px;
    bottom: 10px;
  }

  .cat-paw {
    width: 22px;
    height: 11px;
  }

  .cat-paw::before {
    width: 5px;
    height: 5px;
    top: -7px;
    box-shadow:
      7px -1px 0 rgba(255, 240, 248, 0.96),
      14px 0 0 rgba(255, 240, 248, 0.96);
  }

  .cat-whiskers {
    bottom: 44px;
    gap: 6px;
  }

  .cat-whiskers-left {
    right: calc(50% + 30px);
  }

  .cat-whiskers-right {
    left: calc(50% + 30px);
  }

  .cat-whisker-line {
    width: 44px;
    height: 1.8px;
  }

  .letter-room-canvas {
    min-height: clamp(210px, 34vh, 280px);
    max-height: calc(100dvh - 180px);
  }

  .letter-room-canvas.is-open {
    min-height: clamp(320px, 54vh, 500px);
    max-height: calc(100dvh - 150px);
  }

  .cat-burst {
    height: 420px;
    top: 18px;
  }

  .cat-storm-item {
    width: clamp(70px, 16vw, 120px);
    height: clamp(70px, 16vw, 120px);
  }

  .cat-fall {
    width: clamp(24px, 6vw, 32px);
    height: clamp(24px, 6vw, 32px);
  }

  .cat-fall.is-paw {
    width: clamp(20px, 5.2vw, 28px);
    height: clamp(20px, 5.2vw, 28px);
  }

  .love-envelope-letter {
    width: min(280px, 72vw);
    height: 160px;
    bottom: 20px;
  }

  .love-note-panel {
    top: 4px;
  }

  .love-note {
    max-height: min(50vh, 470px);
    padding: 18px;
  }

  .love-note-content {
    padding-top: 20px;
  }

  .love-note-garland {
    top: 10px;
    gap: 8px;
  }

  .love-heart-charm {
    width: 10px;
    height: 10px;
  }

  .love-heart-charm::before,
  .love-heart-charm::after {
    width: 10px;
    height: 10px;
  }

  .love-heart-charm::before {
    left: -5px;
  }

  .love-heart-charm::after {
    top: -5px;
  }

  .love-note-corner {
    width: 64px;
    height: 64px;
    opacity: 0.5;
  }

  .love-note-sparkle {
    width: 9px;
    height: 9px;
  }

  .letter-room-save {
    min-width: 170px;
  }

  .room-letter-body {
    grid-template-columns: 1fr;
  }

  .room-letter-photo img {
    height: 200px;
  }

  .music-panel {
    grid-template-columns: 1fr;
    gap: 14px;
  }

  .music-grid {
    grid-template-columns: 1fr;
  }

  .timeline-ribbon span,
  .timeline-content-tags span,
  .music-headline-tags span,
  .gallery-ribbon span,
  .puzzle-vibes span {
    font-size: 0.7rem;
  }

  .music-headline-wave {
    height: 18px;
    margin-bottom: 14px;
  }

  .music-headline-wave span {
    width: 3px;
  }

  .polaroid-pin {
    width: 28px;
    height: 28px;
  }

  .polaroid figcaption span {
    font-size: 0.62rem;
  }

  .now-card {
    grid-template-columns: 1fr;
    text-align: center;
    justify-items: center;
    width: 100%;
    padding: 14px;
  }

  .now-details {
    width: 100%;
    display: grid;
    justify-items: center;
    gap: 2px;
  }

  .now-courtline {
    justify-content: center;
  }

  .player-controls {
    padding: 14px;
    gap: 12px;
  }

  .player-vinyl-stage {
    width: 142px;
    height: 142px;
  }

  .player-vinyl-window {
    width: 128px;
    height: 128px;
  }

  .player-vinyl-disc-shell {
    width: 112px;
    height: 112px;
  }

  .player-vinyl-disc {
    width: 108px;
  }

  .player-vinyl-needle {
    width: 94px;
    top: 58px;
    right: -12px;
    height: 6px;
  }

  .player-actions {
    justify-content: center;
    gap: 10px;
  }

  .player-pill {
    width: 100%;
  }

  .player-rituals {
    justify-content: center;
  }

  .player-rituals span {
    font-size: 0.62rem;
  }

  .player-progress {
    grid-template-columns: 1fr;
  }

  .player-progress span {
    text-align: center;
  }

  .player-volume {
    flex-direction: column;
    align-items: stretch;
  }

  .player-volume input[type="range"] {
    width: 100%;
  }

  .track-card {
    padding: 11px;
  }

  .track-live {
    left: 8px;
    top: 8px;
    padding: 3px 8px;
  }

  .puzzle-grid {
    width: min(520px, 90vw);
  }
}

@media (max-width: 520px) {
  .top-routes-shell {
    gap: 6px;
  }

  .top-route-btn {
    min-height: 31px;
    padding: 5px 9px;
    font-size: 0.68rem;
  }

  .motion-intensity-toggle {
    left: 8px;
    bottom: 10px;
    padding: 6px;
  }

  .motion-intensity-btn {
    min-width: 47px;
    font-size: 0.58rem;
    letter-spacing: 0.03em;
  }

  .letter-curtain {
    display: none;
  }

  .letter-section .section-head h2 {
    font-size: 1.62rem;
  }

  .letter-royal-bar {
    font-size: 0.52rem;
    letter-spacing: 0.08em;
  }

  .music-kicker {
    font-size: 0.52rem;
    letter-spacing: 0.1em;
  }

  .music-ornament {
    width: 20px;
    height: 20px;
  }

  .music-section {
    min-height: calc(100dvh - 132px);
    padding: 20px 10px 18px;
  }

  .music-vinyl {
    width: 104px;
  }

  .music-vinyl-hole {
    width: 13px;
    height: 13px;
  }

  .music-scene h3 {
    font-size: 0.86rem;
  }

  .letter-vibes span,
  .letter-courtline span {
    font-size: 0.64rem;
  }

  .letter-launcher {
    padding: 22px 12px 16px;
  }

  .letter-orbit-item {
    width: 22px;
    height: 22px;
  }

  .letter-orbit-item .icon-glyph {
    width: 10px;
    height: 10px;
  }

  .letter-launcher-envelope {
    width: min(286px, 84vw);
    height: 162px;
  }

  .letter-launcher-seal {
    width: 54px;
    height: 54px;
  }

  .letter-launcher-title {
    font-size: 0.68rem;
  }

  .letter-launcher-caption {
    font-size: 0.76rem;
  }

  .now-cover {
    width: min(200px, 66vw);
  }

  .player-actions {
    justify-content: space-between;
  }

  .player-btn {
    width: 40px;
    height: 40px;
  }

  .player-btn.play {
    width: 48px;
    height: 48px;
    font-size: 1rem;
  }

  .track-live {
    gap: 5px;
  }

  .track-live-text {
    display: none;
  }
}
